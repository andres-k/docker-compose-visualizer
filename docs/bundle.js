var app=function(){"use strict";function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode.removeChild(e)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function attr(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function children(e){return Array.from(e.childNodes)}function toggle_class(e,t,n){e.classList[n?"add":"remove"](t)}let current_component;function set_current_component(e){current_component=e}function bubble(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}function flush(){const e=new Set;do{for(;dirty_components.length;){const e=dirty_components.shift();set_current_component(e),update$1(e.$$)}for(;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const n=render_callbacks[t];e.has(n)||(n(),e.add(n))}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1}function update$1(e){e.fragment&&(e.update(e.dirty),run_all(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(add_render_callback))}const outroing=new Set;function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function mount_component(e,t,n){const{fragment:r,on_mount:i,on_destroy:a,after_update:o}=e.$$;r.m(t,n),add_render_callback(()=>{const t=i.map(run).filter(is_function);a?a.push(...t):run_all(t),e.$$.on_mount=[]}),o.forEach(add_render_callback)}function destroy_component(e,t){e.$$.fragment&&(run_all(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function make_dirty(e,t){e.$$.dirty||(dirty_components.push(e),schedule_update(),e.$$.dirty=blank_object()),e.$$.dirty[t]=!0}function init(e,t,n,r,i,a){const o=current_component;set_current_component(e);const s=t.props||{},u=e.$$={fragment:null,ctx:null,props:a,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(o?o.$$.context:[]),callbacks:blank_object(),dirty:null};let l=!1;u.ctx=n?n(e,s,(t,n,r=n)=>(u.ctx&&i(u.ctx[t],u.ctx[t]=r)&&(u.bound[t]&&u.bound[t](r),l&&make_dirty(e,t)),n)):s,u.update(),l=!0,run_all(u.before_update),u.fragment=r(u.ctx),t.target&&(t.hydrate?u.fragment.l(children(t.target)):u.fragment.c(),t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor),flush()),set_current_component(o)}let SvelteElement;"undefined"!=typeof HTMLElement&&(SvelteElement=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}});class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var interopRequireDefault=createCommonjsModule(function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}});function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}unwrapExports(interopRequireDefault);var classCallCheck=_classCallCheck,_typeof_1=createCommonjsModule(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n});function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var assertThisInitialized=_assertThisInitialized;function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof_1(t)&&"function"!=typeof t?assertThisInitialized(e):t}var possibleConstructorReturn=_possibleConstructorReturn,getPrototypeOf=createCommonjsModule(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}),setPrototypeOf=createCommonjsModule(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t});function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&setPrototypeOf(e,t)}var inherits=_inherits;function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=getPrototypeOf(e)););return e}var superPropBase=_superPropBase,get=createCommonjsModule(function(e){function t(n,r,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=t=Reflect.get:e.exports=t=function(e,t,n){var r=superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},t(n,r,i||n)}e.exports=t});function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var createClass=_createClass,constants=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Type=t.Char=void 0;t.Char={ANCHOR:"&",COMMENT:"#",TAG:"!",DIRECTIVES_END:"-",DOCUMENT_END:"."};t.Type={ALIAS:"ALIAS",BLANK_LINE:"BLANK_LINE",BLOCK_FOLDED:"BLOCK_FOLDED",BLOCK_LITERAL:"BLOCK_LITERAL",COMMENT:"COMMENT",DIRECTIVE:"DIRECTIVE",DOCUMENT:"DOCUMENT",FLOW_MAP:"FLOW_MAP",FLOW_SEQ:"FLOW_SEQ",MAP:"MAP",MAP_KEY:"MAP_KEY",MAP_VALUE:"MAP_VALUE",PLAIN:"PLAIN",QUOTE_DOUBLE:"QUOTE_DOUBLE",QUOTE_SINGLE:"QUOTE_SINGLE",SEQ:"SEQ",SEQ_ITEM:"SEQ_ITEM"}});unwrapExports(constants);var constants_1=constants.Type,constants_2=constants.Char;function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}var isNativeFunction=_isNativeFunction,construct=createCommonjsModule(function(e){function t(n,r,i){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=t=function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&setPrototypeOf(i,n.prototype),i}:e.exports=t=Reflect.construct,t.apply(null,arguments)}e.exports=t}),wrapNativeSuper=createCommonjsModule(function(e){function t(n){var r="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return construct(e,arguments,getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),setPrototypeOf(t,e)},t(n)}e.exports=t});function _arrayWithHoles(e){if(Array.isArray(e))return e}var arrayWithHoles=_arrayWithHoles;function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}var iterableToArrayLimit=_iterableToArrayLimit;function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var nonIterableRest=_nonIterableRest;function _slicedToArray(e,t){return arrayWithHoles(e)||iterableToArrayLimit(e,t)||nonIterableRest()}var slicedToArray=_slicedToArray,getLinePos_1=createCommonjsModule(function(e,t){function n(e){for(var t=[0],n=e.indexOf("\n");-1!==n;)n+=1,t.push(n),n=e.indexOf("\n",n);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("number"==typeof e&&e>=0){var r,i;if("string"==typeof t?(r=n(t),i=t.length):(Array.isArray(t)&&(t=t[0]),t&&(t.lineStarts||(t.lineStarts=n(t.context.src)),r=t.lineStarts,i=t.context.src.length)),r&&e<=i){for(var a=0;a<r.length;++a){var o=r[a];if(e<o)return{line:a,col:e-r[a-1]+1};if(e===o)return{line:a+1,col:1}}var s=r.length;return{line:s,col:e-r[s-1]+1}}}return}});unwrapExports(getLinePos_1);var Range_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=function(){function e(t,r){(0,n.default)(this,e),this.start=t,this.end=r||t}return(0,r.default)(e,null,[{key:"copy",value:function(t){return new e(t.start,t.end)}}]),(0,r.default)(e,[{key:"isEmpty",value:function(){return"number"!=typeof this.start||!this.end||this.end<=this.start}},{key:"setOrigRange",value:function(e,t){var n=this.start,r=this.end;if(0===e.length||r<=e[0])return this.origStart=n,this.origEnd=r,t;for(var i=t;i<e.length&&!(e[i]>n);)++i;this.origStart=n+i;for(var a=i;i<e.length&&!(e[i]>=r);)++i;return this.origEnd=r+i,a}}]),e}();t.default=i});unwrapExports(Range_1);var Node_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(slicedToArray),r=interopRequireDefault(classCallCheck),i=interopRequireDefault(createClass),a=interopRequireDefault(getLinePos_1),o=interopRequireDefault(Range_1),s=function(){function e(t,n,i){(0,r.default)(this,e),this.context=i||null,this.error=null,this.range=null,this.valueRange=null,this.props=n||[],this.type=t,this.value=null}return(0,i.default)(e,null,[{key:"addStringTerminator",value:function(t,n,r){if("\n"===r[r.length-1])return r;var i=e.endOfWhiteSpace(t,n);return i>=t.length||"\n"===t[i]?r+"\n":r}},{key:"atDocumentBoundary",value:function(e,t,n){var r=e[t];if(!r)return!0;var i=e[t-1];if(i&&"\n"!==i)return!1;if(n){if(r!==n)return!1}else if(r!==constants.Char.DIRECTIVES_END&&r!==constants.Char.DOCUMENT_END)return!1;var a=e[t+1],o=e[t+2];if(a!==r||o!==r)return!1;var s=e[t+3];return!s||"\n"===s||"\t"===s||" "===s}},{key:"endOfIdentifier",value:function(e,t){for(var n=e[t],r="<"===n,i=r?["\n","\t"," ",">"]:["\n","\t"," ","[","]","{","}",","];n&&-1===i.indexOf(n);)n=e[t+=1];return r&&">"===n&&(t+=1),t}},{key:"endOfIndent",value:function(e,t){for(var n=e[t];" "===n;)n=e[t+=1];return t}},{key:"endOfLine",value:function(e,t){for(var n=e[t];n&&"\n"!==n;)n=e[t+=1];return t}},{key:"endOfWhiteSpace",value:function(e,t){for(var n=e[t];"\t"===n||" "===n;)n=e[t+=1];return t}},{key:"startOfLine",value:function(e,t){var n=e[t-1];if("\n"===n)return t;for(;n&&"\n"!==n;)n=e[t-=1];return t+1}},{key:"endOfBlockIndent",value:function(t,n,r){var i=e.endOfIndent(t,r);if(i>r+n)return i;var a=e.endOfWhiteSpace(t,i),o=t[a];return o&&"\n"!==o?null:a}},{key:"atBlank",value:function(e,t,n){var r=e[t];return"\n"===r||"\t"===r||" "===r||n&&!r}},{key:"atCollectionItem",value:function(t,n){var r=t[n];return("?"===r||":"===r||"-"===r)&&e.atBlank(t,n+1,!0)}},{key:"nextNodeIsIndented",value:function(e,t,n){return!(!e||t<0)&&(t>0||n&&"-"===e)}},{key:"normalizeOffset",value:function(t,n){var r=t[n];return r?"\n"!==r&&"\n"===t[n-1]?n-1:e.endOfWhiteSpace(t,n):n}},{key:"foldNewline",value:function(t,n,r){for(var i=0,a=!1,o="",s=t[n+1];" "===s||"\t"===s||"\n"===s;){switch(s){case"\n":i=0,n+=1,o+="\n";break;case"\t":i<=r&&(a=!0),n=e.endOfWhiteSpace(t,n+2)-1;break;case" ":i+=1,n+=1}s=t[n+1]}return o||(o=" "),s&&i<=r&&(a=!0),{fold:o,offset:n,error:a}}}]),(0,i.default)(e,[{key:"getPropValue",value:function(e,t,n){if(!this.context)return null;var r=this.context.src,i=this.props[e];return i&&r[i.start]===t?r.slice(i.start+(n?1:0),i.end):null}},{key:"commentHasRequiredWhitespace",value:function(t){var n=this.context.src;if(this.header&&t===this.header.end)return!1;if(!this.valueRange)return!1;var r=this.valueRange.end;return t!==r||e.atBlank(n,r-1)}},{key:"parseComment",value:function(t){var n=this.context.src;if(n[t]===constants.Char.COMMENT){var r=e.endOfLine(n,t+1),i=new o.default(t,r);return this.props.push(i),r}return t}},{key:"setOrigRanges",value:function(e,t){return this.range&&(t=this.range.setOrigRange(e,t)),this.valueRange&&this.valueRange.setOrigRange(e,t),this.props.forEach(function(n){return n.setOrigRange(e,t)}),t}},{key:"toString",value:function(){var t=this.context.src,n=this.range,r=this.value;if(null!=r)return r;var i=t.slice(n.start,n.end);return e.addStringTerminator(t,n.end,i)}},{key:"anchor",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,constants.Char.ANCHOR,!0);if(null!=t)return t}return null}},{key:"comment",get:function(){for(var e=[],t=0;t<this.props.length;++t){var n=this.getPropValue(t,constants.Char.COMMENT,!0);null!=n&&e.push(n)}return e.length>0?e.join("\n"):null}},{key:"hasComment",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]===constants.Char.COMMENT)return!0;return!1}},{key:"hasProps",get:function(){if(this.context)for(var e=this.context.src,t=0;t<this.props.length;++t)if(e[this.props[t].start]!==constants.Char.COMMENT)return!0;return!1}},{key:"includesTrailingLines",get:function(){return!1}},{key:"jsonLike",get:function(){return-1!==[constants.Type.FLOW_MAP,constants.Type.FLOW_SEQ,constants.Type.QUOTE_DOUBLE,constants.Type.QUOTE_SINGLE].indexOf(this.type)}},{key:"rangeAsLinePos",get:function(){if(this.range&&this.context){var e=(0,a.default)(this.range.start,this.context.root);if(e)return{start:e,end:(0,a.default)(this.range.end,this.context.root)}}}},{key:"rawValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end;return this.context.src.slice(t,n)}},{key:"tag",get:function(){for(var e=0;e<this.props.length;++e){var t=this.getPropValue(e,constants.Char.TAG,!1);if(null!=t){if("<"===t[1])return{verbatim:t.slice(2,-1)};var r=t.match(/^(.*!)([^!]*)$/),i=(0,n.default)(r,3);i[0];return{handle:i[1],suffix:i[2]}}}return null}},{key:"valueRangeContainsNewline",get:function(){if(!this.valueRange||!this.context)return!1;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=t;i<n;++i)if("\n"===r[i])return!0;return!1}}]),e}();t.default=s});unwrapExports(Node_1);var errors=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.YAMLWarning=t.YAMLSyntaxError=t.YAMLSemanticError=t.YAMLReferenceError=t.YAMLError=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(wrapNativeSuper),u=interopRequireDefault(Node_1),l=function(e){function t(e,r,o){var s;if((0,n.default)(this,t),!(o&&r instanceof u.default))throw new Error("Invalid arguments for new ".concat(e));return(s=(0,i.default)(this,(0,a.default)(t).call(this))).name=e,s.message=o,s.source=r,s}return(0,o.default)(t,e),(0,r.default)(t,[{key:"makePretty",value:function(){this.source&&(this.nodeType=this.source.type,this.range=this.source.range,this.linePos=this.source.rangeAsLinePos,delete this.source)}}]),t}((0,s.default)(Error));t.YAMLError=l;var c=function(e){function t(e,r){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).call(this,"YAMLReferenceError",e,r))}return(0,o.default)(t,e),t}(l);t.YAMLReferenceError=c;var f=function(e){function t(e,r){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).call(this,"YAMLSemanticError",e,r))}return(0,o.default)(t,e),t}(l);t.YAMLSemanticError=f;var h=function(e){function t(e,r){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).call(this,"YAMLSyntaxError",e,r))}return(0,o.default)(t,e),t}(l);t.YAMLSyntaxError=h;var d=function(e){function t(e,r){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).call(this,"YAMLWarning",e,r))}return(0,o.default)(t,e),t}(l);t.YAMLWarning=d});unwrapExports(errors);var errors_1=errors.YAMLWarning,errors_2=errors.YAMLSyntaxError,errors_3=errors.YAMLSemanticError,errors_4=errors.YAMLReferenceError,errors_5=errors.YAMLError,BlankLine_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(Node_1),u=interopRequireDefault(Range_1),l=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).call(this,constants.Type.BLANK_LINE))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"parse",value:function(e,t){this.context=e;for(var n=e.src,r=t+1;s.default.atBlank(n,r);){var i=s.default.endOfWhiteSpace(n,r);if("\n"!==i)break;r=i+1}return this.range=new u.default(t,r),r}},{key:"includesTrailingLines",get:function(){return!0}}]),t}(s.default);t.default=l});unwrapExports(BlankLine_1);var CollectionItem_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(get),s=interopRequireDefault(inherits),u=interopRequireDefault(BlankLine_1),l=interopRequireDefault(Node_1),c=interopRequireDefault(Range_1),f=function(e){function t(e,r){var o;return(0,n.default)(this,t),(o=(0,i.default)(this,(0,a.default)(t).call(this,e,r))).node=null,o}return(0,s.default)(t,e),(0,r.default)(t,[{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.atLineStart,a=e.lineStart;i||this.type!==constants.Type.SEQ_ITEM||(this.error=new errors.YAMLSemanticError(this,"Sequence items must not have preceding content on the same line"));for(var o=i?t-a:e.indent,s=l.default.endOfWhiteSpace(r,t+1),f=r[s];"\n"===f||"#"===f;){if("#"===f){var h=l.default.endOfLine(r,s+1);this.props.push(new c.default(s,h)),s=h}else{if(i=!0,a=s+1,"\n"===r[l.default.endOfWhiteSpace(r,a)]){var d=new u.default;a=d.parse({src:r},a),(e.parent.items||e.parent.contents).push(d)}s=l.default.endOfIndent(r,a)}f=r[s]}l.default.nextNodeIsIndented(f,s-(a+o),this.type!==constants.Type.SEQ_ITEM)?(this.node=n({atLineStart:i,inCollection:!1,indent:o,lineStart:a,parent:this},s),this.node&&(s=this.node.range.end)):f&&a>t+1&&(s=a-1);var p=this.node?this.node.valueRange.end:s;return this.valueRange=new c.default(t,p),s}},{key:"setOrigRanges",value:function(e,n){return n=(0,o.default)((0,a.default)(t.prototype),"setOrigRanges",this).call(this,e,n),this.node?this.node.setOrigRanges(e,n):n}},{key:"toString",value:function(){var e=this.context.src,t=this.node,n=this.range,r=this.value;if(null!=r)return r;var i=t?e.slice(n.start,t.range.start)+String(t):e.slice(n.start,n.end);return l.default.addStringTerminator(e,n.end,i)}},{key:"includesTrailingLines",get:function(){return!!this.node&&this.node.includesTrailingLines}}]),t}(l.default);t.default=f});unwrapExports(CollectionItem_1);var Comment_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(Node_1),u=interopRequireDefault(Range_1),l=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).call(this,constants.Type.COMMENT))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"parse",value:function(e,t){this.context=e;var n=this.parseComment(t);return this.range=new u.default(t,n),n}}]),t}(s.default);t.default=l});unwrapExports(Comment_1);var Collection_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.grabCollectionEndComments=d,t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(possibleConstructorReturn),i=interopRequireDefault(getPrototypeOf),a=interopRequireDefault(get),o=interopRequireDefault(createClass),s=interopRequireDefault(inherits),u=interopRequireDefault(BlankLine_1),l=interopRequireDefault(CollectionItem_1),c=interopRequireDefault(Comment_1),f=interopRequireDefault(Node_1),h=interopRequireDefault(Range_1);function d(e){for(var t=e;t instanceof l.default;)t=t.node;if(!(t instanceof p))return null;for(var n=t.items.length,r=-1,i=n-1;i>=0;--i){var a=t.items[i];if(a.type===constants.Type.COMMENT){var o=a.context,s=o.indent,u=o.lineStart;if(s>0&&a.range.start>=u+s)break;r=i}else{if(a.type!==constants.Type.BLANK_LINE)break;r=i}}if(-1===r)return null;for(var c=t.items.splice(r,n-r),f=c[0].range.start;t.range.end=f,t.valueRange&&t.valueRange.end>f&&(t.valueRange.end=f),t!==e;)t=t.context.parent;return c}var p=function(e){function t(e){var a;(0,n.default)(this,t),a=(0,r.default)(this,(0,i.default)(t).call(this,e.type===constants.Type.SEQ_ITEM?constants.Type.SEQ:constants.Type.MAP));for(var o=e.props.length-1;o>=0;--o)if(e.props[o].start<e.context.lineStart){a.props=e.props.slice(0,o+1),e.props=e.props.slice(o+1);var s=e.props[0]||e.valueRange;e.range.start=s.start;break}a.items=[e];var u=d(e);return u&&Array.prototype.push.apply(a.items,u),a}return(0,s.default)(t,e),(0,o.default)(t,null,[{key:"nextContentHasIndent",value:function(e,n,r){var i=f.default.endOfLine(e,n)+1,a=e[n=f.default.endOfWhiteSpace(e,i)];return!!a&&(n>=i+r||("#"===a||"\n"===a)&&t.nextContentHasIndent(e,n,r))}}]),(0,o.default)(t,[{key:"parse",value:function(e,n){this.context=e;var r=e.parseNode,i=e.src,a=f.default.startOfLine(i,n),o=this.items[0];o.context.parent=this,this.valueRange=h.default.copy(o.valueRange);for(var s=o.range.start-o.context.lineStart,l=n,p=i[l=f.default.normalizeOffset(i,l)],g=f.default.endOfWhiteSpace(i,a)===l,v=!1;p;){for(;"\n"===p||"#"===p;){if(g&&"\n"===p&&!v){var m=new u.default;if(l=m.parse({src:i},l),this.valueRange.end=l,l>=i.length){p=null;break}this.items.push(m),l-=1}else if("#"===p){if(l<a+s&&!t.nextContentHasIndent(i,l,s))return l;var y=new c.default;if(l=y.parse({indent:s,lineStart:a,src:i},l),this.items.push(y),this.valueRange.end=l,l>=i.length){p=null;break}}if(a=l+1,l=f.default.endOfIndent(i,a),f.default.atBlank(i,l)){var b=f.default.endOfWhiteSpace(i,l),x=i[b];x&&"\n"!==x&&"#"!==x||(l=b)}p=i[l],g=!0}if(!p)break;if(l!==a+s&&(g||":"!==p)){a>n&&(l=a);break}if(o.type===constants.Type.SEQ_ITEM!=("-"===p)){var w=!0;if("-"===p){var E=i[l+1];w=!E||"\n"===E||"\t"===E||" "===E}if(w){a>n&&(l=a);break}}var T=r({atLineStart:g,inCollection:!0,indent:s,lineStart:a,parent:this},l);if(!T)return l;if(this.items.push(T),this.valueRange.end=T.valueRange.end,p=i[l=f.default.normalizeOffset(i,T.range.end)],g=!1,v=T.includesTrailingLines,p){for(var _=l-1,C=i[_];" "===C||"\t"===C;)C=i[--_];"\n"===C&&(a=_+1,g=!0)}var D=d(T);D&&Array.prototype.push.apply(this.items,D)}return l}},{key:"setOrigRanges",value:function(e,n){return n=(0,a.default)((0,i.default)(t.prototype),"setOrigRanges",this).call(this,e,n),this.items.forEach(function(t){n=t.setOrigRanges(e,n)}),n}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;for(var i=e.slice(n.start,t[0].range.start)+String(t[0]),a=1;a<t.length;++a){var o=t[a],s=o.context,u=s.atLineStart,l=s.indent;if(u)for(var c=0;c<l;++c)i+=" ";i+=String(o)}return f.default.addStringTerminator(e,n.end,i)}},{key:"includesTrailingLines",get:function(){return this.items.length>0}}]),t}(f.default);t.default=p});unwrapExports(Collection_1);var Collection_2=Collection_1.grabCollectionEndComments,Directive_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(possibleConstructorReturn),i=interopRequireDefault(getPrototypeOf),a=interopRequireDefault(createClass),o=interopRequireDefault(inherits),s=interopRequireDefault(Node_1),u=interopRequireDefault(Range_1),l=function(e){function t(){var e;return(0,n.default)(this,t),(e=(0,r.default)(this,(0,i.default)(t).call(this,constants.Type.DIRECTIVE))).name=null,e}return(0,o.default)(t,e),(0,a.default)(t,null,[{key:"endOfDirective",value:function(e,t){for(var n=e[t];n&&"\n"!==n&&"#"!==n;)n=e[t+=1];for(n=e[t-1];" "===n||"\t"===n;)n=e[(t-=1)-1];return t}}]),(0,a.default)(t,[{key:"parseName",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"\t"!==r&&" "!==r;)r=t[n+=1];return this.name=t.slice(e,n),n}},{key:"parseParameters",value:function(e){for(var t=this.context.src,n=e,r=t[n];r&&"\n"!==r&&"#"!==r;)r=t[n+=1];return this.valueRange=new u.default(e,n),n}},{key:"parse",value:function(e,t){this.context=e;var n=this.parseName(t+1);return n=this.parseParameters(n),n=this.parseComment(n),this.range=new u.default(t,n),n}},{key:"parameters",get:function(){var e=this.rawValue;return e?e.trim().split(/[ \t]+/):[]}}]),t}(s.default);t.default=l});unwrapExports(Directive_1);var Document_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(possibleConstructorReturn),i=interopRequireDefault(getPrototypeOf),a=interopRequireDefault(get),o=interopRequireDefault(createClass),s=interopRequireDefault(inherits),u=interopRequireDefault(BlankLine_1),l=interopRequireDefault(Comment_1),c=interopRequireDefault(Directive_1),f=interopRequireDefault(Node_1),h=interopRequireDefault(Range_1),d=function(e){function t(){var e;return(0,n.default)(this,t),(e=(0,r.default)(this,(0,i.default)(t).call(this,constants.Type.DOCUMENT))).directives=null,e.contents=null,e.directivesEndMarker=null,e.documentEndMarker=null,e}return(0,s.default)(t,e),(0,o.default)(t,null,[{key:"startCommentOrEndBlankLine",value:function(e,t){var n=f.default.endOfWhiteSpace(e,t),r=e[n];return"#"===r||"\n"===r?n:t}}]),(0,o.default)(t,[{key:"parseDirectives",value:function(e){var n=this.context.src;this.directives=[];for(var r=!0,i=!1,a=e;!f.default.atDocumentBoundary(n,a,constants.Char.DIRECTIVES_END);)switch(n[a=t.startCommentOrEndBlankLine(n,a)]){case"\n":if(r){var o=new u.default;(a=o.parse({src:n},a))<n.length&&this.directives.push(o)}else a+=1,r=!0;break;case"#":var s=new l.default;a=s.parse({src:n},a),this.directives.push(s),r=!1;break;case"%":var d=new c.default;a=d.parse({parent:this,src:n},a),this.directives.push(d),i=!0,r=!1;break;default:return i?this.error=new errors.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),a}return n[a]?(this.directivesEndMarker=new h.default(a,a+3),a+3):(i?this.error=new errors.YAMLSemanticError(this,"Missing directives-end indicator line"):this.directives.length>0&&(this.contents=this.directives,this.directives=[]),a)}},{key:"parseContents",value:function(e){var n=this.context,r=n.parseNode,i=n.src;this.contents||(this.contents=[]);for(var a=e;"-"===i[a-1];)a-=1;var o=f.default.endOfWhiteSpace(i,e),s=a===e;for(this.valueRange=new h.default(o);!f.default.atDocumentBoundary(i,o,constants.Char.DOCUMENT_END);){switch(i[o]){case"\n":if(s){var c=new u.default;(o=c.parse({src:i},o))<i.length&&this.contents.push(c)}else o+=1,s=!0;a=o;break;case"#":var d=new l.default;o=d.parse({src:i},o),this.contents.push(d),s=!1;break;default:var p=f.default.endOfIndent(i,o),g=r({atLineStart:s,indent:-1,inFlow:!1,inCollection:!1,lineStart:a,parent:this},p);if(!g)return this.valueRange.end=p;this.contents.push(g),o=g.range.end,s=!1;var v=(0,Collection_1.grabCollectionEndComments)(g);v&&Array.prototype.push.apply(this.contents,v)}o=t.startCommentOrEndBlankLine(i,o)}if(this.valueRange.end=o,i[o]&&(this.documentEndMarker=new h.default(o,o+3),i[o+=3])){if("#"===i[o=f.default.endOfWhiteSpace(i,o)]){var m=new l.default;o=m.parse({src:i},o),this.contents.push(m)}switch(i[o]){case"\n":o+=1;break;case void 0:break;default:this.error=new errors.YAMLSyntaxError(this,"Document end marker line cannot have a non-comment suffix")}}return o}},{key:"parse",value:function(e,t){e.root=this,this.context=e;var n=65279===e.src.charCodeAt(t)?t+1:t;return n=this.parseDirectives(n),n=this.parseContents(n)}},{key:"setOrigRanges",value:function(e,n){return n=(0,a.default)((0,i.default)(t.prototype),"setOrigRanges",this).call(this,e,n),this.directives.forEach(function(t){n=t.setOrigRanges(e,n)}),this.directivesEndMarker&&(n=this.directivesEndMarker.setOrigRange(e,n)),this.contents.forEach(function(t){n=t.setOrigRanges(e,n)}),this.documentEndMarker&&(n=this.documentEndMarker.setOrigRange(e,n)),n}},{key:"toString",value:function(){var e=this.contents,t=this.directives,n=this.value;if(null!=n)return n;var r=t.join("");return e.length>0&&((t.length>0||e[0].type===constants.Type.COMMENT)&&(r+="---\n"),r+=e.join("")),"\n"!==r[r.length-1]&&(r+="\n"),r}}]),t}(f.default);t.default=d});function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}unwrapExports(Document_1);var defineProperty=_defineProperty,Alias_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(Node_1),u=interopRequireDefault(Range_1),l=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=s.default.endOfIdentifier(n,t+1);return this.valueRange=new u.default(t+1,r),r=s.default.endOfWhiteSpace(n,r),r=this.parseComment(r)}}]),t}(s.default);t.default=l});unwrapExports(Alias_1);var BlockValue_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Chomp=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(get),s=interopRequireDefault(inherits),u=interopRequireDefault(Node_1),l=interopRequireDefault(Range_1),c={CLIP:"CLIP",KEEP:"KEEP",STRIP:"STRIP"};t.Chomp=c;var f=function(e){function t(e,r){var o;return(0,n.default)(this,t),(o=(0,i.default)(this,(0,a.default)(t).call(this,e,r))).blockIndent=null,o.chomping=c.CLIP,o.header=null,o}return(0,s.default)(t,e),(0,r.default)(t,[{key:"parseBlockHeader",value:function(e){for(var t=this.context.src,n=e+1,r="";;){var i=t[n];switch(i){case"-":this.chomping=c.STRIP;break;case"+":this.chomping=c.KEEP;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r+=i;break;default:return this.blockIndent=Number(r)||null,this.header=new l.default(e,n),n}n+=1}}},{key:"parseBlockValue",value:function(e){for(var t=this.context,n=t.indent,r=t.src,i=e,a=e,o=this.blockIndent?n+this.blockIndent-1:n,s=1,f=r[i];"\n"===f&&(i+=1,!u.default.atDocumentBoundary(r,i));f=r[i]){var h=u.default.endOfBlockIndent(r,o,i);if(null===h)break;if(!this.blockIndent){var d=h-(i+n);if("\n"!==r[h]){if(d<s){i-=1;break}this.blockIndent=d,o=n+this.blockIndent-1}else d>s&&(s=d)}i="\n"===r[h]?h:a=u.default.endOfLine(r,h)}return this.chomping!==c.KEEP&&(i=r[a]?a+1:a),this.valueRange=new l.default(e+1,i),i}},{key:"parse",value:function(e,t){this.context=e;var n=e.src,r=this.parseBlockHeader(t);return r=u.default.endOfWhiteSpace(n,r),r=this.parseComment(r),r=this.parseBlockValue(r)}},{key:"setOrigRanges",value:function(e,n){return n=(0,o.default)((0,a.default)(t.prototype),"setOrigRanges",this).call(this,e,n),this.header?this.header.setOrigRange(e,n):n}},{key:"includesTrailingLines",get:function(){return this.chomping===c.KEEP}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=this.valueRange,t=e.start,n=e.end,r=this.context,i=r.indent,a=r.src;if(this.valueRange.isEmpty())return"";for(var o=null,s=a[n-1];"\n"===s||"\t"===s||" "===s;){if((n-=1)<=t){if(this.chomping===c.KEEP)break;return""}"\n"===s&&(o=n),s=a[n-1]}var l=n+1;o&&(this.chomping===c.KEEP?(l=o,n=this.valueRange.end):n=o);for(var f=i+this.blockIndent,h=this.type===constants.Type.BLOCK_FOLDED,d=!0,p="",g="",v=!1,m=t;m<n;++m){for(var y=0;y<f&&" "===a[m];++y)m+=1;var b=a[m];if("\n"===b)"\n"===g?p+="\n":g="\n";else{var x=u.default.endOfLine(a,m),w=a.slice(m,x);m=x,h&&(" "===b||"\t"===b)&&m<l?(" "===g?g="\n":v||d||"\n"!==g||(g="\n\n"),p+=g+w,g=x<n&&a[x]||"",v=!0):(p+=g+w,g=h&&m<l?" ":"\n",v=!1),d&&""!==w&&(d=!1)}}return this.chomping===c.STRIP?p:p+"\n"}}]),t}(u.default);t.default=f});unwrapExports(BlockValue_1);var BlockValue_2=BlockValue_1.Chomp,FlowCollection_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(get),s=interopRequireDefault(inherits),u=interopRequireDefault(BlankLine_1),l=interopRequireDefault(Comment_1),c=interopRequireDefault(Node_1),f=interopRequireDefault(Range_1),h=function(e){function t(e,r){var o;return(0,n.default)(this,t),(o=(0,i.default)(this,(0,a.default)(t).call(this,e,r))).items=null,o}return(0,s.default)(t,e),(0,r.default)(t,[{key:"prevNodeIsJsonLike",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.items[e-1];return!!t&&(t.jsonLike||t.type===constants.Type.COMMENT&&this.nodeIsJsonLike(e-1))}},{key:"parse",value:function(e,t){this.context=e;var n=e.parseNode,r=e.src,i=e.indent,a=e.lineStart,o=r[t];this.items=[{char:o,offset:t}];var s=c.default.endOfWhiteSpace(r,t+1);for(o=r[s];o&&"]"!==o&&"}"!==o;){switch(o){case"\n":if(a=s+1,"\n"===r[c.default.endOfWhiteSpace(r,a)]){var h=new u.default;a=h.parse({src:r},a),this.items.push(h)}if((s=c.default.endOfIndent(r,a))<=a+i&&(o=r[s],s<a+i||"]"!==o&&"}"!==o)){this.error=new errors.YAMLSemanticError(this,"Insufficient indentation in flow collection")}break;case",":this.items.push({char:o,offset:s}),s+=1;break;case"#":var d=new l.default;s=d.parse({src:r},s),this.items.push(d);break;case"?":case":":var p=r[s+1];if("\n"===p||"\t"===p||" "===p||","===p||":"===o&&this.prevNodeIsJsonLike()){this.items.push({char:o,offset:s}),s+=1;break}default:var g=n({atLineStart:!1,inCollection:!1,inFlow:!0,indent:-1,lineStart:a,parent:this},s);if(!g)return this.valueRange=new f.default(t,s),s;this.items.push(g),s=c.default.normalizeOffset(r,g.range.end)}o=r[s=c.default.endOfWhiteSpace(r,s)]}return this.valueRange=new f.default(t,s+1),o&&(this.items.push({char:o,offset:s}),s=c.default.endOfWhiteSpace(r,s+1),s=this.parseComment(s)),s}},{key:"setOrigRanges",value:function(e,n){return n=(0,o.default)((0,a.default)(t.prototype),"setOrigRanges",this).call(this,e,n),this.items.forEach(function(t){if(t instanceof c.default)n=t.setOrigRanges(e,n);else if(0===e.length)t.origOffset=t.offset;else{for(var r=n;r<e.length&&!(e[r]>t.offset);)++r;t.origOffset=t.offset+r,n=r}}),n}},{key:"toString",value:function(){var e=this.context.src,t=this.items,n=this.range,r=this.value;if(null!=r)return r;var i=t.filter(function(e){return e instanceof c.default}),a="",o=n.start;return i.forEach(function(t){var n=e.slice(o,t.range.start);o=t.range.end,"\n"===(a+=n+String(t))[a.length-1]&&"\n"!==e[o-1]&&"\n"===e[o]&&(o+=1)}),a+=e.slice(o,n.end),c.default.addStringTerminator(e,n.end,a)}}]),t}(c.default);t.default=h});unwrapExports(FlowCollection_1);var PlainValue_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(Node_1),u=interopRequireDefault(Range_1),l=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"parseBlockValue",value:function(e){for(var n=this.context,r=n.indent,i=n.inFlow,a=n.src,o=e,u=e,l=a[o];"\n"===l&&!s.default.atDocumentBoundary(a,o+1);l=a[o]){var c=s.default.endOfBlockIndent(a,r,o+1);if(null===c||"#"===a[c])break;o="\n"===a[c]?c:u=t.endOfLine(a,c,i)}return this.valueRange.isEmpty()&&(this.valueRange.start=e),this.valueRange.end=u,u}},{key:"parse",value:function(e,n){this.context=e;var r=e.inFlow,i=e.src,a=n,o=i[a];return o&&"#"!==o&&"\n"!==o&&(a=t.endOfLine(i,n,r)),this.valueRange=new u.default(n,a),a=s.default.endOfWhiteSpace(i,a),a=this.parseComment(a),this.hasComment&&!this.valueRange.isEmpty()||(a=this.parseBlockValue(a)),a}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;for(var e=this.valueRange,t=e.start,n=e.end,r=this.context.src,i=r[n-1];t<n&&("\n"===i||"\t"===i||" "===i);)i=r[--n-1];for(i=r[t];t<n&&("\n"===i||"\t"===i||" "===i);)i=r[++t];for(var a="",o=t;o<n;++o){var u=r[o];if("\n"===u){var l=s.default.foldNewline(r,o,-1);a+=l.fold,o=l.offset}else if(" "===u||"\t"===u){for(var c=o,f=r[o+1];o<n&&(" "===f||"\t"===f);)f=r[(o+=1)+1];"\n"!==f&&(a+=o>c?r.slice(c,o+1):u)}else a+=u}return a}}],[{key:"endOfLine",value:function(e,t,n){for(var r=e[t],i=t;r&&"\n"!==r&&(!n||"["!==r&&"]"!==r&&"{"!==r&&"}"!==r&&","!==r);){var a=e[i+1];if(":"===r&&("\n"===a||"\t"===a||" "===a||n&&","===a))break;if((" "===r||"\t"===r)&&"#"===a)break;i+=1,r=a}return i}}]),t}(s.default);t.default=l});unwrapExports(PlainValue_1);var QuoteDouble_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(Node_1),u=interopRequireDefault(Range_1),l=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"parseCharCode",value:function(e,t,n){var r=this.context.src,i=r.substr(e,t),a=i.length===t&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;return isNaN(a)?(n.push(new errors.YAMLSyntaxError(this,"Invalid escape sequence ".concat(r.substr(e-2,t+2)))),r.substr(e-2,t+2)):String.fromCodePoint(a)}},{key:"parse",value:function(e,n){this.context=e;var r=e.src,i=t.endOfQuote(r,n+1);return this.valueRange=new u.default(n,i),i=s.default.endOfWhiteSpace(r,i),i=this.parseComment(i)}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,a=i.indent,o=i.src;'"'!==o[r-1]&&e.push(new errors.YAMLSyntaxError(this,'Missing closing "quote'));for(var u="",l=n+1;l<r-1;++l){var c=o[l];if("\n"===c){s.default.atDocumentBoundary(o,l+1)&&e.push(new errors.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));var f=s.default.foldNewline(o,l,a);u+=f.fold,l=f.offset,f.error&&e.push(new errors.YAMLSemanticError(this,"Multi-line double-quoted string needs to be sufficiently indented"))}else if("\\"===c)switch(o[l+=1]){case"0":u+="\0";break;case"a":u+="";break;case"b":u+="\b";break;case"e":u+="";break;case"f":u+="\f";break;case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"v":u+="\v";break;case"N":u+="";break;case"_":u+=" ";break;case"L":u+="\u2028";break;case"P":u+="\u2029";break;case" ":u+=" ";break;case'"':u+='"';break;case"/":u+="/";break;case"\\":u+="\\";break;case"\t":u+="\t";break;case"x":u+=this.parseCharCode(l+1,2,e),l+=2;break;case"u":u+=this.parseCharCode(l+1,4,e),l+=4;break;case"U":u+=this.parseCharCode(l+1,8,e),l+=8;break;case"\n":for(;" "===o[l+1]||"\t"===o[l+1];)l+=1;break;default:e.push(new errors.YAMLSyntaxError(this,"Invalid escape sequence ".concat(o.substr(l-1,2)))),u+="\\"+o[l]}else if(" "===c||"\t"===c){for(var h=l,d=o[l+1];" "===d||"\t"===d;)d=o[(l+=1)+1];"\n"!==d&&(u+=l>h?o.slice(h,l+1):c)}else u+=c}return e.length>0?{errors:e,str:u}:u}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n&&'"'!==n;)n=e[t+="\\"===n?2:1];return t+1}}]),t}(s.default);t.default=l});unwrapExports(QuoteDouble_1);var QuoteSingle_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(Node_1),u=interopRequireDefault(Range_1),l=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"parse",value:function(e,n){this.context=e;var r=e.src,i=t.endOfQuote(r,n+1);return this.valueRange=new u.default(n,i),i=s.default.endOfWhiteSpace(r,i),i=this.parseComment(i)}},{key:"strValue",get:function(){if(!this.valueRange||!this.context)return null;var e=[],t=this.valueRange,n=t.start,r=t.end,i=this.context,a=i.indent,o=i.src;"'"!==o[r-1]&&e.push(new errors.YAMLSyntaxError(this,"Missing closing 'quote"));for(var u="",l=n+1;l<r-1;++l){var c=o[l];if("\n"===c){s.default.atDocumentBoundary(o,l+1)&&e.push(new errors.YAMLSemanticError(this,"Document boundary indicators are not allowed within string values"));var f=s.default.foldNewline(o,l,a);u+=f.fold,l=f.offset,f.error&&e.push(new errors.YAMLSemanticError(this,"Multi-line single-quoted string needs to be sufficiently indented"))}else if("'"===c)u+=c,"'"!==o[l+=1]&&e.push(new errors.YAMLSyntaxError(this,"Unescaped single quote? This should not happen."));else if(" "===c||"\t"===c){for(var h=l,d=o[l+1];" "===d||"\t"===d;)d=o[(l+=1)+1];"\n"!==d&&(u+=l>h?o.slice(h,l+1):c)}else u+=c}return e.length>0?{errors:e,str:u}:u}}],[{key:"endOfQuote",value:function(e,t){for(var n=e[t];n;)if("'"===n){if("'"!==e[t+1])break;n=e[t+=2]}else n=e[t+=1];return t+1}}]),t}(s.default);t.default=l});unwrapExports(QuoteSingle_1);var ParseContext_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(defineProperty),a=interopRequireDefault(Alias_1),o=interopRequireDefault(BlockValue_1),s=interopRequireDefault(Collection_1),u=interopRequireDefault(CollectionItem_1),l=interopRequireDefault(FlowCollection_1),c=interopRequireDefault(Node_1),f=interopRequireDefault(PlainValue_1),h=interopRequireDefault(QuoteDouble_1),d=interopRequireDefault(QuoteSingle_1),p=interopRequireDefault(Range_1),g=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=g.atLineStart,m=g.inCollection,y=g.inFlow,b=g.indent,x=g.lineStart,w=g.parent;(0,n.default)(this,e),(0,i.default)(this,"parseNode",function(n,r){if(c.default.atDocumentBoundary(t.src,r))return null;var i,g=new e(t,n),v=g.parseProps(r),m=v.props,y=v.type,b=v.valueStart;switch(y){case constants.Type.ALIAS:i=new a.default(y,m);break;case constants.Type.BLOCK_FOLDED:case constants.Type.BLOCK_LITERAL:i=new o.default(y,m);break;case constants.Type.FLOW_MAP:case constants.Type.FLOW_SEQ:i=new l.default(y,m);break;case constants.Type.MAP_KEY:case constants.Type.MAP_VALUE:case constants.Type.SEQ_ITEM:i=new u.default(y,m);break;case constants.Type.COMMENT:case constants.Type.PLAIN:i=new f.default(y,m);break;case constants.Type.QUOTE_DOUBLE:i=new h.default(y,m);break;case constants.Type.QUOTE_SINGLE:i=new d.default(y,m);break;default:return i.error=new errors.YAMLSyntaxError(i,"Unknown node type: ".concat(JSON.stringify(y))),i.range=new p.default(r,r+1),i}var x=i.parse(g,b);if(i.range=new p.default(r,x),x<=r&&(i.error=new Error("Node#parse consumed no characters"),i.error.parseEnd=x,i.error.source=i,i.range.end=r+1),g.nodeStartsCollection(i)){i.error||g.atLineStart||g.parent.type!==constants.Type.DOCUMENT||(i.error=new errors.YAMLSyntaxError(i,"Block collection must not have preceding content here (e.g. directives-end indicator)"));var w=new s.default(i);return x=w.parse(new e(g),x),w.range=new p.default(r,x),w}return i}),this.atLineStart=null!=v?v:r.atLineStart||!1,this.inCollection=null!=m?m:r.inCollection||!1,this.inFlow=null!=y?y:r.inFlow||!1,this.indent=null!=b?b:r.indent,this.lineStart=null!=x?x:r.lineStart,this.parent=null!=w?w:r.parent||{},this.root=r.root,this.src=r.src}return(0,r.default)(e,null,[{key:"parseType",value:function(e,t,n){switch(e[t]){case"*":return constants.Type.ALIAS;case">":return constants.Type.BLOCK_FOLDED;case"|":return constants.Type.BLOCK_LITERAL;case"{":return constants.Type.FLOW_MAP;case"[":return constants.Type.FLOW_SEQ;case"?":return!n&&c.default.atBlank(e,t+1,!0)?constants.Type.MAP_KEY:constants.Type.PLAIN;case":":return!n&&c.default.atBlank(e,t+1,!0)?constants.Type.MAP_VALUE:constants.Type.PLAIN;case"-":return!n&&c.default.atBlank(e,t+1,!0)?constants.Type.SEQ_ITEM:constants.Type.PLAIN;case'"':return constants.Type.QUOTE_DOUBLE;case"'":return constants.Type.QUOTE_SINGLE;default:return constants.Type.PLAIN}}}]),(0,r.default)(e,[{key:"nodeStartsCollection",value:function(e){var t=this.inCollection,n=this.inFlow,r=this.src;if(t||n)return!1;if(e instanceof u.default)return!0;var i=e.range.end;return"\n"!==r[i]&&"\n"!==r[i-1]&&":"===r[i=c.default.endOfWhiteSpace(r,i)]}},{key:"parseProps",value:function(t){for(var n=this.inFlow,r=this.parent,i=this.src,a=[],o=!1,s=i[t=c.default.endOfWhiteSpace(i,t)];s===constants.Char.ANCHOR||s===constants.Char.COMMENT||s===constants.Char.TAG||"\n"===s;){if("\n"===s){var u=t+1,l=c.default.endOfIndent(i,u),f=l-(u+this.indent),h=r.type===constants.Type.SEQ_ITEM&&r.context.atLineStart;if(!c.default.nextNodeIsIndented(i[l],f,!h))break;this.atLineStart=!0,this.lineStart=u,o=!1,t=l}else if(s===constants.Char.COMMENT){var d=c.default.endOfLine(i,t+1);a.push(new p.default(t,d)),t=d}else{var g=c.default.endOfIdentifier(i,t+1);s===constants.Char.TAG&&","===i[g]&&/^[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+,\d\d\d\d(-\d\d){0,2}\/\S/.test(i.slice(t+1,g+13))&&(g=c.default.endOfIdentifier(i,g+5)),a.push(new p.default(t,g)),o=!0,t=c.default.endOfWhiteSpace(i,g)}s=i[t]}return o&&":"===s&&c.default.atBlank(i,t+1,!0)&&(t-=1),{props:a,type:e.parseType(i,t,n),valueStart:t}}},{key:"pretty",get:function(){var e={start:"".concat(this.lineStart," + ").concat(this.indent),in:[],parent:this.parent.type};return this.atLineStart||(e.start+=" + N"),this.inCollection&&e.in.push("collection"),this.inFlow&&e.in.push("flow"),e}}]),e}();t.default=g});unwrapExports(ParseContext_1);var parse_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];-1!==e.indexOf("\r")&&(e=e.replace(/\r\n?/g,function(e,n){return e.length>1&&t.push(n),"\n"}));var i=[],a=0;do{var o=new n.default,s=new r.default({src:e});a=o.parse(s,a),i.push(o)}while(a<e.length);return i.setOrigRanges=function(){if(0===t.length)return!1;for(var e=1;e<t.length;++e)t[e]-=e;for(var n=0,r=0;r<i.length;++r)n=i[r].setOrigRanges(t,n);return t.splice(0,t.length),!0},i.toString=function(){return i.join("...\n")},i};var n=interopRequireDefault(Document_1),r=interopRequireDefault(ParseContext_1)});unwrapExports(parse_1);var interopRequireWildcard=createCommonjsModule(function(e){function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;var n=t();if(n&&n.has(e))return n.get(e);var r={};if(null!=e){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}}return r.default=e,n&&n.set(e,r),r}});unwrapExports(interopRequireWildcard);var addComment_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.addCommentBefore=function(e,t,n){if(!n)return e;var r=n.replace(/[\s\S]^/gm,"$&".concat(t,"#"));return"#".concat(r,"\n").concat(t).concat(e)},t.default=function(e,t,n){return n?-1===n.indexOf("\n")?"".concat(e," #").concat(n):"".concat(e,"\n")+n.replace(/^/gm,"".concat(t||"","#")):e}});unwrapExports(addComment_1);var addComment_2=addComment_1.addCommentBefore,toJSON_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n,r){if(Array.isArray(t))return t.map(function(t,n){return e(t,String(n),r)});if(t&&"function"==typeof t.toJSON){var i=r&&r.anchors&&r.anchors.find(function(e){return e.node===t});i&&(r.onCreate=function(e){i.res=e,delete r.onCreate});var a=t.toJSON(n,r);return i&&r.onCreate&&r.onCreate(a),a}return t}});function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}unwrapExports(toJSON_1);var iterableToArray=_iterableToArray;function _toArray(e){return arrayWithHoles(e)||iterableToArray(e)||nonIterableRest()}var toArray=_toArray,Node_1$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck);t.default=function e(){(0,n.default)(this,e)}});unwrapExports(Node_1$1);var Scalar_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(toJSON_1),u=function(e){function t(e){var r;return(0,n.default)(this,t),(r=(0,i.default)(this,(0,a.default)(t).call(this))).value=e,r}return(0,o.default)(t,e),(0,r.default)(t,[{key:"toJSON",value:function(e,t){return t&&t.keep?this.value:(0,s.default)(this.value,e,t)}},{key:"toString",value:function(){return String(this.value)}}]),t}(interopRequireDefault(Node_1$1).default);t.default=u});unwrapExports(Scalar_1);var Pair_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(inherits),s=interopRequireDefault(_typeof_1),u=interopRequireDefault(addComment_1),l=interopRequireDefault(toJSON_1),c=interopRequireDefault(Collection_1$1),f=interopRequireDefault(Node_1$1),h=interopRequireDefault(Scalar_1),d=function(e){function t(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,n.default)(this,t),(r=(0,i.default)(this,(0,a.default)(t).call(this))).key=e,r.value=o,r.type="PAIR",r}return(0,o.default)(t,e),(0,r.default)(t,[{key:"addToJSMap",value:function(e,t){var n=(0,l.default)(this.key,"",e);if(t instanceof Map){var r=(0,l.default)(this.value,n,e);t.set(n,r)}else if(t instanceof Set)t.add(n);else{var i=function(e,t,n){return null===t?"":"object"!==(0,s.default)(t)?String(t):e instanceof f.default&&n&&n.doc?e.toString({anchors:{},doc:n.doc,indent:"",inFlow:!0,inStringifyKey:!0}):JSON.stringify(t)}(this.key,n,e);t[i]=(0,l.default)(this.value,i,e)}return t}},{key:"toJSON",value:function(e,t){var n=t&&t.mapAsMap?new Map:{};return this.addToJSMap(t,n)}},{key:"toString",value:function(e,t,n){if(!e||!e.doc)return JSON.stringify(this);var r=this.key,i=this.value,a=r instanceof f.default&&r.comment,o=!r||a||r instanceof c.default,l=e,h=l.doc,d=l.indent;e=Object.assign({},e,{implicitKey:!o,indent:d+"  "});var p=!1,g=h.schema.stringify(r,e,function(){return a=null},function(){return p=!0});if(g=(0,u.default)(g,e.indent,a),e.allNullValues)return this.comment?(g=(0,u.default)(g,e.indent,this.comment),t&&t()):p&&!a&&n&&n(),e.inFlow?g:"? ".concat(g);g=o?"? ".concat(g,"\n").concat(d,":"):"".concat(g,":"),this.comment&&(g=(0,u.default)(g,e.indent,this.comment),t&&t());var v="",m=null;if(i instanceof f.default){if(i.spaceBefore&&(v="\n"),i.commentBefore){var y=i.commentBefore.replace(/^/gm,"".concat(e.indent,"#"));v+="\n".concat(y)}m=i.comment}else i&&"object"===(0,s.default)(i)&&(i=h.schema.createNode(i,!0));e.implicitKey=!1,p=!1;var b=h.schema.stringify(i,e,function(){return m=null},function(){return p=!0}),x=" ";if(v||this.comment)x="".concat(v,"\n").concat(e.indent);else if(!o&&i instanceof c.default){("["===b[0]||"{"===b[0])&&!b.includes("\n")||(x="\n".concat(e.indent))}return p&&!m&&n&&n(),(0,u.default)(g+x+b,e.indent,m)}},{key:"commentBefore",get:function(){return this.key&&this.key.commentBefore},set:function(e){null==this.key&&(this.key=new h.default(null)),this.key.commentBefore=e}}]),t}(f.default);t.default=d});unwrapExports(Pair_1);var Collection_1$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isEmptyPath=void 0;var n=interopRequireDefault(toArray),r=interopRequireDefault(classCallCheck),i=interopRequireDefault(createClass),a=interopRequireDefault(possibleConstructorReturn),o=interopRequireDefault(getPrototypeOf),s=interopRequireDefault(assertThisInitialized),u=interopRequireDefault(inherits),l=interopRequireDefault(defineProperty),c=interopRequireDefault(_typeof_1),f=interopRequireDefault(addComment_1),h=interopRequireDefault(Node_1$1),d=interopRequireDefault(Pair_1),p=interopRequireDefault(Scalar_1),g=function(e){return null==e||"object"===(0,c.default)(e)&&e[Symbol.iterator]().next().done};t.isEmptyPath=g;var v=function(e){function t(){var e,n;(0,r.default)(this,t);for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return n=(0,a.default)(this,(e=(0,o.default)(t)).call.apply(e,[this].concat(u))),(0,l.default)((0,s.default)(n),"items",[]),n}return(0,u.default)(t,e),(0,i.default)(t,[{key:"addIn",value:function(e,r){if(g(e))this.add(r);else{var i=(0,n.default)(e),a=i[0],o=i.slice(1),s=this.get(a,!0);if(!(s instanceof t))throw new Error("Expected YAML collection at ".concat(a,". Remaining path: ").concat(o));s.addIn(o,r)}}},{key:"deleteIn",value:function(e){var r=(0,n.default)(e),i=r[0],a=r.slice(1);if(0===a.length)return this.delete(i);var o=this.get(i,!0);if(o instanceof t)return o.deleteIn(a);throw new Error("Expected YAML collection at ".concat(i,". Remaining path: ").concat(a))}},{key:"getIn",value:function(e,r){var i=(0,n.default)(e),a=i[0],o=i.slice(1),s=this.get(a,!0);return 0===o.length?!r&&s instanceof p.default?s.value:s:s instanceof t?s.getIn(o,r):void 0}},{key:"hasAllNullValues",value:function(){return this.items.every(function(e){if(!(e instanceof d.default))return!1;var t=e.value;return null==t||t instanceof p.default&&null==t.value&&!t.commentBefore&&!t.comment&&!t.tag})}},{key:"hasIn",value:function(e){var r=(0,n.default)(e),i=r[0],a=r.slice(1);if(0===a.length)return this.has(i);var o=this.get(i,!0);return o instanceof t&&o.hasIn(a)}},{key:"setIn",value:function(e,r){var i=(0,n.default)(e),a=i[0],o=i.slice(1);if(0===o.length)this.set(a,r);else{var s=this.get(a,!0);if(!(s instanceof t))throw new Error("Expected YAML collection at ".concat(a,". Remaining path: ").concat(o));s.setIn(o,r)}}},{key:"toJSON",value:function(){return null}},{key:"toString",value:function(e,n,r,i){var a=this,o=n.blockItem,s=n.flowChars,u=n.isMap,l=n.itemIndent,c=e,h=c.doc,d=c.indent,p=this.type&&"FLOW"===this.type.substr(0,4)||e.inFlow;p&&(l+="  ");var g=u&&this.hasAllNullValues();e=Object.assign({},e,{allNullValues:g,indent:l,inFlow:p,type:null});var v,m=!1,y=!1,b=this.items.reduce(function(t,n,r){var i;n&&(!m&&n.spaceBefore&&t.push({type:"comment",str:""}),n.commentBefore&&n.commentBefore.match(/^.*$/gm).forEach(function(e){t.push({type:"comment",str:"#".concat(e)})}),n.comment&&(i=n.comment),p&&(!m&&n.spaceBefore||n.commentBefore||n.comment||n.key&&(n.key.commentBefore||n.key.comment)||n.value&&(n.value.commentBefore||n.value.comment))&&(y=!0)),m=!1;var o=h.schema.stringify(n,e,function(){return i=null},function(){return m=!0});return p&&!y&&o.includes("\n")&&(y=!0),p&&r<a.items.length-1&&(o+=","),o=(0,f.default)(o,l,i),m&&(i||p)&&(m=!1),t.push({type:"item",str:o}),t},[]);if(0===b.length)v=s.start+s.end;else if(p){var x=s.start,w=s.end,E=b.map(function(e){return e.str});if(y||E.reduce(function(e,t){return e+t.length+2},2)>t.maxFlowStringSingleLineLength){v=x;var T=!0,_=!1,C=void 0;try{for(var D,S=E[Symbol.iterator]();!(T=(D=S.next()).done);T=!0){var A=D.value;v+=A?"\n  ".concat(d).concat(A):"\n"}}catch(e){_=!0,C=e}finally{try{T||null==S.return||S.return()}finally{if(_)throw C}}v+="\n".concat(d).concat(w)}else v="".concat(x," ").concat(E.join(" ")," ").concat(w)}else{var k=b.map(o);v=k.shift();var R=!0,O=!1,M=void 0;try{for(var L,N=k[Symbol.iterator]();!(R=(L=N.next()).done);R=!0){var P=L.value;v+=P?"\n".concat(d).concat(P):"\n"}}catch(e){O=!0,M=e}finally{try{R||null==N.return||N.return()}finally{if(O)throw M}}}return this.comment?(v+="\n"+this.comment.replace(/^/gm,"".concat(d,"#")),r&&r()):m&&i&&i(),v}}]),t}(h.default);t.default=v,(0,l.default)(v,"maxFlowStringSingleLineLength",60)});unwrapExports(Collection_1$1);var Collection_2$1=Collection_1$1.isEmptyPath,Alias_1$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(possibleConstructorReturn),i=interopRequireDefault(getPrototypeOf),a=interopRequireDefault(createClass),o=interopRequireDefault(inherits),s=interopRequireDefault(defineProperty),u=interopRequireDefault(toJSON_1),l=interopRequireDefault(Collection_1$1),c=interopRequireDefault(Node_1$1),f=interopRequireDefault(Pair_1),h=function e(t,n){if(t instanceof d){var r=n.find(function(e){return e.node===t.source});return r.count*r.aliasCount}if(t instanceof l.default){var i=0,a=!0,o=!1,s=void 0;try{for(var u,c=t.items[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=e(u.value,n);h>i&&(i=h)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}if(t instanceof f.default){var p=e(t.key,n),g=e(t.value,n);return Math.max(p,g)}return 1},d=function(e){function t(e){var a;return(0,n.default)(this,t),(a=(0,r.default)(this,(0,i.default)(t).call(this))).source=e,a.type=constants.Type.ALIAS,a}return(0,o.default)(t,e),(0,a.default)(t,null,[{key:"stringify",value:function(e,t){var n=e.range,r=e.source,i=t.anchors,a=t.doc,o=t.implicitKey,s=t.inStringifyKey,u=Object.keys(i).find(function(e){return i[e]===r});if(!u&&s&&(u=a.anchors.getName(r)||a.anchors.newName()),u)return"*".concat(u).concat(o?" ":"");var l=a.anchors.getName(r)?"Alias node must be after source node":"Source node not found for alias node";throw new Error("".concat(l," [").concat(n,"]"))}}]),(0,a.default)(t,[{key:"toJSON",value:function(e,t){var n=this;if(!t)return(0,u.default)(this.source,e,t);var r=t.anchors,i=t.maxAliasCount,a=r.find(function(e){return e.node===n.source});if(!a||!a.res){var o="This should not happen: Alias anchor was not resolved?";throw this.cstNode?new errors.YAMLReferenceError(this.cstNode,o):new ReferenceError(o)}if(i>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=h(this.source,r)),a.count*a.aliasCount>i)){var s="Excessive alias count indicates a resource exhaustion attack";throw this.cstNode?new errors.YAMLReferenceError(this.cstNode,s):new ReferenceError(s)}return a.res}},{key:"toString",value:function(e){return t.stringify(this,e)}},{key:"tag",set:function(e){throw new Error("Alias nodes cannot have tags")}}]),t}(c.default);t.default=d,(0,s.default)(d,"default",!0)});unwrapExports(Alias_1$1);var _Map=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findPair=f,t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(get),s=interopRequireDefault(inherits),u=interopRequireDefault(Collection_1$1),l=interopRequireDefault(Pair_1),c=interopRequireDefault(Scalar_1);function f(e,t){var n=t instanceof c.default?t.value:t,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u instanceof l.default){if(u.key===t||u.key===n)return u;if(u.key&&u.key.value===n)return u}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}var h=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,r.default)(t,[{key:"add",value:function(e){if(e?e instanceof l.default||(e=new l.default(e.key||e,e.value)):e=new l.default(e),f(this.items,e.key))throw new Error("Key ".concat(e.key," already set"));this.items.push(e)}},{key:"delete",value:function(e){var t=f(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}},{key:"get",value:function(e,t){var n=f(this.items,e),r=n&&n.value;return!t&&r instanceof c.default?r.value:r}},{key:"has",value:function(e){return!!f(this.items,e)}},{key:"set",value:function(e,t){var n=f(this.items,e);n?n.value=t:this.items.push(new l.default(e,t))}},{key:"toJSON",value:function(e,t,n){var r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);var i=!0,a=!1,o=void 0;try{for(var s,u=this.items[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.addToJSMap(t,r)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}},{key:"toString",value:function(e,n,r){if(!e)return JSON.stringify(this);var i=!0,s=!1,u=void 0;try{for(var c,f=this.items[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var h=c.value;if(!(h instanceof l.default))throw new Error("Map items must all be pairs; found ".concat(JSON.stringify(h)," instead"))}}catch(e){s=!0,u=e}finally{try{i||null==f.return||f.return()}finally{if(s)throw u}}return(0,o.default)((0,a.default)(t.prototype),"toString",this).call(this,e,{blockItem:function(e){return e.str},flowChars:{start:"{",end:"}"},isMap:!0,itemIndent:e.indent||""},n,r)}}]),t}(u.default);t.default=h});unwrapExports(_Map);var _Map_1=_Map.findPair,Seq=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(get),s=interopRequireDefault(inherits),u=interopRequireDefault(toJSON_1),l=interopRequireDefault(Collection_1$1),c=interopRequireDefault(Scalar_1);function f(e){var t=e instanceof c.default?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),Number.isInteger(t)&&t>=0?t:null}var h=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(0,a.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,r.default)(t,[{key:"add",value:function(e){this.items.push(e)}},{key:"delete",value:function(e){var t=f(e);return"number"==typeof t&&this.items.splice(t,1).length>0}},{key:"get",value:function(e,t){var n=f(e);if("number"==typeof n){var r=this.items[n];return!t&&r instanceof c.default?r.value:r}}},{key:"has",value:function(e){var t=f(e);return"number"==typeof t&&t<this.items.length}},{key:"set",value:function(e,t){var n=f(e);if("number"!=typeof n)throw new Error("Expected a valid index, not ".concat(e,"."));this.items[n]=t}},{key:"toJSON",value:function(e,t){var n=[];t&&t.onCreate&&t.onCreate(n);var r=0,i=!0,a=!1,o=void 0;try{for(var s,l=this.items[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;n.push((0,u.default)(c,String(r++),t))}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return n}},{key:"toString",value:function(e,n,r){return e?(0,o.default)((0,a.default)(t.prototype),"toString",this).call(this,e,{blockItem:function(e){return"comment"===e.type?e.str:"- ".concat(e.str)},flowChars:{start:"[",end:"]"},isMap:!1,itemIndent:(e.indent||"")+"  "},n,r):JSON.stringify(this)}}]),t}(l.default);t.default=h});unwrapExports(Seq);var Merge_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MERGE_KEY=void 0;var n=interopRequireDefault(slicedToArray),r=interopRequireDefault(classCallCheck),i=interopRequireDefault(createClass),a=interopRequireDefault(possibleConstructorReturn),o=interopRequireDefault(getPrototypeOf),s=interopRequireDefault(get),u=interopRequireDefault(inherits),l=interopRequireDefault(_Map),c=interopRequireDefault(Pair_1),f=interopRequireDefault(Scalar_1),h=interopRequireDefault(Seq),d="<<";t.MERGE_KEY=d;var p=function(e){function t(e){var n;if((0,r.default)(this,t),e instanceof c.default){var i=e.value;i instanceof h.default||((i=new h.default).items.push(e.value),i.range=e.value.range),(n=(0,a.default)(this,(0,o.default)(t).call(this,e.key,i))).range=e.range}else n=(0,a.default)(this,(0,o.default)(t).call(this,new f.default(d),new h.default));return n.type="MERGE_PAIR",(0,a.default)(n)}return(0,u.default)(t,e),(0,i.default)(t,[{key:"addToJSMap",value:function(e,t){var r=!0,i=!1,a=void 0;try{for(var o,s=this.value.items[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value.source;if(!(u instanceof l.default))throw new Error("Merge sources must be maps");var c=u.toJSON(null,e,Map),f=!0,h=!1,d=void 0;try{for(var p,g=c[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var v=(0,n.default)(p.value,2),m=v[0],y=v[1];t instanceof Map?t.has(m)||t.set(m,y):t instanceof Set?t.add(m):t.hasOwnProperty(m)||(t[m]=y)}}catch(e){h=!0,d=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw d}}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}},{key:"toString",value:function(e,n){var r=this.value;if(r.items.length>1)return(0,s.default)((0,o.default)(t.prototype),"toString",this).call(this,e,n);this.value=r.items[0];var i=(0,s.default)((0,o.default)(t.prototype),"toString",this).call(this,e,n);return this.value=r,i}}]),t}(c.default);t.default=p});unwrapExports(Merge_1);var Merge_2=Merge_1.MERGE_KEY,Anchors_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(defineProperty),a=interopRequireDefault(Alias_1$1),o=interopRequireDefault(_Map),s=interopRequireDefault(Merge_1),u=interopRequireDefault(Scalar_1),l=interopRequireDefault(Seq),c=function(){function e(t){(0,n.default)(this,e),(0,i.default)(this,"map",{}),this.prefix=t}return(0,r.default)(e,null,[{key:"validAnchorNode",value:function(e){return e instanceof u.default||e instanceof l.default||e instanceof o.default}}]),(0,r.default)(e,[{key:"createAlias",value:function(e,t){return this.setAnchor(e,t),new a.default(e)}},{key:"createMergePair",value:function(){for(var e=this,t=new s.default,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.value.items=r.map(function(t){if(t instanceof a.default){if(t.source instanceof o.default)return t}else if(t instanceof o.default)return e.createAlias(t);throw new Error("Merge sources must be Map nodes or their Aliases")}),t}},{key:"getName",value:function(e){var t=this.map;return Object.keys(t).find(function(n){return t[n]===e})}},{key:"getNode",value:function(e){return this.map[e]}},{key:"newName",value:function(e){e||(e=this.prefix);for(var t=Object.keys(this.map),n=1;;++n){var r="".concat(e).concat(n);if(!t.includes(r))return r}}},{key:"resolveNodes",value:function(){var e=this.map,t=this._cstAliases;Object.keys(e).forEach(function(t){e[t]=e[t].resolved}),t.forEach(function(e){e.source=e.source.resolved}),delete this._cstAliases}},{key:"setAnchor",value:function(t,n){if(null!=t&&!e.validAnchorNode(t))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(n&&/[\x00-\x19\s,[\]{}]/.test(n))throw new Error("Anchor names must not contain whitespace or control characters");var r=this.map,i=t&&Object.keys(r).find(function(e){return r[e]===t});if(i){if(!n)return i;i!==n&&(delete r[i],r[n]=t)}else{if(!n){if(!t)return null;n=this.newName()}r[n]=t}return n}}]),e}();t.default=c});unwrapExports(Anchors_1);var listTagNames=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(_typeof_1),r=interopRequireDefault(Collection_1$1),i=interopRequireDefault(Pair_1),a=interopRequireDefault(Scalar_1);t.default=function(e){return Object.keys(function e(t,o){if(t&&"object"===(0,n.default)(t)){var s=t.tag;t instanceof r.default?(s&&(o[s]=!0),t.items.forEach(function(t){return e(t,o)})):t instanceof i.default?(e(t.key,o),e(t.value,o)):t instanceof a.default&&s&&(o[s]=!0)}return o}(e,{}))}});unwrapExports(listTagNames);var deprecation=createCommonjsModule(function(e,t){function n(e){commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.emitWarning?commonjsGlobal.process.emitWarning(e,"DeprecationWarning"):console.warn("DeprecationWarning: ".concat(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.warnFileDeprecation=function(e){if(commonjsGlobal&&commonjsGlobal._YAML_SILENCE_DEPRECATION_WARNINGS)return;var t=e.replace(/.*yaml[\/\\]/i,"").replace(/\.js$/,"").replace(/\\/g,"/");n("The endpoint 'yaml/".concat(t,"' will be removed in a future release."))},t.warnOptionDeprecation=function(e,t){if(commonjsGlobal&&commonjsGlobal._YAML_SILENCE_DEPRECATION_WARNINGS)return;if(r[e])return;r[e]=!0;var i="The option '".concat(e,"' will be removed in a future release");n(i+=t?", use '".concat(t,"' instead."):".")};var r={}});unwrapExports(deprecation);var deprecation_1=deprecation.warnFileDeprecation,deprecation_2=deprecation.warnOptionDeprecation,foldFlowLines_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,o){var s=o.indentAtStart,u=o.lineWidth,l=void 0===u?80:u,c=o.minContentWidth,f=void 0===c?20:c,h=o.onFold,d=o.onOverflow;if(!l||l<0)return e;var p=Math.max(1+f,1+l-t.length);if(e.length<=p)return e;var g,v=[],m={},y=l-("number"==typeof s?s:t.length),b=void 0,x=void 0,w=!1,E=-1;a===n&&-1!==(E=i(e,E))&&(y=E+p);for(;g=e[E+=1];){if(a===r&&"\\"===g)switch(e[E+1]){case"x":E+=3;break;case"u":E+=5;break;case"U":E+=9;break;default:E+=1}if("\n"===g)a===n&&(E=i(e,E)),y=E+p,b=void 0;else{if(" "===g&&x&&" "!==x&&"\n"!==x&&"\t"!==x){var T=e[E+1];T&&" "!==T&&"\n"!==T&&"\t"!==T&&(b=E)}if(E>=y)if(b)v.push(b),y=b+p,b=void 0;else if(a===r){for(;" "===x||"\t"===x;)x=g,g=e[E+=1],w=!0;v.push(E-2),m[E-2]=!0,y=E-2+p,b=void 0}else w=!0}x=g}w&&d&&d();if(0===v.length)return e;h&&h();for(var _=e.slice(0,v[0]),C=0;C<v.length;++C){var D=v[C],S=v[C+1]||e.length;a===r&&m[D]&&(_+="".concat(e[D],"\\")),_+="\n".concat(t).concat(e.slice(D+1,S))}return _},t.FOLD_QUOTED=t.FOLD_BLOCK=t.FOLD_FLOW=void 0;t.FOLD_FLOW="flow";var n="block";t.FOLD_BLOCK=n;var r="quoted";t.FOLD_QUOTED=r;var i=function(e,t){for(var n=e[t+1];" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}});unwrapExports(foldFlowLines_1);var foldFlowLines_2=foldFlowLines_1.FOLD_QUOTED,foldFlowLines_3=foldFlowLines_1.FOLD_BLOCK,foldFlowLines_4=foldFlowLines_1.FOLD_FLOW,options=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.strOptions=t.nullOptions=t.boolOptions=t.binaryOptions=void 0;var n={defaultType:constants.Type.BLOCK_LITERAL,lineWidth:76};t.binaryOptions=n;t.boolOptions={trueStr:"true",falseStr:"false"};t.nullOptions={nullStr:"null"};var r={defaultType:constants.Type.PLAIN,doubleQuoted:{jsonEncoding:!1,minMultiLineLength:40},fold:{lineWidth:80,minContentWidth:20}};t.strOptions=r});unwrapExports(options);var options_1=options.strOptions,options_2=options.nullOptions,options_3=options.boolOptions,options_4=options.binaryOptions,stringify=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyNumber=function(e){var t=e.format,n=e.minFractionDigits,r=e.tag,i=e.value;if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";var a=JSON.stringify(i);if(!t&&n&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(a)){var o=a.indexOf(".");o<0&&(o=a.length,a+=".");for(var s=n-(a.length-o-1);s-- >0;)a+="0"}return a},t.stringifyString=function(e,t,o,s){var u=options.strOptions.defaultType,l=t.implicitKey,c=t.inFlow,f=e,h=f.type,d=f.value;"string"!=typeof d&&(d=String(d),e=Object.assign({},e,{value:d}));var p=function(u){switch(u){case constants.Type.BLOCK_FOLDED:case constants.Type.BLOCK_LITERAL:return a(e,t,o,s);case constants.Type.QUOTE_DOUBLE:return r(d,t);case constants.Type.QUOTE_SINGLE:return i(d,t);case constants.Type.PLAIN:return function(e,t,o,s){var u=e.comment,l=e.type,c=e.value,f=t.actualString,h=t.implicitKey,d=t.indent,p=t.inFlow,g=t.tags;if(h&&/[\n[\]{},]/.test(c)||p&&/[[\]{},]/.test(c))return r(c,t);if(!c||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(c))return h||p||-1===c.indexOf("\n")?-1!==c.indexOf('"')&&-1===c.indexOf("'")?i(c,t):r(c,t):a(e,t,o,s);if(!h&&!p&&l!==constants.Type.PLAIN&&-1!==c.indexOf("\n"))return a(e,t,o,s);var v=c.replace(/\n+/g,"$&\n".concat(d));if(f&&/^[\w.+-]+$/.test(v)&&"string"!=typeof g.resolveScalar(v).value)return r(c,t);var m=h?v:(0,n.default)(v,d,n.FOLD_FLOW,options.strOptions.fold);if(u&&!p&&(-1!==m.indexOf("\n")||-1!==u.indexOf("\n")))return o&&o(),(0,addComment_1.addCommentBefore)(m,d,u);return m}(e,t,o,s);default:return null}};h!==constants.Type.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f]/.test(d)?h=constants.Type.QUOTE_DOUBLE:!l&&!c||h!==constants.Type.BLOCK_FOLDED&&h!==constants.Type.BLOCK_LITERAL||(h=constants.Type.QUOTE_DOUBLE);var g=p(h);if(null===g&&null===(g=p(u)))throw new Error("Unsupported default string type ".concat(u));return g};var n=interopRequireWildcard(foldFlowLines_1);function r(e,t){var r=t.implicitKey,i=t.indent,a=options.strOptions.doubleQuoted,o=a.jsonEncoding,s=a.minMultiLineLength,u=JSON.stringify(e);if(o)return u;for(var l="",c=0,f=0,h=u[f];h;h=u[++f])if(" "===h&&"\\"===u[f+1]&&"n"===u[f+2]&&(l+=u.slice(c,f)+"\\ ",c=f+=1,h="\\"),"\\"===h)switch(u[f+1]){case"u":l+=u.slice(c,f);var d=u.substr(f+2,4);switch(d){case"0000":l+="\\0";break;case"0007":l+="\\a";break;case"000b":l+="\\v";break;case"001b":l+="\\e";break;case"0085":l+="\\N";break;case"00a0":l+="\\_";break;case"2028":l+="\\L";break;case"2029":l+="\\P";break;default:"00"===d.substr(0,2)?l+="\\x"+d.substr(2):l+=u.substr(f,6)}c=(f+=5)+1;break;case"n":if(r||'"'===u[f+2]||u.length<s)f+=1;else{for(l+=u.slice(c,f)+"\n\n";"\\"===u[f+2]&&"n"===u[f+3]&&'"'!==u[f+4];)l+="\n",f+=2;l+=i," "===u[f+2]&&(l+="\\"),c=(f+=1)+1}break;default:f+=1}return l=c?l+u.slice(c):u,r?l:(0,n.default)(l,i,n.FOLD_QUOTED,options.strOptions.fold)}function i(e,t){var i=t.indent,a=t.implicitKey;if(a){if(/\n/.test(e))return r(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return r(e,t);var o="'"+e.replace(/'/g,"''").replace(/\n+/g,"$&\n".concat(i))+"'";return a?o:(0,n.default)(o,i,n.FOLD_FLOW,options.strOptions.fold)}function a(e,t,i,a){var o=e.comment,s=e.type,u=e.value;if(/\n[\t ]+$/.test(u)||/^\s*$/.test(u))return r(u,t);var l=t.indent||(t.forceBlockIndent?" ":""),c=l?"2":"1",f=s!==constants.Type.BLOCK_FOLDED&&(s===constants.Type.BLOCK_LITERAL||!function(e,t){var n=e.length;if(n<=t)return!1;for(var r=0,i=0;r<n;++r)if("\n"===e[r]){if(r-i>t)return!0;if(n-(i=r+1)<=t)return!1}return!0}(u,options.strOptions.fold.lineWidth-l.length)),h=f?"|":">";if(!u)return h+"\n";var d="",p="";if(u=u.replace(/[\n\t ]*$/,function(e){var t=e.indexOf("\n");return-1===t?h+="-":u!==e&&t===e.length-1||(h+="+",a&&a()),p=e.replace(/\n$/,""),""}).replace(/^[\n ]*/,function(e){-1!==e.indexOf(" ")&&(h+=c);var t=e.match(/ +$/);return t?(d=e.slice(0,-t[0].length),t[0]):(d=e,"")}),p&&(p=p.replace(/\n+(?!\n|$)/g,"$&".concat(l))),d&&(d=d.replace(/\n+/g,"$&".concat(l))),o&&(h+=" #"+o.replace(/ ?[\r\n]+/g," "),i&&i()),!u)return"".concat(h).concat(c,"\n").concat(l).concat(p);if(f)return u=u.replace(/\n+/g,"$&".concat(l)),"".concat(h,"\n").concat(l).concat(d).concat(u).concat(p);u=u.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,"$&".concat(l));var g=(0,n.default)("".concat(d).concat(u).concat(p),l,n.FOLD_BLOCK,options.strOptions.fold);return"".concat(h,"\n").concat(l).concat(g)}});unwrapExports(stringify);var stringify_1=stringify.stringifyNumber,stringify_2=stringify.stringifyString,parseUtils=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkKeyLength=function(e,t,n,r,i){if(!r||"number"!=typeof i)return;var a=t.items[n],o=a&&a.range&&a.range.start;if(!o)for(var s=n-1;s>=0;--s){var u=t.items[s];if(u&&u.range){o=u.range.end+2*(n-s);break}}if(o>i+1024){var l=String(r).substr(0,8)+"..."+String(r).substr(-8);e.push(new errors.YAMLSemanticError(t,'The "'.concat(l,'" key is too long')))}},t.resolveComments=function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.afterKey,l=s.before,c=s.comment,f=e.items[l];f?(u&&f.value&&(f=f.value),void 0===c?!u&&f.commentBefore||(f.spaceBefore=!0):f.commentBefore?f.commentBefore+="\n"+c:f.commentBefore=c):void 0!==c&&(e.comment?e.comment+="\n"+c:e.comment=c)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}});unwrapExports(parseUtils);var parseUtils_1=parseUtils.checkKeyLength,parseUtils_2=parseUtils.resolveComments,parseMap_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.type!==constants.Type.MAP&&t.type!==constants.Type.FLOW_MAP){var s="A ".concat(t.type," node cannot be resolved as a mapping");return e.errors.push(new errors.YAMLSyntaxError(t,s)),null}var l=t.type===constants.Type.FLOW_MAP?function(e,t){for(var n=[],r=[],i=void 0,o=null,s=!1,u="{",l=0;l<t.items.length;++l){(0,parseUtils.checkKeyLength)(e.errors,t,l,i,o);var c=t.items[l];if("string"==typeof c.char){var f=c.char;if("?"===f&&void 0===i&&!s){s=!0,u=":";continue}if(":"===f){if(void 0===i&&(i=null),":"===u){u=",";continue}}else if(s&&(void 0===i&&","!==f&&(i=null),s=!1),void 0!==i&&(r.push(new a.default(i)),i=void 0,o=null,","===f)){u=":";continue}if("}"===f){if(l===t.items.length-1)continue}else if(f===u){u=":";continue}e.errors.push(new errors.YAMLSyntaxError(t,"Flow map contains an unexpected ".concat(f)))}else c.type===constants.Type.BLANK_LINE?n.push({afterKey:!!i,before:r.length}):c.type===constants.Type.COMMENT?n.push({afterKey:!!i,before:r.length,comment:c.comment}):void 0===i?(","===u&&e.errors.push(new errors.YAMLSemanticError(c,"Separator , missing in flow map")),i=e.resolveNode(c),o=s?null:c.range.start):(","!==u&&e.errors.push(new errors.YAMLSemanticError(c,"Indicator : missing in flow map entry")),r.push(new a.default(i,e.resolveNode(c))),i=void 0,s=!1)}"}"!==t.items[t.items.length-1].char&&e.errors.push(new errors.YAMLSemanticError(t,"Expected flow map to end with }"));void 0!==i&&r.push(new a.default(i));return{comments:n,items:r}}(e,t):function(e,t){for(var r=[],i=[],o=void 0,s=null,l=0;l<t.items.length;++l){var c=t.items[l];switch(c.type){case constants.Type.BLANK_LINE:r.push({afterKey:!!o,before:i.length});break;case constants.Type.COMMENT:r.push({afterKey:!!o,before:i.length,comment:c.comment});break;case constants.Type.MAP_KEY:void 0!==o&&i.push(new a.default(o)),c.error&&e.errors.push(c.error),o=e.resolveNode(c.node),s=null;break;case constants.Type.MAP_VALUE:if(void 0===o&&(o=null),c.error&&e.errors.push(c.error),!c.context.atLineStart&&c.node&&c.node.type===constants.Type.MAP&&!c.node.context.atLineStart){e.errors.push(new errors.YAMLSemanticError(c.node,"Nested mappings are not allowed in compact mappings"))}var f=c.node;if(!f&&c.props.length>0){(f=new n.default(constants.Type.PLAIN,[])).context={parent:c,src:c.context.src};var h=c.range.start+1;if(f.range={start:h,end:h},f.valueRange={start:h,end:h},"number"==typeof c.range.origStart){var d=c.range.origStart+1;f.range.origStart=f.range.origEnd=d,f.valueRange.origStart=f.valueRange.origEnd=d}}var p=new a.default(o,e.resolveNode(f));u(c,p),i.push(p),(0,parseUtils.checkKeyLength)(e.errors,t,l,o,s),o=void 0,s=null;break;default:void 0!==o&&i.push(new a.default(o)),o=e.resolveNode(c),s=c.range.start,c.error&&e.errors.push(c.error);e:for(var g=l+1;;++g){var v=t.items[g];switch(v&&v.type){case constants.Type.BLANK_LINE:case constants.Type.COMMENT:continue e;case constants.Type.MAP_VALUE:break e;default:e.errors.push(new errors.YAMLSemanticError(c,"Implicit map keys need to be followed by map values"));break e}}if(c.valueRangeContainsNewline){e.errors.push(new errors.YAMLSemanticError(c,"Implicit map keys need to be on a single line"))}}}void 0!==o&&i.push(new a.default(o));return{comments:r,items:i}}(e,t),c=l.comments,f=l.items,h=new r.default;h.items=f,(0,parseUtils.resolveComments)(h,c);for(var d=0;d<f.length;++d){var p=f[d].key;if(e.schema.merge&&p&&p.value===i.MERGE_KEY){f[d]=new i.default(f[d]);var g=f[d].value.items,v=null;g.some(function(e){if(e instanceof o.default){var t=e.source.type;return t!==constants.Type.MAP&&t!==constants.Type.FLOW_MAP&&(v="Merge nodes aliases can only point to maps")}return v="Merge nodes can only have Alias nodes as values"}),v&&e.errors.push(new errors.YAMLSemanticError(t,v))}else for(var m=d+1;m<f.length;++m){var y=f[m].key;if(p===y||p&&y&&p.hasOwnProperty("value")&&p.value===y.value){var b='Map keys must be unique; "'.concat(p,'" is repeated');e.errors.push(new errors.YAMLSemanticError(t,b));break}}}return t.resolved=h,h};var n=interopRequireDefault(PlainValue_1),r=interopRequireDefault(_Map),i=interopRequireWildcard(Merge_1),a=interopRequireDefault(Pair_1),o=interopRequireDefault(Alias_1$1);var s=function(e){var t=e.context,n=t.lineStart,r=t.node,i=t.src,a=e.props;if(0===a.length)return!1;var o=a[0].start;if(r&&o>r.valueRange.start)return!1;if(i[o]!==constants.Char.COMMENT)return!1;for(var s=n;s<o;++s)if("\n"===i[s])return!1;return!0};function u(e,t){if(s(e)){var n=e.getPropValue(0,constants.Char.COMMENT,!0),r=!1,i=t.value.commentBefore;if(i&&i.startsWith(n))t.value.commentBefore=i.substr(n.length+1),r=!0;else{var a=t.value.comment;!e.node&&a&&a.startsWith(n)&&(t.value.comment=a.substr(n.length+1),r=!0)}r&&(t.comment=n)}}});unwrapExports(parseMap_1);var map=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(_typeof_1),r=interopRequireDefault(slicedToArray),i=interopRequireDefault(_Map),a=interopRequireDefault(parseMap_1);var o={createNode:function(e,t,a){var o=new i.default;if(t instanceof Map){var s=!0,u=!1,l=void 0;try{for(var c,f=t[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var h=(0,r.default)(c.value,2),d=h[0],p=h[1];o.items.push(e.createPair(d,p,a))}}catch(e){u=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}else if(t&&"object"===(0,n.default)(t))for(var g=0,v=Object.keys(t);g<v.length;g++)d=v[g],o.items.push(e.createPair(d,t[d],a));return o},default:!0,nodeClass:i.default,tag:"tag:yaml.org,2002:map",resolve:a.default};t.default=o});unwrapExports(map);var parseSeq_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.type!==constants.Type.SEQ&&t.type!==constants.Type.FLOW_SEQ){var i="A ".concat(t.type," node cannot be resolved as a sequence");return e.errors.push(new errors.YAMLSyntaxError(t,i)),null}var a=t.type===constants.Type.FLOW_SEQ?function(e,t){for(var r=[],i=[],a=!1,o=void 0,s=null,u="[",l=0;l<t.items.length;++l){var c=t.items[l];if("string"==typeof c.char){var f=c.char;if(":"===f||!a&&void 0===o||(a&&void 0===o&&(o=u?i.pop():null),i.push(new n.default(o)),a=!1,o=void 0,s=null),f===u)u=null;else if(u||"?"!==f){if("["!==u&&":"===f&&void 0===o){if(","===u){if((o=i.pop())instanceof n.default){e.errors.push(new errors.YAMLSemanticError(f,"Chaining flow sequence pairs is invalid (e.g. [ a : b : c ])"))}a||(0,parseUtils.checkKeyLength)(e.errors,t,l,o,s)}else o=null;s=null,a=!1,u=null}else if("["===u||"]"!==f||l<t.items.length-1){var h="Flow sequence contains an unexpected ".concat(f);e.errors.push(new errors.YAMLSyntaxError(t,h))}}else a=!0}else if(c.type===constants.Type.BLANK_LINE)r.push({before:i.length});else if(c.type===constants.Type.COMMENT)r.push({comment:c.comment,before:i.length});else{if(u){var d="Expected a ".concat(u," here in flow sequence");e.errors.push(new errors.YAMLSemanticError(c,d))}var p=e.resolveNode(c);void 0===o?i.push(p):(i.push(new n.default(o,p)),o=void 0),s=c.range.start,u=","}}"]"!==t.items[t.items.length-1].char&&e.errors.push(new errors.YAMLSemanticError(t,"Expected flow sequence to end with ]"));void 0!==o&&i.push(new n.default(o));return{comments:r,items:i}}(e,t):function(e,t){for(var n=[],r=[],i=0;i<t.items.length;++i){var a=t.items[i];switch(a.type){case constants.Type.BLANK_LINE:n.push({before:r.length});break;case constants.Type.COMMENT:n.push({comment:a.comment,before:r.length});break;case constants.Type.SEQ_ITEM:if(a.error&&e.errors.push(a.error),r.push(e.resolveNode(a.node)),a.hasProps){e.errors.push(new errors.YAMLSemanticError(a,"Sequence items cannot have tags or anchors before the - indicator"))}break;default:a.error&&e.errors.push(a.error),e.errors.push(new errors.YAMLSyntaxError(a,"Unexpected ".concat(a.type," node in sequence")))}}return{comments:n,items:r}}(e,t),o=a.comments,s=a.items,u=new r.default;return u.items=s,(0,parseUtils.resolveComments)(u,o),t.resolved=u,u};var n=interopRequireDefault(Pair_1),r=interopRequireDefault(Seq)});unwrapExports(parseSeq_1);var seq=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(parseSeq_1),r=interopRequireDefault(Seq);var i={createNode:function(e,t,n){var i=new r.default;if(t&&t[Symbol.iterator]){var a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,f=e.createNode(c,n.wrapScalars,null,n);i.items.push(f)}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}return i},default:!0,nodeClass:r.default,tag:"tag:yaml.org,2002:seq",resolve:n.default};t.default=i});unwrapExports(seq);var string=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.resolveString=void 0;var n=function(e,t){var n=t.strValue;return n?"string"==typeof n?n:(n.errors.forEach(function(n){n.source||(n.source=t),e.errors.push(n)}),n.str):""};t.resolveString=n;var r={identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:n,stringify:function(e,t,n,r){return t=Object.assign({actualString:!0},t),(0,stringify.stringifyString)(e,t,n,r)},options:options.strOptions};t.default=r});unwrapExports(string);var string_1=string.resolveString,failsafe=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(map),r=interopRequireDefault(seq),i=interopRequireDefault(string),a=[n.default,r.default,i.default];t.default=a});unwrapExports(failsafe);var core=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(Scalar_1),r=interopRequireDefault(failsafe).default.concat([{identify:function(e){return null==e},createNode:function(e,t,r){return r.wrapScalars?new n.default(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:options.nullOptions,stringify:function(){return options.nullOptions.nullStr}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:function(e){return"t"===e[0]||"T"===e[0]},options:options.boolOptions,stringify:function(e){return e.value?options.boolOptions.trueStr:options.boolOptions.falseStr}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o([0-7]+)$/,resolve:function(e,t){return parseInt(t,8)},stringify:function(e){return"0o"+e.value.toString(8)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:function(e){return parseInt(e,10)},stringify:stringify.stringifyNumber},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F]+)$/,resolve:function(e,t){return parseInt(t,16)},stringify:function(e){return"0x"+e.value.toString(16)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:stringify.stringifyNumber},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:0|[1-9][0-9]*)(\.[0-9]*)?[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e)},stringify:function(e){var t=e.value;return Number(t).toExponential()}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:0|[1-9][0-9]*)\.([0-9]*)$/,resolve:function(e,t){var r=new n.default(parseFloat(e));return t&&"0"===t[t.length-1]&&(r.minFractionDigits=t.length),r},stringify:stringify.stringifyNumber}]);t.default=r});unwrapExports(core);var json=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(map),r=interopRequireDefault(seq),i=interopRequireDefault(Scalar_1),a=[n.default,r.default,{identify:function(e){return"string"==typeof e},default:!0,tag:"tag:yaml.org,2002:str",resolve:string.resolveString,stringify:function(e){return JSON.stringify(e)}},{identify:function(e){return null==e},createNode:function(e,t,n){return n.wrapScalars?new i.default(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:function(){return null},stringify:function(e){return JSON.stringify(e)}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$/,resolve:function(){return!0},stringify:function(e){return JSON.stringify(e)}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^false$/,resolve:function(){return!1},stringify:function(e){return JSON.stringify(e)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:function(e){return parseInt(e,10)},stringify:function(e){return JSON.stringify(e)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:function(e){return parseFloat(e)},stringify:function(e){return JSON.stringify(e)}}];a.scalarFallback=function(e){throw new SyntaxError("Unresolved plain scalar ".concat(JSON.stringify(e)))};var o=a;t.default=o});unwrapExports(json);var binary=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={identify:function(e){return e instanceof Uint8Array},default:!1,tag:"tag:yaml.org,2002:binary",resolve:function(e,t){if("function"==typeof Buffer){var n=(0,string.resolveString)(e,t);return Buffer.from(n,"base64")}if("function"==typeof atob){for(var r=atob((0,string.resolveString)(e,t)),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}return e.errors.push(new errors.YAMLReferenceError(t,"This environment does not support reading binary tags; either Buffer or atob is required")),null},options:options.binaryOptions,stringify:function(e,t,n,r){var i,a=e.comment,o=e.type,s=e.value;if("function"==typeof Buffer)i=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");for(var u="",l=0;l<s.length;++l)u+=String.fromCharCode(s[l]);i=btoa(u)}if(o||(o=options.binaryOptions.defaultType),o===constants.Type.QUOTE_DOUBLE)s=i;else{for(var c=options.binaryOptions.lineWidth,f=Math.ceil(i.length/c),h=new Array(f),d=0,p=0;d<f;++d,p+=c)h[d]=i.substr(p,c);s=h.join(o===constants.Type.BLOCK_LITERAL?"\n":" ")}return(0,stringify.stringifyString)({comment:a,type:o,value:s},t,n,r)}};t.default=n});unwrapExports(binary);var pairs=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePairs=o,t.createPairs=s,t.default=void 0;var n=interopRequireDefault(_Map),r=interopRequireDefault(Pair_1),i=interopRequireDefault(parseSeq_1),a=interopRequireDefault(Seq);function o(e,t){for(var a=(0,i.default)(e,t),o=0;o<a.items.length;++o){var s=a.items[o];if(!(s instanceof r.default)){if(s instanceof n.default){if(s.items.length>1){throw new errors.YAMLSemanticError(t,"Each pair must have its own sequence indicator")}var u=s.items[0]||new r.default;s.commentBefore&&(u.commentBefore=u.commentBefore?"".concat(s.commentBefore,"\n").concat(u.commentBefore):s.commentBefore),s.comment&&(u.comment=u.comment?"".concat(s.comment,"\n").concat(u.comment):s.comment),s=u}a.items[o]=s instanceof r.default?s:new r.default(s)}}return a}function s(e,t,n){var r=new a.default;r.tag="tag:yaml.org,2002:pairs";var i=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value,f=void 0,h=void 0;if(Array.isArray(c)){if(2!==c.length)throw new TypeError("Expected [key, value] tuple: ".concat(c));f=c[0],h=c[1]}else if(c&&c instanceof Object){var d=Object.keys(c);if(1!==d.length)throw new TypeError("Expected { key: value } tuple: ".concat(c));h=c[f=d[0]]}else f=c;var p=e.createPair(f,h,n);r.items.push(p)}}catch(e){o=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return r}var u={default:!1,tag:"tag:yaml.org,2002:pairs",resolve:o,createNode:s};t.default=u});unwrapExports(pairs);var pairs_1=pairs.parsePairs,pairs_2=pairs.createPairs,omap=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.YAMLOMap=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(createClass),i=interopRequireDefault(possibleConstructorReturn),a=interopRequireDefault(getPrototypeOf),o=interopRequireDefault(assertThisInitialized),s=interopRequireDefault(inherits),u=interopRequireDefault(defineProperty),l=interopRequireDefault(toJSON_1),c=interopRequireDefault(_Map),f=interopRequireDefault(Pair_1),h=interopRequireDefault(Scalar_1),d=function(e){function t(){var e;return(0,n.default)(this,t),e=(0,i.default)(this,(0,a.default)(t).call(this)),(0,u.default)((0,o.default)(e),"add",c.default.prototype.add.bind((0,o.default)(e))),(0,u.default)((0,o.default)(e),"delete",c.default.prototype.delete.bind((0,o.default)(e))),(0,u.default)((0,o.default)(e),"get",c.default.prototype.get.bind((0,o.default)(e))),(0,u.default)((0,o.default)(e),"has",c.default.prototype.has.bind((0,o.default)(e))),(0,u.default)((0,o.default)(e),"set",c.default.prototype.set.bind((0,o.default)(e))),e.tag=t.tag,e}return(0,s.default)(t,e),(0,r.default)(t,[{key:"toJSON",value:function(e,t){var n=new Map;t&&t.onCreate&&t.onCreate(n);var r=!0,i=!1,a=void 0;try{for(var o,s=this.items[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=void 0,h=void 0;if(u instanceof f.default?(c=(0,l.default)(u.key,"",t),h=(0,l.default)(u.value,c,t)):c=(0,l.default)(u,"",t),n.has(c))throw new Error("Ordered maps must not include duplicate keys");n.set(c,h)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}]),t}(interopRequireDefault(Seq).default);t.YAMLOMap=d,(0,u.default)(d,"tag","tag:yaml.org,2002:omap");var p={identify:function(e){return e instanceof Map},nodeClass:d,default:!1,tag:"tag:yaml.org,2002:omap",resolve:function(e,t){var n=(0,pairs.parsePairs)(e,t),r=[],i=!0,a=!1,o=void 0;try{for(var s,u=n.items[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value.key;if(l instanceof h.default){if(r.includes(l.value))throw new errors.YAMLSemanticError(t,"Ordered maps must not include duplicate keys");r.push(l.value)}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return Object.assign(new d,n)},createNode:function(e,t,n){var r=(0,pairs.createPairs)(e,t,n),i=new d;return i.items=r.items,i}};t.default=p});unwrapExports(omap);var omap_1=omap.YAMLOMap,set=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.YAMLSet=void 0;var n=interopRequireDefault(_typeof_1),r=interopRequireDefault(classCallCheck),i=interopRequireDefault(createClass),a=interopRequireDefault(possibleConstructorReturn),o=interopRequireDefault(getPrototypeOf),s=interopRequireDefault(get),u=interopRequireDefault(inherits),l=interopRequireDefault(defineProperty),c=interopRequireWildcard(_Map),f=interopRequireDefault(Pair_1),h=interopRequireDefault(parseMap_1),d=interopRequireDefault(Scalar_1),p=function(e){function t(){var e;return(0,r.default)(this,t),(e=(0,a.default)(this,(0,o.default)(t).call(this))).tag=t.tag,e}return(0,u.default)(t,e),(0,i.default)(t,[{key:"add",value:function(e){var t=e instanceof f.default?e:new f.default(e);(0,c.findPair)(this.items,t.key)||this.items.push(t)}},{key:"get",value:function(e,t){var n=(0,c.findPair)(this.items,e);return!t&&n instanceof f.default?n.key instanceof d.default?n.key.value:n.key:n}},{key:"set",value:function(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not ".concat((0,n.default)(t)));var r=(0,c.findPair)(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new f.default(e))}},{key:"toJSON",value:function(e,n){return(0,s.default)((0,o.default)(t.prototype),"toJSON",this).call(this,e,n,Set)}},{key:"toString",value:function(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues())return(0,s.default)((0,o.default)(t.prototype),"toString",this).call(this,e,n,r);throw new Error("Set items must all have null values")}}]),t}(c.default);t.YAMLSet=p,(0,l.default)(p,"tag","tag:yaml.org,2002:set");var g={identify:function(e){return e instanceof Set},nodeClass:p,default:!1,tag:"tag:yaml.org,2002:set",resolve:function(e,t){var n=(0,h.default)(e,t);if(!n.hasAllNullValues())throw new errors.YAMLSemanticError(t,"Set items must all have null values");return Object.assign(new p,n)},createNode:function(e,t,n){var r=new p,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r.items.push(e.createPair(l,null,n))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}};t.default=g});unwrapExports(set);var set_1=set.YAMLSet,timestamp_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.timestamp=t.floatTime=t.intTime=void 0;var n=function(e,t){var n=t.split(":").reduce(function(e,t){return 60*e+Number(t)},0);return"-"===e?-n:n},r=function(e){var t=e.value;if(isNaN(t)||!isFinite(t))return(0,stringify.stringifyNumber)(t);var n="";t<0&&(n="-",t=Math.abs(t));var r=[t%60];return t<60?r.unshift(0):(t=Math.round((t-r[0])/60),r.unshift(t%60),t>=60&&(t=Math.round((t-r[0])/60),r.unshift(t))),n+r.map(function(e){return e<10?"0"+String(e):String(e)}).join(":").replace(/000000\d*$/,"")},i={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+)$/,resolve:function(e,t,r){return n(t,r.replace(/_/g,""))},stringify:r};t.intTime=i;var a={identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^([-+]?)([0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*)$/,resolve:function(e,t,r){return n(t,r.replace(/_/g,""))},stringify:r};t.floatTime=a;var o={identify:function(e){return e instanceof Date},default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^(?:([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?)$"),resolve:function(e,t,r,i,a,o,s,u,l){u&&(u=(u+"00").substr(1,3));var c=Date.UTC(t,r-1,i,a||0,o||0,s||0,u||0);if(l&&"Z"!==l){var f=n(l[0],l.slice(1));Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:function(e){return e.value.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")}};t.timestamp=o});unwrapExports(timestamp_1);var timestamp_2=timestamp_1.timestamp,timestamp_3=timestamp_1.floatTime,timestamp_4=timestamp_1.intTime,yaml1_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(Scalar_1),r=interopRequireDefault(failsafe),i=interopRequireDefault(binary),a=interopRequireDefault(omap),o=interopRequireDefault(pairs),s=interopRequireDefault(set),u=r.default.concat([{identify:function(e){return null==e},createNode:function(e,t,r){return r.wrapScalars?new n.default(null):null},default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:function(){return null},options:options.nullOptions,stringify:function(){return options.nullOptions.nullStr}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:function(){return!0},options:options.boolOptions,stringify:function(e){return e.value?options.boolOptions.trueStr:options.boolOptions.falseStr}},{identify:function(e){return"boolean"==typeof e},default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:function(){return!1},options:options.boolOptions,stringify:function(e){return e.value?options.boolOptions.trueStr:options.boolOptions.falseStr}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^0b([0-1_]+)$/,resolve:function(e,t){return parseInt(t.replace(/_/g,""),2)},stringify:function(e){return"0b"+e.value.toString(2)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0([0-7_]+)$/,resolve:function(e,t){return parseInt(t.replace(/_/g,""),8)},stringify:function(e){var t=e.value;return(t<0?"-0":"0")+t.toString(8)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:function(e){return parseInt(e.replace(/_/g,""),10)},stringify:stringify.stringifyNumber},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x([0-9a-fA-F_]+)$/,resolve:function(e,t){return parseInt(t.replace(/_/g,""),16)},stringify:function(e){var t=e.value;return(t<0?"-0x":"0x")+t.toString(16)}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.inf|(\.nan))$/i,resolve:function(e,t){return t?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY},stringify:stringify.stringifyNumber},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?([0-9][0-9_]*)?(\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:function(e){return parseFloat(e.replace(/_/g,""))},stringify:function(e){var t=e.value;return Number(t).toExponential()}},{identify:function(e){return"number"==typeof e},default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.([0-9_]*)$/,resolve:function(e,t){var r=new n.default(parseFloat(e.replace(/_/g,"")));if(t){var i=t.replace(/_/g,"");"0"===i[i.length-1]&&(r.minFractionDigits=i.length)}return r},stringify:stringify.stringifyNumber}],i.default,a.default,o.default,s.default,timestamp_1.intTime,timestamp_1.floatTime,timestamp_1.timestamp);t.default=u});unwrapExports(yaml1_1);var tags_1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.tags=t.schemas=void 0;var n=interopRequireDefault(core),r=interopRequireDefault(failsafe),i=interopRequireDefault(json),a=interopRequireDefault(yaml1_1),o=interopRequireDefault(map),s=interopRequireDefault(seq),u=interopRequireDefault(binary),l=interopRequireDefault(omap),c=interopRequireDefault(pairs),f=interopRequireDefault(set),h={core:n.default,failsafe:r.default,json:i.default,yaml11:a.default};t.schemas=h;var d={binary:u.default,floatTime:timestamp_1.floatTime,intTime:timestamp_1.intTime,map:o.default,omap:l.default,pairs:c.default,seq:s.default,set:f.default,timestamp:timestamp_1.timestamp};t.tags=d});unwrapExports(tags_1);var tags_2=tags_1.tags,tags_3=tags_1.schemas,schema=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(_typeof_1),r=interopRequireDefault(classCallCheck),i=interopRequireDefault(createClass),a=interopRequireDefault(defineProperty),o=interopRequireDefault(Alias_1$1),s=interopRequireDefault(Collection_1$1),u=interopRequireDefault(Node_1$1),l=interopRequireDefault(Pair_1),c=interopRequireDefault(Scalar_1),f=function(){function e(t){var n=t.customTags,i=t.merge,a=t.schema,o=t.tags;if((0,r.default)(this,e),this.merge=!!i,this.name=a,this.tags=tags_1.schemas[a.replace(/\W/g,"")],!this.tags){var s=Object.keys(tags_1.schemas).map(function(e){return JSON.stringify(e)}).join(", ");throw new Error('Unknown schema "'.concat(a,'"; use one of ').concat(s))}if(!n&&o&&(n=o,(0,deprecation.warnOptionDeprecation)("tags","customTags")),Array.isArray(n)){var u=!0,l=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;this.tags=this.tags.concat(d)}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}}else"function"==typeof n&&(this.tags=n(this.tags.slice()));for(var p=0;p<this.tags.length;++p){var g=this.tags[p];if("string"==typeof g){var v=tags_1.tags[g];if(!v){var m=Object.keys(tags_1.tags).map(function(e){return JSON.stringify(e)}).join(", ");throw new Error('Unknown custom tag "'.concat(g,'"; use one of ').concat(m))}this.tags[p]=v}}}return(0,i.default)(e,[{key:"createNode",value:function(t,r,i,a){var s;if(i){i.startsWith("!!")&&(i=e.defaultPrefix+i.slice(2));var u=this.tags.filter(function(e){return e.tag===i});if(!(s=u.find(function(e){return!e.format})||u[0]))throw new Error("Tag ".concat(i," not found"))}else if(!(s=this.tags.find(function(e){return(e.identify&&e.identify(t)||e.class&&t instanceof e.class)&&!e.format}))){if("function"==typeof t.toJSON&&(t=t.toJSON()),"object"!==(0,n.default)(t))return r?new c.default(t):t;s=t instanceof Map?tags_1.tags.map:t[Symbol.iterator]?tags_1.tags.seq:tags_1.tags.map}a?a.wrapScalars=r:a={wrapScalars:r},a.onTagObj&&(a.onTagObj(s),delete a.onTagObj);var l={};if(t&&"object"===(0,n.default)(t)&&a.prevObjects){var f=a.prevObjects.find(function(e){return e.value===t});if(f){var h=new o.default(f);return a.aliasNodes.push(h),h}l.value=t,a.prevObjects.push(l)}return l.node=s.createNode?s.createNode(this,t,a):r?new c.default(t):t,l.node}},{key:"createPair",value:function(e,t,n){var r=this.createNode(e,n.wrapScalars,null,n),i=this.createNode(t,n.wrapScalars,null,n);return new l.default(r,i)}},{key:"resolveScalar",value:function(e,t){t||(t=this.tags);for(var n=0;n<t.length;++n){var r=t[n],i=r.format,a=r.test,o=r.resolve;if(a){var s=e.match(a);if(s){var u=o.apply(null,s);return u instanceof c.default||(u=new c.default(u)),i&&(u.format=i),u}}}return this.tags.scalarFallback&&(e=this.tags.scalarFallback(e)),new c.default(e)}},{key:"resolveNode",value:function(e,t,n){var r=this.tags.filter(function(e){return e.tag===n}),i=r.find(function(e){return!e.test});t.error&&e.errors.push(t.error);try{if(i){var a=i.resolve(e,t);a instanceof s.default||(a=new c.default(a)),t.resolved=a}else{var o=(0,string.resolveString)(e,t);"string"==typeof o&&r.length>0&&(t.resolved=this.resolveScalar(o,r))}}catch(n){n.source||(n.source=t),e.errors.push(n),t.resolved=null}return t.resolved?(n&&t.tag&&(t.resolved.tag=n),t.resolved):null}},{key:"resolveNodeWithFallback",value:function(t,n,r){var i=this.resolveNode(t,n,r);if(n.hasOwnProperty("resolved"))return i;var a,o=(a=n.type)===constants.Type.FLOW_MAP||a===constants.Type.MAP?e.defaultTags.MAP:function(e){var t=e.type;return t===constants.Type.FLOW_SEQ||t===constants.Type.SEQ}(n)?e.defaultTags.SEQ:e.defaultTags.STR;if(o){t.warnings.push(new errors.YAMLWarning(n,"The tag ".concat(r," is unavailable, falling back to ").concat(o)));var s=this.resolveNode(t,n,o);return s.tag=r,s}return t.errors.push(new errors.YAMLReferenceError(n,"The tag ".concat(r," is unavailable"))),null}},{key:"getTagObject",value:function(e){if(e instanceof o.default)return o.default;if(e.tag){var t=this.tags.filter(function(t){return t.tag===e.tag});if(t.length>0)return t.find(function(t){return t.format===e.format})||t[0]}var r,i;if(e instanceof c.default){i=e.value;var a=this.tags.filter(function(e){return e.identify&&e.identify(i)||e.class&&i instanceof e.class});r=a.find(function(t){return t.format===e.format})||a.find(function(e){return!e.format})}else i=e,r=this.tags.find(function(e){return e.nodeClass&&i instanceof e.nodeClass});if(!r){var s=i&&i.constructor?i.constructor.name:(0,n.default)(i);throw new Error("Tag not resolved for ".concat(s," value"))}return r}},{key:"stringifyProps",value:function(e,t,n){var r=n.anchors,i=n.doc,a=[],o=i.anchors.getName(e);return o&&(r[o]=e,a.push("&".concat(o))),e.tag?a.push(i.stringifyTag(e.tag)):t.default||a.push(i.stringifyTag(t.tag)),a.join(" ")}},{key:"stringify",value:function(e,t,n,r){var i;if(!(e instanceof u.default)){var a={aliasNodes:[],onTagObj:function(e){return i=e},prevObjects:[]};e=this.createNode(e,!0,null,a);var o=t.doc.anchors,c=!0,f=!1,h=void 0;try{for(var d,p=a.aliasNodes[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var g=d.value;g.source=g.source.node;var v=o.getName(g.source);v||(v=o.newName(),o.map[v]=g.source)}}catch(e){f=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw h}}}if(t.tags=this,e instanceof l.default)return e.toString(t,n,r);i||(i=this.getTagObject(e));var m=this.stringifyProps(e,i,t),y="function"==typeof i.stringify?i.stringify(e,t,n,r):e instanceof s.default?e.toString(t,n,r):(0,stringify.stringifyString)(e,t,n,r);return m?e instanceof s.default&&"{"!==y[0]&&"["!==y[0]?"".concat(m,"\n").concat(t.indent).concat(y):"".concat(m," ").concat(y):y}}]),e}();t.default=f,(0,a.default)(f,"defaultPrefix","tag:yaml.org,2002:"),(0,a.default)(f,"defaultTags",{MAP:"tag:yaml.org,2002:map",SEQ:"tag:yaml.org,2002:seq",STR:"tag:yaml.org,2002:str"})});unwrapExports(schema);var Document_1$1=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(slicedToArray),r=interopRequireDefault(classCallCheck),i=interopRequireDefault(createClass),a=interopRequireDefault(defineProperty),o=interopRequireDefault(addComment_1),s=interopRequireDefault(Anchors_1),u=interopRequireDefault(listTagNames),l=interopRequireDefault(schema),c=interopRequireDefault(Alias_1$1),f=interopRequireWildcard(Collection_1$1),h=interopRequireDefault(Node_1$1),d=interopRequireDefault(Scalar_1),p=interopRequireDefault(toJSON_1),g=function(){function e(t){(0,r.default)(this,e),this.anchors=new s.default(t.anchorPrefix),this.commentBefore=null,this.comment=null,this.contents=null,this.directivesEndMarker=null,this.errors=[],this.options=t,this.schema=null,this.tagPrefixes=[],this.version=null,this.warnings=[]}return(0,i.default)(e,[{key:"assertCollectionContents",value:function(){if(this.contents instanceof f.default)return!0;throw new Error("Expected a YAML collection as document contents")}},{key:"add",value:function(e){return this.assertCollectionContents(),this.contents.add(e)}},{key:"addIn",value:function(e,t){this.assertCollectionContents(),this.contents.addIn(e,t)}},{key:"delete",value:function(e){return this.assertCollectionContents(),this.contents.delete(e)}},{key:"deleteIn",value:function(e){return(0,f.isEmptyPath)(e)?null!=this.contents&&(this.contents=null,!0):(this.assertCollectionContents(),this.contents.deleteIn(e))}},{key:"getDefaults",value:function(){return e.defaults[this.version]||e.defaults[this.options.version]||{}}},{key:"get",value:function(e,t){return this.contents instanceof f.default?this.contents.get(e,t):void 0}},{key:"getIn",value:function(e,t){return(0,f.isEmptyPath)(e)?!t&&this.contents instanceof d.default?this.contents.value:this.contents:this.contents instanceof f.default?this.contents.getIn(e,t):void 0}},{key:"has",value:function(e){return this.contents instanceof f.default&&this.contents.has(e)}},{key:"hasIn",value:function(e){return(0,f.isEmptyPath)(e)?void 0!==this.contents:this.contents instanceof f.default&&this.contents.hasIn(e)}},{key:"set",value:function(e,t){this.assertCollectionContents(),this.contents.set(e,t)}},{key:"setIn",value:function(e,t){(0,f.isEmptyPath)(e)?this.contents=t:(this.assertCollectionContents(),this.contents.setIn(e,t))}},{key:"setSchema",value:function(){this.schema||(this.schema=new l.default(Object.assign({},this.getDefaults(),this.options)))}},{key:"parse",value:function(e,t){this.options.keepCstNodes&&(this.cstNode=e),this.options.keepNodeTypes&&(this.type="DOCUMENT");var n=e.directives,r=void 0===n?[]:n,i=e.contents,a=void 0===i?[]:i,o=e.directivesEndMarker,s=e.error,u=e.valueRange;if(s&&(s.source||(s.source=this),this.errors.push(s)),this.parseDirectives(r,t),o&&(this.directivesEndMarker=!0),this.range=u?[u.start,u.end]:null,this.setSchema(),this.anchors._cstAliases=[],this.parseContents(a),this.anchors.resolveNodes(),this.options.prettyErrors){var l=!0,c=!1,f=void 0;try{for(var h,d=this.errors[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var p=h.value;p instanceof errors.YAMLError&&p.makePretty()}}catch(e){c=!0,f=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw f}}var g=!0,v=!1,m=void 0;try{for(var y,b=this.warnings[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var x=y.value;x instanceof errors.YAMLError&&x.makePretty()}}catch(e){v=!0,m=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw m}}}return this}},{key:"parseDirectives",value:function(e,t){var n=this,r=[],i=!1;if(e.forEach(function(e){var t=e.comment,a=e.name;switch(a){case"TAG":n.resolveTagDirective(e),i=!0;break;case"YAML":case"YAML:1.0":n.resolveYamlDirective(e),i=!0;break;default:if(a){var o="YAML only supports %TAG and %YAML directives, and not %".concat(a);n.warnings.push(new errors.YAMLWarning(e,o))}}t&&r.push(t)}),t&&!i&&"1.1"===(this.version||t.version||this.options.version)){this.tagPrefixes=t.tagPrefixes.map(function(e){return{handle:e.handle,prefix:e.prefix}}),this.version=t.version}this.commentBefore=r.join("\n")||null}},{key:"parseContents",value:function(e){var t=this,n={before:[],after:[]},r=[],i=!1;switch(e.forEach(function(e){if(e.valueRange){if(1===r.length){t.errors.push(new errors.YAMLSyntaxError(e,"Document is not valid YAML (bad indentation?)"))}var a=t.resolveNode(e);i&&(a.spaceBefore=!0,i=!1),r.push(a)}else if(null!==e.comment){(0===r.length?n.before:n.after).push(e.comment)}else e.type===constants.Type.BLANK_LINE&&(i=!0,0===r.length&&n.before.length>0&&!t.commentBefore&&(t.commentBefore=n.before.join("\n"),n.before=[]))}),r.length){case 0:this.contents=null,n.after=n.before;break;case 1:if(this.contents=r[0],this.contents){var a=n.before.join("\n")||null;if(a){var o=this.contents instanceof f.default&&this.contents.items[0]?this.contents.items[0]:this.contents;o.commentBefore=o.commentBefore?"".concat(a,"\n").concat(o.commentBefore):a}}else n.after=n.before.concat(n.after);break;default:this.contents=r,this.contents[0]?this.contents[0].commentBefore=n.before.join("\n")||null:n.after=n.before.concat(n.after)}this.comment=n.after.join("\n")||null}},{key:"resolveTagDirective",value:function(e){var t=(0,n.default)(e.parameters,2),r=t[0],i=t[1];if(r&&i)if(this.tagPrefixes.every(function(e){return e.handle!==r}))this.tagPrefixes.push({handle:r,prefix:i});else{this.errors.push(new errors.YAMLSemanticError(e,"The %TAG directive must only be given at most once per handle in the same document."))}else{this.errors.push(new errors.YAMLSemanticError(e,"Insufficient parameters given for %TAG directive"))}}},{key:"resolveYamlDirective",value:function(t){var r=(0,n.default)(t.parameters,1)[0];if("YAML:1.0"===t.name&&(r="1.0"),this.version){this.errors.push(new errors.YAMLSemanticError(t,"The %YAML directive must only be given at most once per document."))}if(r){if(!e.defaults[r]){var i=this.version||this.options.version,a="Document will be parsed as YAML ".concat(i," rather than YAML ").concat(r);this.warnings.push(new errors.YAMLWarning(t,a))}this.version=r}else{this.errors.push(new errors.YAMLSemanticError(t,"Insufficient parameters given for %YAML directive"))}}},{key:"resolveTagName",value:function(e){var t=e.tag,n=e.type,r=!1;if(t){var i=t.handle,a=t.suffix,o=t.verbatim;if(o){if("!"!==o&&"!!"!==o)return o;var s="Verbatim tags aren't resolved, so ".concat(o," is invalid.");this.errors.push(new errors.YAMLSemanticError(e,s))}else if("!"!==i||a){var u=this.tagPrefixes.find(function(e){return e.handle===i});if(!u){var c=this.getDefaults().tagPrefixes;c&&(u=c.find(function(e){return e.handle===i}))}if(u){if(a){if("!"===i&&"1.0"===(this.version||this.options.version)){if("^"===a[0])return a;if(/[:\/]/.test(a)){var f=a.match(/^([a-z0-9-]+)\/(.*)/i);return f?"tag:".concat(f[1],".yaml.org,2002:").concat(f[2]):"tag:".concat(a)}}return u.prefix+decodeURIComponent(a)}this.errors.push(new errors.YAMLSemanticError(e,"The ".concat(i," tag has no suffix.")))}else{var h="The ".concat(i," tag handle is non-default and was not declared.");this.errors.push(new errors.YAMLSemanticError(e,h))}}else r=!0}switch(n){case constants.Type.BLOCK_FOLDED:case constants.Type.BLOCK_LITERAL:case constants.Type.QUOTE_DOUBLE:case constants.Type.QUOTE_SINGLE:return l.default.defaultTags.STR;case constants.Type.FLOW_MAP:case constants.Type.MAP:return l.default.defaultTags.MAP;case constants.Type.FLOW_SEQ:case constants.Type.SEQ:return l.default.defaultTags.SEQ;case constants.Type.PLAIN:return r?l.default.defaultTags.STR:null;default:return null}}},{key:"resolveNode",value:function(e){if(!e)return null;var t,n=this.anchors,r=this.errors,i=this.schema,a=!1,o=!1,s={before:[],after:[]},u=function(e){return e&&[constants.Type.MAP_KEY,constants.Type.MAP_VALUE,constants.Type.SEQ_ITEM].includes(e.type)}(e.context.parent)?e.context.parent.props.concat(e.props):e.props,l=!0,f=!1,h=void 0;try{for(var d,p=u[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var g=d.value,v=g.start,m=g.end;switch(e.context.src[v]){case constants.Char.COMMENT:if(!e.commentHasRequiredWhitespace(v)){r.push(new errors.YAMLSemanticError(e,"Comments must be separated from other tokens by white space characters"))}var y=e.context.src.slice(v+1,m),b=e.header,x=e.valueRange;x&&(v>x.start||b&&v>b.start)?s.after.push(y):s.before.push(y);break;case constants.Char.ANCHOR:if(a){r.push(new errors.YAMLSemanticError(e,"A node can have at most one anchor"))}a=!0;break;case constants.Char.TAG:if(o){r.push(new errors.YAMLSemanticError(e,"A node can have at most one tag"))}o=!0}}}catch(e){f=!0,h=e}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}if(a){var w=e.anchor,E=n.getNode(w);E&&(n.map[n.newName(w)]=E),n.map[w]=e}if(e.type===constants.Type.ALIAS){if(a||o){r.push(new errors.YAMLSemanticError(e,"An alias node must not specify any properties"))}var T=e.rawValue,_=n.getNode(T);if(!_){var C="Aliased anchor not found: ".concat(T);return r.push(new errors.YAMLReferenceError(e,C)),null}t=new c.default(_),n._cstAliases.push(t)}else{var D=this.resolveTagName(e);if(D)t=i.resolveNodeWithFallback(this,e,D);else{if(e.type!==constants.Type.PLAIN){var S="Failed to resolve ".concat(e.type," node here");return r.push(new errors.YAMLSyntaxError(e,S)),null}try{t=i.resolveScalar(e.strValue||"")}catch(t){return t.source||(t.source=e),r.push(t),null}}}if(t){t.range=[e.range.start,e.range.end],this.options.keepCstNodes&&(t.cstNode=e),this.options.keepNodeTypes&&(t.type=e.type);var A=s.before.join("\n");A&&(t.commentBefore=t.commentBefore?"".concat(t.commentBefore,"\n").concat(A):A);var k=s.after.join("\n");k&&(t.comment=t.comment?"".concat(t.comment,"\n").concat(k):k)}return e.resolved=t}},{key:"listNonDefaultTags",value:function(){return(0,u.default)(this.contents).filter(function(e){return 0!==e.indexOf(l.default.defaultPrefix)})}},{key:"setTagPrefix",value:function(e,t){if("!"!==e[0]||"!"!==e[e.length-1])throw new Error("Handle must start and end with !");if(t){var n=this.tagPrefixes.find(function(t){return t.handle===e});n?n.prefix=t:this.tagPrefixes.push({handle:e,prefix:t})}else this.tagPrefixes=this.tagPrefixes.filter(function(t){return t.handle!==e})}},{key:"stringifyTag",value:function(e){if("1.0"===(this.version||this.options.version)){var t=e.match(/^tag:private\.yaml\.org,2002:([^:\/]+)$/);if(t)return"!"+t[1];var n=e.match(/^tag:([a-zA-Z0-9-]+)\.yaml\.org,2002:(.*)/);return n?"!".concat(n[1],"/").concat(n[2]):"!".concat(e.replace(/^tag:/,""))}var r=this.tagPrefixes.find(function(t){return 0===e.indexOf(t.prefix)});if(!r){var i=this.getDefaults().tagPrefixes;r=i&&i.find(function(t){return 0===e.indexOf(t.prefix)})}if(!r)return"!"===e[0]?e:"!<".concat(e,">");var a=e.substr(r.prefix.length).replace(/[!,[\]{}]/g,function(e){return{"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"}[e]});return r.handle+a}},{key:"toJSON",value:function(e){var t=this,n=this.options,r=n.keepBlobsInJSON,i=n.mapAsMap,a=n.maxAliasCount,o=r&&("string"!=typeof e||!(this.contents instanceof d.default)),s={doc:this,keep:o,mapAsMap:o&&!!i,maxAliasCount:a},u=Object.keys(this.anchors.map);return u.length>0&&(s.anchors=u.map(function(e){return{alias:[],aliasCount:0,count:1,node:t.anchors.map[e]}})),(0,p.default)(this.contents,e,s)}},{key:"toString",value:function(){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");this.setSchema();var e=[],t=!1;if(this.version){var n="%YAML 1.2";"yaml-1.1"===this.schema.name&&("1.0"===this.version?n="%YAML:1.0":"1.1"===this.version&&(n="%YAML 1.1")),e.push(n),t=!0}var r=this.listNonDefaultTags();this.tagPrefixes.forEach(function(n){var i=n.handle,a=n.prefix;r.some(function(e){return 0===e.indexOf(a)})&&(e.push("%TAG ".concat(i," ").concat(a)),t=!0)}),(t||this.directivesEndMarker)&&e.push("---"),this.commentBefore&&(!t&&this.directivesEndMarker||e.unshift(""),e.unshift(this.commentBefore.replace(/^/gm,"#")));var i={anchors:{},doc:this,indent:""},a=!1,s=null;if(this.contents){this.contents instanceof h.default&&(this.contents.spaceBefore&&(t||this.directivesEndMarker)&&e.push(""),this.contents.commentBefore&&e.push(this.contents.commentBefore.replace(/^/gm,"#")),i.forceBlockIndent=!!this.comment,s=this.contents.comment);var u=s?null:function(){return a=!0},l=this.schema.stringify(this.contents,i,function(){return s=null},u);e.push((0,o.default)(l,"",s))}else void 0!==this.contents&&e.push(this.schema.stringify(this.contents,i));return this.comment&&(a&&!s||""===e[e.length-1]||e.push(""),e.push(this.comment.replace(/^/gm,"#"))),e.join("\n")+"\n"}}]),e}();t.default=g,(0,a.default)(g,"defaults",{"1.0":{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:l.default.defaultPrefix},{handle:"!!",prefix:"tag:private.yaml.org,2002:"}]},1.1:{schema:"yaml-1.1",merge:!0,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:l.default.defaultPrefix}]},1.2:{schema:"core",merge:!1,tagPrefixes:[{handle:"!",prefix:"!"},{handle:"!!",prefix:l.default.defaultPrefix}]}})});unwrapExports(Document_1$1);var dist=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=interopRequireDefault(classCallCheck),r=interopRequireDefault(possibleConstructorReturn),i=interopRequireDefault(getPrototypeOf),a=interopRequireDefault(inherits),o=interopRequireDefault(parse_1),s=interopRequireDefault(Document_1$1),u=interopRequireDefault(schema),l={anchorPrefix:"a",customTags:null,keepCstNodes:!1,keepNodeTypes:!0,keepBlobsInJSON:!0,mapAsMap:!1,maxAliasCount:100,prettyErrors:!1,version:"1.2"};var c=function(e){function t(e){return(0,n.default)(this,t),(0,r.default)(this,(0,i.default)(t).call(this,Object.assign({},l,e)))}return(0,a.default)(t,e),t}(s.default);function f(e,t){var n=(0,o.default)(e),r=new c(t).parse(n[0]);if(n.length>1){r.errors.unshift(new errors.YAMLSemanticError(n[1],"Source contains multiple documents; please use YAML.parseAllDocuments()"))}return r}var h={createNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;void 0===n&&"string"==typeof t&&(n=t,t=!0);var r=Object.assign({},s.default.defaults[l.version],l);return new u.default(r).createNode(e,t,n)},defaultOptions:l,Document:c,parse:function(e,t){var n=f(e,t);if(n.warnings.forEach(function(e){return console.warn(e)}),n.errors.length>0)throw n.errors[0];return n.toJSON()},parseAllDocuments:function(e,t){var n,r=[],i=!0,a=!1,s=void 0;try{for(var u,l=(0,o.default)(e)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value,h=new c(t);h.parse(f,n),r.push(h),n=h}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return r},parseCST:o.default,parseDocument:f,stringify:function(e,t){var n=new c(t);return n.contents=e,String(n)}};t.default=h});unwrapExports(dist);var browser=dist.default,DockerServiceImage='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"/></svg>',HostImage='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M17 16l-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z"/><path fill="none" d="M0 0h24v24H0z"/></svg>',VolumeImage='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"/></svg>',FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(e,t,n){var r,i,a,o,s,u,l=0,c=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function d(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n)}function p(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-l>=a}function g(){var e=now();if(p(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-u);return f?nativeMin(n,a-(e-l)):n}(e))}function v(e){return s=void 0,h&&r?d(e):(r=i=void 0,o)}function m(){var e=now(),n=p(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(g,t),c?d(e):o}(u);if(f)return s=setTimeout(g,t),d(u)}return void 0===s&&(s=setTimeout(g,t)),o}return t=toNumber(t)||0,isObject(n)&&(c=!!n.leading,a=(f="maxWait"in n)?nativeMax(toNumber(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},m.flush=function(){return void 0===s?o:v(now())},m}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce,heap=createCommonjsModule(function(e,t){(function(){var t,n,r,i,a,o,s,u,l,c,f,h,d,p,g;r=Math.floor,c=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},l=function(e,t,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=n),i<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)o(t,e[s=r((i+a)/2)])<0?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(t)),t},o=function(e,t,r){return null==r&&(r=n),e.push(t),p(e,0,e.length-1,r)},a=function(e,t){var r,i;return null==t&&(t=n),r=e.pop(),e.length?(i=e[0],e[0]=r,g(e,0,t)):i=r,i},u=function(e,t,r){var i;return null==r&&(r=n),i=e[0],e[0]=t,g(e,0,r),i},s=function(e,t,r){var i;return null==r&&(r=n),e.length&&r(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],g(e,0,r)),t},i=function(e,t){var i,a,o,s,u,l;for(null==t&&(t=n),u=[],a=0,o=(s=function(){l=[];for(var t=0,n=r(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)l.push(t);return l}.apply(this).reverse()).length;a<o;a++)i=s[a],u.push(g(e,i,t));return u},d=function(e,t,r){var i;if(null==r&&(r=n),-1!==(i=e.indexOf(t)))return p(e,0,i,r),g(e,i,r)},f=function(e,t,r){var a,o,u,l,c;if(null==r&&(r=n),!(o=e.slice(0,t)).length)return o;for(i(o,r),u=0,l=(c=e.slice(t)).length;u<l;u++)a=c[u],s(o,a,r);return o.sort(r).reverse()},h=function(e,t,r){var o,s,u,f,h,d,p,g,v;if(null==r&&(r=n),10*t<=e.length){if(!(u=e.slice(0,t).sort(r)).length)return u;for(s=u[u.length-1],f=0,d=(p=e.slice(t)).length;f<d;f++)r(o=p[f],s)<0&&(l(u,o,0,null,r),u.pop(),s=u[u.length-1]);return u}for(i(e,r),v=[],h=0,g=c(t,e.length);0<=g?h<g:h>g;0<=g?++h:--h)v.push(a(e,r));return v},p=function(e,t,r,i){var a,o,s;for(null==i&&(i=n),a=e[r];r>t&&i(a,o=e[s=r-1>>1])<0;)e[r]=o,r=s;return e[r]=a},g=function(e,t,r){var i,a,o,s,u;for(null==r&&(r=n),a=e.length,u=t,o=e[t],i=2*t+1;i<a;)(s=i+1)<a&&!(r(e[i],e[s])<0)&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=o,p(e,u,t,r)},t=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=o,e.pop=a,e.replace=u,e.pushpop=s,e.heapify=i,e.updateItem=d,e.nlargest=f,e.nsmallest=h,e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}).call(commonjsGlobal)}),heap$1=heap;function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var util=_interopDefault(lodash_debounce),Heap=_interopDefault(heap$1);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}function _defineProperty$1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_nonIterableRest$1()}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function _iterableToArrayLimit$1(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var window$1="undefined"==typeof window?null:window,navigator=window$1?window$1.navigator:null,document$1=window$1?window$1.document:null,typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof(function(){}),typeofhtmlele="undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement),instanceStr=function(e){return e&&e.instanceString&&fn(e.instanceString)?e.instanceString():null},string$1=function(e){return null!=e&&_typeof(e)==typeofstr},fn=function(e){return null!=e&&_typeof(e)===typeoffn},array=function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject=function(e){return null!=e&&_typeof(e)===typeofobj&&!array(e)&&e.constructor===Object},object=function(e){return null!=e&&_typeof(e)===typeofobj},number=function(e){return null!=e&&_typeof(e)===_typeof(1)&&!isNaN(e)},integer=function(e){return number(e)&&Math.floor(e)===e},htmlElement=function(e){return"undefined"===typeofhtmlele?void 0:null!=e&&e instanceof HTMLElement},elementOrCollection=function(e){return element$1(e)||collection(e)},element$1=function(e){return"collection"===instanceStr(e)&&e._private.single},collection=function(e){return"collection"===instanceStr(e)&&!e._private.single},core$1=function(e){return"core"===instanceStr(e)},stylesheet=function(e){return"stylesheet"===instanceStr(e)},event=function(e){return"event"===instanceStr(e)},emptyString=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},domElement=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement},boundingBox=function(e){return plainObject(e)&&number(e.x1)&&number(e.x2)&&number(e.y1)&&number(e.y2)},promise=function(e){return object(e)&&fn(e.then)},ms=function(){return navigator&&navigator.userAgent.match(/msie|trident|edge/i)},memoize=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function n(){var r,i=arguments,a=t.apply(this,i),o=n.cache;return(r=o[a])||(r=o[a]=e.apply(this,i)),r};return n.cache={},n},camel2dash=memoize(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),dash2camel=memoize(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),prependCamel=memoize(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),capitalize=function(e){return emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},number$1="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number$1+"[%]?)\\s*,\\s*("+number$1+"[%]?)\\s*,\\s*("+number$1+"[%]?)(?:\\s*,\\s*("+number$1+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number$1+"[%]?)\\s*,\\s*(?:"+number$1+"[%]?)\\s*,\\s*(?:"+number$1+"[%]?)(?:\\s*,\\s*(?:"+number$1+"))?\\)",hsla="hsl[a]?\\(("+number$1+")\\s*,\\s*("+number$1+"[%])\\s*,\\s*("+number$1+"[%])(?:\\s*,\\s*("+number$1+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number$1+")\\s*,\\s*(?:"+number$1+"[%])\\s*,\\s*(?:"+number$1+"[%])(?:\\s*,\\s*(?:"+number$1+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function(e,t){return e<t?-1:e>t?1:0},descending=function(e,t){return-1*ascending(e,t)},extend=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];e[o]=r[o]}}return e},hex2tuple=function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r;return 4===e.length?(t=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16),r=parseInt(e[3]+e[3],16)):(t=parseInt(e[1]+e[2],16),n=parseInt(e[3]+e[4],16),r=parseInt(e[5]+e[6],16)),[t,n,r]}},hsl2tuple=function(e){var t,n,r,i,a,o,s,u;function l(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var c=new RegExp("^"+hsla+"$").exec(e);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(a=c[4])&&((a=parseFloat(a))<0||a>1))return;if(0===r)o=s=u=Math.round(255*i);else{var f=i<.5?i*(1+r):i+r-i*r,h=2*i-f;o=Math.round(255*l(h,f,n+1/3)),s=Math.round(255*l(h,f,n)),u=Math.round(255*l(h,f,n-1/3))}t=[o,s,u,a]}return t},rgb2tuple=function(e){var t,n=new RegExp("^"+rgba+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var a=n[i];if("%"===a[a.length-1]&&(r[i]=!0),a=parseFloat(a),r[i]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var o=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(o&&!s)return;var u=n[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;t.push(u)}}return t},colorname2tuple=function(e){return colors[e.toLowerCase()]},color2tuple=function(e){return(array(e)?e:null)||colorname2tuple(e)||hex2tuple(e)||rgb2tuple(e)||hsl2tuple(e)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(plainObject(a))throw Error("Tried to set map with object key");i<n.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},getMap=function(e){for(var t=e.map,n=e.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(plainObject(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))return t}return t},performance=window$1?window$1.performance:null,pnow=performance&&performance.now?function(){return performance.now()}:function(){return Date.now()},raf=function(){if(window$1){if(window$1.requestAnimationFrame)return function(e){window$1.requestAnimationFrame(e)};if(window$1.mozRequestAnimationFrame)return function(e){window$1.mozRequestAnimationFrame(e)};if(window$1.webkitRequestAnimationFrame)return function(e){window$1.webkitRequestAnimationFrame(e)};if(window$1.msRequestAnimationFrame)return function(e){window$1.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(pnow())},1e3/60)}}(),requestAnimationFrame=function(e){return raf(e)},performanceNow=pnow,DEFAULT_SEED=5381,hashIterableInts=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_SEED;!(t=e.next()).done;)n=(n<<5)+n+t.value|0;return n},hashInt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_SEED;return(t<<5)+t+e|0},hashIntsArray=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return hashIterableInts({next:function(){return r<i?n.value=e[r++]:n.done=!0,n}},t)},hashString=function(e,t){var n={value:0,done:!1},r=0,i=e.length;return hashIterableInts({next:function(){return r<i?n.value=e.charCodeAt(r++):n.done=!0,n}},t)},hashStrings=function(){return hashStringsArray(arguments)},hashStringsArray=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];t=0===n?hashString(r):hashString(r,t)}return t},warningsEnabled=!0,warnSupported=null!=console.warn,traceSupported=null!=console.trace,MAX_INT=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop$1=function(){},error=function(e){throw new Error(e)},warnings=function(e){if(void 0===e)return warningsEnabled;warningsEnabled=!!e},warn=function(e){warnings()&&(warnSupported?console.warn(e):(console.log(e),traceSupported&&console.trace()))},clone=function(e){return extend({},e)},copy=function(e){return null==e?e:array(e)?e.slice():plainObject(e)?clone(e):e},copyArray=function(e){return e.slice()},uuid=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},_staticEmptyObject={},staticEmptyObject=function(){return _staticEmptyObject},defaults=function(e){var t=Object.keys(e);return function(n){for(var r={},i=0;i<t.length;i++){var a=t[i],o=null==n?void 0:n[a];r[a]=void 0===o?e[a]:o}return r}},removeFromArray=function(e,t,n){for(var r=e.length;r>=0&&(e[r]!==t||(e.splice(r,1),n));r--);},clearArray=function(e){e.splice(0,e.length)},push=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},getPrefixedProperty=function(e,t,n){return n&&(t=prependCamel(n,t)),e[t]},setPrefixedProperty=function(e,t,n,r){n&&(t=prependCamel(n,t)),e[t]=r},ObjectMap=function(){function e(){_classCallCheck$1(this,e),this._obj={}}return _createClass$1(e,[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),e}(),Map$1="undefined"!=typeof Map?Map:ObjectMap,undef="undefined",ObjectSet=function(){function e(t){if(_classCallCheck$1(this,e),this._obj=Object.create(null),this.size=0,null!=t){var n;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var r=0;r<n.length;r++)this.add(n[r])}}return _createClass$1(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),e}(),Set$1=("undefined"==typeof Set?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element=function(e,t,n){if(n=!(void 0!==n&&!n),void 0!==e&&void 0!==t&&core$1(e)){var r=t.group;if(null==r&&(r=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===r:!!t.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var a=t.renderedPosition,o=e.pan(),s=e.zoom();i.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}var u=[];array(t.classes)?u=t.classes:string$1(t.classes)&&(u=t.classes.split(/\s+/));for(var l=0,c=u.length;l<c;l++){var f=u[l];f&&""!==f&&i.classes.add(f)}this.createEmitter();var h=t.style||t.css;h&&(warn("Setting a `style` bypass at element creation is deprecated"),this.style(h)),(void 0===n||n)&&this.restore()}else error("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else error("An element must have a core reference and parameters set")},defineSearch=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){var i;plainObject(t)&&!elementOrCollection(t)&&(t=(i=t).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||fn(n)?r:n,n=fn(n)?n:function(){};for(var a,o=this._private.cy,s=t=string$1(t)?this.filter(t):t,u=[],l=[],c={},f={},h={},d=0,p=this.byGroup(),g=p.nodes,v=p.edges,m=0;m<s.length;m++){var y=s[m],b=y.id();y.isNode()&&(u.unshift(y),e.bfs&&(h[b]=!0,l.push(y)),f[b]=0)}var x=function(){var t=e.bfs?u.shift():u.pop(),i=t.id();if(e.dfs){if(h[i])return"continue";h[i]=!0,l.push(t)}var o,s=f[i],p=c[i],m=null!=p?p.source():null,y=null!=p?p.target():null,b=null==p?void 0:t.same(m)?y[0]:m[0];if(!0===(o=n(t,p,b,d++,s)))return a=t,"break";if(!1===o)return"break";for(var x=t.connectedEdges().filter(function(e){return(!r||e.source().same(t))&&v.has(e)}),w=0;w<x.length;w++){var E=x[w],T=E.connectedNodes().filter(function(e){return!e.same(t)&&g.has(e)}),_=T.id();0===T.length||h[_]||(T=T[0],u.push(T),e.bfs&&(h[_]=!0,l.push(T)),c[_]=E,f[_]=f[i]+1)}};e:for(;0!==u.length;){switch(x()){case"continue":continue;case"break":break e}}for(var w=o.collection(),E=0;E<l.length;E++){var T=l[E],_=c[T.id()];null!=_&&w.merge(_),w.merge(T)}return{path:o.collection(w),found:o.collection(a)}}},elesfn={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn.bfs=elesfn.breadthFirstSearch,elesfn.dfs=elesfn.depthFirstSearch;var dijkstraDefaults=defaults({root:null,weight:function(e){return 1},directed:!1}),elesfn$1={dijkstra:function(e){if(!plainObject(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=dijkstraDefaults(e),r=n.root,i=n.weight,a=n.directed,o=this,s=i,u=string$1(r)?this.filter(r)[0]:r[0],l={},c={},f={},h=this.byGroup(),d=h.nodes,p=h.edges;p.unmergeBy(function(e){return e.isLoop()});for(var g=function(e){return l[e.id()]},v=function(e,t){l[e.id()]=t,m.updateItem(e)},m=new Heap(function(e,t){return g(e)-g(t)}),y=0;y<d.length;y++){var b=d[y];l[b.id()]=b.same(u)?0:1/0,m.push(b)}for(var x=function(e,t){for(var n,r=(a?e.edgesTo(t):e.edgesWith(t)).intersect(p),i=1/0,o=0;o<r.length;o++){var u=r[o],l=s(u);(l<i||!n)&&(i=l,n=u)}return{edge:n,dist:i}};m.size()>0;){var w=m.pop(),E=g(w),T=w.id();if(f[T]=E,E!==1/0)for(var _=w.neighborhood().intersect(d),C=0;C<_.length;C++){var D=_[C],S=D.id(),A=x(w,D),k=E+A.dist;k<g(D)&&(v(D,k),c[S]={node:w,edge:A.edge})}}return{distanceTo:function(e){var t=string$1(e)?d.filter(e)[0]:e[0];return f[t.id()]},pathTo:function(e){var t=string$1(e)?d.filter(e)[0]:e[0],n=[],r=t,i=r.id();if(t.length>0)for(n.unshift(t);c[i];){var a=c[i];n.unshift(a.edge),n.unshift(a.node),i=(r=a.node).id()}return o.spawn(n)}}}},elesfn$2={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,i=n.length,a=new Array(i),o=n,s=function(e){for(var t=0;t<a.length;t++){if(a[t].has(e))return t}},u=0;u<i;u++)a[u]=this.spawn(n[u]);for(var l=r.sort(function(t,n){return e(t)-e(n)}),c=0;c<l.length;c++){var f=l[c],h=f.source()[0],d=f.target()[0],p=s(h),g=s(d),v=a[p],m=a[g];p!==g&&(o.merge(f),v.merge(m),a.splice(g,1))}return o}},aStarDefaults=defaults({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),elesfn$3={aStar:function(e){var t=this.cy(),n=aStarDefaults(e),r=n.root,i=n.goal,a=n.heuristic,o=n.directed,s=n.weight;r=t.collection(r)[0],i=t.collection(i)[0];var u,l,c=r.id(),f=i.id(),h={},d={},p={},g=new Heap(function(e,t){return d[e.id()]-d[t.id()]}),v=new Set$1,m={},y={},b=function(e,t){g.push(e),v.add(t)};b(r,c),h[c]=0,d[c]=a(r);for(var x,w=0;g.size()>0;){if(u=g.pop(),l=u.id(),v.delete(l),w++,l===f){for(var E=[],T=i,_=f,C=y[_];E.unshift(T),null!=C&&E.unshift(C),null!=(T=m[_]);)C=y[_=T.id()];return{found:!0,distance:h[l],path:this.spawn(E),steps:w}}p[l]=!0;for(var D=u._private.edges,S=0;S<D.length;S++){var A=D[S];if(this.hasElementWithId(A.id())&&(!o||A.data("source")===l)){var k=A.source(),R=A.target(),O=k.id()!==l?k:R,M=O.id();if(this.hasElementWithId(M)&&!p[M]){var L=h[l]+s(A);x=M,v.has(x)?L<h[M]&&(h[M]=L,d[M]=L+a(O),m[M]=u):(h[M]=L,d[M]=L+a(O),b(O,M),m[M]=u,y[M]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},floydWarshallDefaults=defaults({weight:function(e){return 1},directed:!1}),elesfn$4={floydWarshall:function(e){for(var t=this.cy(),n=floydWarshallDefaults(e),r=n.weight,i=n.directed,a=r,o=this.byGroup(),s=o.nodes,u=o.edges,l=s.length,c=l*l,f=function(e){return s.indexOf(e)},h=function(e){return s[e]},d=new Array(c),p=0;p<c;p++){var g=p%l,v=(p-g)/l;d[p]=v===g?0:1/0}for(var m=new Array(c),y=new Array(c),b=0;b<u.length;b++){var x=u[b],w=x.source()[0],E=x.target()[0];if(w!==E){var T=f(w),_=f(E),C=T*l+_,D=a(x);if(d[C]>D&&(d[C]=D,m[C]=_,y[C]=x),!i){var S=_*l+T;!i&&d[S]>D&&(d[S]=D,m[S]=T,y[S]=x)}}}for(var A=0;A<l;A++)for(var k=0;k<l;k++)for(var R=k*l+A,O=0;O<l;O++){var M=k*l+O,L=A*l+O;d[R]+d[L]<d[M]&&(d[M]=d[R]+d[L],m[M]=m[R])}var N=function(e){return f(function(e){return(string$1(e)?t.filter(e):e)[0]}(e))};return{distance:function(e,t){var n=N(e),r=N(t);return d[n*l+r]},path:function(e,n){var r=N(e),i=N(n),a=h(r);if(r===i)return a.collection();if(null==m[r*l+i])return t.collection();var o,s=t.collection(),u=r;for(s.merge(a);r!==i;)u=r,r=m[r*l+i],o=y[u*l+r],s.merge(o),s.merge(h(r));return s}}}},bellmanFordDefaults=defaults({weight:function(e){return 1},directed:!1,root:null}),elesfn$5={bellmanFord:function(e){var t=this,n=bellmanFordDefaults(e),r=n.weight,i=n.directed,a=n.root,o=r,s=this,u=this.cy(),l=this.byGroup(),c=l.edges,f=l.nodes,h=f.length,d=new Map$1,p=!1;a=u.collection(a)[0],c.unmergeBy(function(e){return e.isLoop()});for(var g=c.length,v=function(e){var t=d.get(e.id());return t||(t={},d.set(e.id(),t)),t},m=function(e){return(string$1(e)?u.$(e):e)[0]},y=0;y<h;y++){var b=f[y],x=v(b);b.same(a)?x.dist=0:x.dist=1/0,x.pred=null,x.edge=null}for(var w=!1,E=function(e,t,n,r,i,a){var o=r.dist+a;o<i.dist&&!n.same(r.edge)&&(i.dist=o,i.pred=e,i.edge=n,w=!0)},T=1;T<h;T++){w=!1;for(var _=0;_<g;_++){var C=c[_],D=C.source(),S=C.target(),A=o(C),k=v(D),R=v(S);E(D,0,C,k,R,A),i||E(S,0,C,R,k,A)}if(!w)break}if(w)for(var O=0;O<g;O++){var M=c[O],L=M.source(),N=M.target(),P=o(M),I=v(L).dist,B=v(N).dist;if(I+P<B||!i&&B+P<I){warn("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:function(e){return v(m(e)).dist},pathTo:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=[],i=m(e);;){if(null==i)return t.spawn();var o=v(i),u=o.edge,l=o.pred;if(r.unshift(i[0]),i.same(n)&&r.length>0)break;null!=u&&r.unshift(u),i=l}return s.spawn(r)},hasNegativeWeightCycle:p,negativeWeightCycles:[]}}},sqrt2=Math.sqrt(2),collapse=function(e,t,n){0===n.length&&error("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],i=r[1],a=r[2],o=t[i],s=t[a],u=n,l=u.length-1;l>=0;l--){var c=u[l],f=c[1],h=c[2];(t[f]===o&&t[h]===s||t[f]===s&&t[h]===o)&&u.splice(l,1)}for(var d=0;d<u.length;d++){var p=u[d];p[1]===s?(u[d]=p.slice(),u[d][1]=o):p[2]===s&&(u[d]=p.slice(),u[d][2]=o)}for(var g=0;g<t.length;g++)t[g]===s&&(t[g]=o);return u},contractUntil=function(e,t,n,r){for(;n>r;){var i=Math.floor(Math.random()*t.length);t=collapse(i,e,t),n--}return t},elesfn$6={kargerStein:function(){var e=this.byGroup(),t=e.nodes,n=e.edges;n.unmergeBy(function(e){return e.isLoop()});var r=t.length,i=n.length,a=Math.ceil(Math.pow(Math.log(r)/Math.LN2,2)),o=Math.floor(r/sqrt2);if(!(r<2)){for(var s=[],u=0;u<i;u++){var l=n[u];s.push([u,t.indexOf(l.source()),t.indexOf(l.target())])}for(var c=1/0,f=[],h=new Array(r),d=new Array(r),p=new Array(r),g=function(e,t){for(var n=0;n<r;n++)t[n]=e[n]},v=0;v<=a;v++){for(var m=0;m<r;m++)d[m]=m;var y=contractUntil(d,s.slice(),r,o),b=y.slice();g(d,p);var x=contractUntil(d,y,o,2),w=contractUntil(p,b,o,2);x.length<=w.length&&x.length<c?(c=x.length,f=x,g(d,h)):w.length<=x.length&&w.length<c&&(c=w.length,f=w,g(p,h))}for(var E=this.spawn(f.map(function(e){return n[e[0]]})),T=this.spawn(),_=this.spawn(),C=h[0],D=0;D<h.length;D++){var S=h[D],A=t[D];S===C?T.merge(A):_.merge(A)}return{cut:E,partition1:T,partition2:_}}error("At least 2 nodes are required for Karger-Stein algorithm")}},copyPosition=function(e){return{x:e.x,y:e.y}},modelToRenderedPosition=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},renderedToModelPosition=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},array2point=function(e){return{x:e[0],y:e[1]}},min=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(r=Math.min(a,r))}return r},max=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=-1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(r=Math.max(a,r))}return r},mean=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0,i=0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(r+=o,i++)}return r/i},median=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var o=0,s=e.length-1;s>=0;s--){var u=e[s];a?isFinite(u)||(e[s]=-1/0,o++):e.splice(s,1)}i&&e.sort(function(e,t){return e-t});var l=e.length,c=Math.floor(l/2);return l%2!=0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},deg2rad=function(e){return Math.PI*e/180},getAngleFromDisp=function(e,t){return Math.atan2(t,e)-Math.PI/2},log2=Math.log2||function(e){return Math.log(e)/Math.log(2)},signum=function(e){return e>0?1:e<0?-1:0},dist$1=function(e,t){return Math.sqrt(sqdist(e,t))},sqdist=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},inPlaceSumNormalize=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},qbezierAt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},qbezierPtAt=function(e,t,n,r){return{x:qbezierAt(e.x,t.x,n.x,r),y:qbezierAt(e.y,t.y,n.y,r)}},lineAt=function(e,t,n,r){var i=t.x-e.x,a=t.y-e.y,o=dist$1(e,t),s=i/o,u=a/o;return n=null==n?0:n,r=null!=r?r:n*o,{x:e.x+s*r,y:e.y+u*r}},bound=function(e,t,n){return Math.max(e,Math.min(n,t))},makeBoundingBox=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},copyBoundingBox=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},clearBoundingBox=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},updateBoundingBox=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},expandBoundingBoxByPoint=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},expandBoundingBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},expandBoundingBoxSides=function(e){var t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)t=n=r=i=a[0];else if(2===a.length)t=r=a[0],i=n=a[1];else if(4===a.length){var o=_slicedToArray$1(a,4);t=o[0],n=o[1],r=o[2],i=o[3]}return e.x1-=i,e.x2+=n,e.y1-=t,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},assignBoundingBox=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},assignShiftToBoundingBox=function(e,t){e.x1+=t.x,e.x2+=t.x,e.y1+=t.y,e.y2+=t.y},boundingBoxesIntersect=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},inBoundingBox=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},pointInBoundingBox=function(e,t){return inBoundingBox(e,t.x,t.y)},boundingBoxInBoundingBox=function(e,t){return inBoundingBox(e,t.x1,t.y1)&&inBoundingBox(e,t.x2,t.y2)},roundRectangleIntersectLine=function(e,t,n,r,i,a,o){var s,u=getRoundRectangleRadius(i,a),l=i/2,c=a/2,f=r-c-o;if((s=finiteLinesIntersect(e,t,n,r,n-l+u-o,f,n+l-u+o,f,!1)).length>0)return s;var h=n+l+o;if((s=finiteLinesIntersect(e,t,n,r,h,r-c+u-o,h,r+c-u+o,!1)).length>0)return s;var d=r+c+o;if((s=finiteLinesIntersect(e,t,n,r,n-l+u-o,d,n+l-u+o,d,!1)).length>0)return s;var p,g=n-l-o;if((s=finiteLinesIntersect(e,t,n,r,g,r-c+u-o,g,r+c-u+o,!1)).length>0)return s;var v=n-l+u,m=r-c+u;if((p=intersectLineCircle(e,t,n,r,v,m,u+o)).length>0&&p[0]<=v&&p[1]<=m)return[p[0],p[1]];var y=n+l-u,b=r-c+u;if((p=intersectLineCircle(e,t,n,r,y,b,u+o)).length>0&&p[0]>=y&&p[1]<=b)return[p[0],p[1]];var x=n+l-u,w=r+c-u;if((p=intersectLineCircle(e,t,n,r,x,w,u+o)).length>0&&p[0]>=x&&p[1]>=w)return[p[0],p[1]];var E=n-l+u,T=r+c-u;return(p=intersectLineCircle(e,t,n,r,E,T,u+o)).length>0&&p[0]<=E&&p[1]>=T?[p[0],p[1]]:[]},inLineVicinity=function(e,t,n,r,i,a,o){var s=o,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,a),f=Math.max(r,a);return u-s<=e&&e<=l+s&&c-s<=t&&t<=f+s},inBezierVicinity=function(e,t,n,r,i,a,o,s,u){var l=Math.min(n,o,i)-u,c=Math.max(n,o,i)+u,f=Math.min(r,s,a)-u,h=Math.max(r,s,a)+u;return!(e<l||e>c||t<f||t>h)},solveQuadratic=function(e,t,n,r){var i=t*t-4*e*(n-=r);if(i<0)return[];var a=Math.sqrt(i),o=2*e;return[(-t+a)/o,(-t-a)/o]},solveCubic=function(e,t,n,r,i){var a,o,s,u,l,c,f,h;return 0===e&&(e=1e-5),s=-27*(r/=e)+(t/=e)*(9*(n/=e)-t*t*2),a=(o=(3*n-t*t)/9)*o*o+(s/=54)*s,i[1]=0,f=t/3,a>0?(l=(l=s+Math.sqrt(a))<0?-Math.pow(-l,1/3):Math.pow(l,1/3),c=(c=s-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-f+l+c,f+=(l+c)/2,i[4]=i[2]=-f,f=Math.sqrt(3)*(-c+l)/2,i[3]=f,void(i[5]=-f)):(i[5]=i[3]=0,0===a?(h=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*h-f,void(i[4]=i[2]=-(h+f))):(u=(o=-o)*o*o,u=Math.acos(s/Math.sqrt(u)),h=2*Math.sqrt(o),i[0]=-f+h*Math.cos(u/3),i[2]=-f+h*Math.cos((u+2*Math.PI)/3),void(i[4]=-f+h*Math.cos((u+4*Math.PI)/3))))},sqdistToQuadraticBezier=function(e,t,n,r,i,a,o,s){var u=[];solveCubic(1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s,9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*s-6*a*a+3*a*s,3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*r*r-6*r*a+r*s-r*t+2*a*a+2*a*t-s*t,1*n*i-n*n+n*e-i*e+r*a-r*r+r*t-a*t,u);for(var l=[],c=0;c<6;c+=2)Math.abs(u[c+1])<1e-7&&u[c]>=0&&u[c]<=1&&l.push(u[c]);l.push(1),l.push(0);for(var f,h,d,p=-1,g=0;g<l.length;g++)f=Math.pow(1-l[g],2)*n+2*(1-l[g])*l[g]*i+l[g]*l[g]*o,h=Math.pow(1-l[g],2)*r+2*(1-l[g])*l[g]*a+l[g]*l[g]*s,d=Math.pow(f-e,2)+Math.pow(h-t,2),p>=0?d<p&&(p=d):p=d;return p},sqdistToFiniteLine=function(e,t,n,r,i,a){var o=[e-n,t-r],s=[i-n,a-r],u=s[0]*s[0]+s[1]*s[1],l=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],f=c*c/u;return c<0?l:f>u?(e-i)*(e-i)+(t-a)*(t-a):l-f},pointInsidePolygonPoints=function(e,t,n){for(var r,i,a,o,s=0,u=0;u<n.length/2;u++)if(r=n[2*u],i=n[2*u+1],u+1<n.length/2?(a=n[2*(u+1)],o=n[2*(u+1)+1]):(a=n[2*(u+1-n.length/2)],o=n[2*(u+1-n.length/2)+1]),r==e&&a==e);else{if(!(r>=e&&e>=a||r<=e&&e<=a))continue;(e-r)/(a-r)*(o-i)+i>t&&s++}return s%2!=0},pointInsidePolygon=function(e,t,n,r,i,a,o,s,u){var l,c=new Array(n.length);null!=s[0]?(l=Math.atan(s[1]/s[0]),s[0]<0?l+=Math.PI/2:l=-l-Math.PI/2):l=s;for(var f,h=Math.cos(-l),d=Math.sin(-l),p=0;p<c.length/2;p++)c[2*p]=a/2*(n[2*p]*h-n[2*p+1]*d),c[2*p+1]=o/2*(n[2*p+1]*h+n[2*p]*d),c[2*p]+=r,c[2*p+1]+=i;if(u>0){var g=expandPolygon(c,-u);f=joinLines(g)}else f=c;return pointInsidePolygonPoints(e,t,f)},joinLines=function(e){for(var t,n,r,i,a,o,s,u,l=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],o=e[4*(c+1)+1],s=e[4*(c+1)+2],u=e[4*(c+1)+3]):(a=e[0],o=e[1],s=e[2],u=e[3]);var f=finiteLinesIntersect(t,n,r,i,a,o,s,u,!0);l[2*c]=f[0],l[2*c+1]=f[1]}return l},expandPolygon=function(e,t){for(var n,r,i,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],a=e[2*(s+1)+1]):(i=e[0],a=e[1]);var u=a-r,l=-(i-n),c=Math.sqrt(u*u+l*l),f=u/c,h=l/c;o[4*s]=n+f*t,o[4*s+1]=r+h*t,o[4*s+2]=i+f*t,o[4*s+3]=a+h*t}return o},intersectLineEllipse=function(e,t,n,r,i,a){var o=n-e,s=r-t;o/=i,s/=a;var u=Math.sqrt(o*o+s*s),l=u-1;if(l<0)return[];var c=l/u;return[(n-e)*c+e,(r-t)*c+t]},checkInEllipse=function(e,t,n,r,i,a,o){return e-=i,t-=a,(e/=n/2+o)*e+(t/=r/2+o)*t<=1},intersectLineCircle=function(e,t,n,r,i,a,o){var s=[n-e,r-t],u=[e-i,t-a],l=s[0]*s[0]+s[1]*s[1],c=2*(u[0]*s[0]+u[1]*s[1]),f=c*c-4*l*(u[0]*u[0]+u[1]*u[1]-o*o);if(f<0)return[];var h=(-c+Math.sqrt(f))/(2*l),d=(-c-Math.sqrt(f))/(2*l),p=Math.min(h,d),g=Math.max(h,d),v=[];if(p>=0&&p<=1&&v.push(p),g>=0&&g<=1&&v.push(g),0===v.length)return[];var m=v[0]*s[0]+e,y=v[0]*s[1]+t;return v.length>1?v[0]==v[1]?[m,y]:[m,y,v[1]*s[0]+e,v[1]*s[1]+t]:[m,y]},midOfThree=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},finiteLinesIntersect=function(e,t,n,r,i,a,o,s,u){var l=e-i,c=n-e,f=o-i,h=t-a,d=r-t,p=s-a,g=f*h-p*l,v=c*h-d*l,m=p*c-f*d;if(0!==m){var y=g/m,b=v/m;return-.001<=y&&y<=1.001&&-.001<=b&&b<=1.001?[e+y*c,t+y*d]:u?[e+y*c,t+y*d]:[]}return 0===g||0===v?midOfThree(e,n,o)===o?[o,s]:midOfThree(e,n,i)===i?[i,a]:midOfThree(i,o,n)===n?[n,r]:[]:[]},polygonIntersectLine=function(e,t,n,r,i,a,o,s){var u,l,c,f,h,d,p=[],g=new Array(n.length),v=!0;if(null==a&&(v=!1),v){for(var m=0;m<g.length/2;m++)g[2*m]=n[2*m]*a+r,g[2*m+1]=n[2*m+1]*o+i;if(s>0){var y=expandPolygon(g,-s);l=joinLines(y)}else l=g}else l=n;for(var b=0;b<l.length/2;b++)c=l[2*b],f=l[2*b+1],b<l.length/2-1?(h=l[2*(b+1)],d=l[2*(b+1)+1]):(h=l[0],d=l[1]),0!==(u=finiteLinesIntersect(e,t,r,i,c,f,h,d)).length&&p.push(u[0],u[1]);return p},shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return a<0&&(a=1e-5),[t[0]+a*r[0],t[1]+a*r[1]]},generateUnitNgonPointsFitToSquare=function(e,t){var n=generateUnitNgonPoints(e,t);return n=fitPolygonToSquare(n)},fitPolygonToSquare=function(e){for(var t,n,r=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,u=0;u<r;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);for(var l=2/(o-i),c=2/(s-a),f=0;f<r;f++)t=e[2*f]=e[2*f]*l,n=e[2*f+1]=e[2*f+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);if(a<-1)for(var h=0;h<r;h++)n=e[2*h+1]=e[2*h+1]+(-1-a);return e},generateUnitNgonPoints=function(e,t){var n=1/e*2*Math.PI,r=e%2==0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,a=new Array(2*e),o=0;o<e;o++)i=o*n+r,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)},getCutRectangleCornerLength=function(){return 8},bezierPtsToQuadCoeff=function(e,t,n){return[e-2*t+n,2*(t-e),e]},getBarrelCurveConstants=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},pageRankDefaults=defaults({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),elesfn$7={pageRank:function(e){for(var t=pageRankDefaults(e),n=t.dampingFactor,r=t.precision,i=t.iterations,a=t.weight,o=this._private.cy,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,h=l.length,d=new Array(f),p=new Array(c),g=(1-n)/c,v=0;v<c;v++){for(var m=0;m<c;m++){d[v*c+m]=0}p[v]=0}for(var y=0;y<h;y++){var b=l[y],x=b.data("source"),w=b.data("target");if(x!==w){var E=u.indexOfId(x),T=u.indexOfId(w),_=a(b);d[T*c+E]+=_,p[E]+=_}}for(var C=1/c+g,D=0;D<c;D++)if(0===p[D])for(var S=0;S<c;S++){d[S*c+D]=C}else for(var A=0;A<c;A++){var k=A*c+D;d[k]=d[k]/p[D]+g}for(var R,O=new Array(c),M=new Array(c),L=0;L<c;L++)O[L]=1;for(var N=0;N<i;N++){for(var P=0;P<c;P++)M[P]=0;for(var I=0;I<c;I++)for(var B=0;B<c;B++){var $=I*c+B;M[I]+=d[$]*O[B]}inPlaceSumNormalize(M),R=O,O=M,M=R;for(var F=0,q=0;q<c;q++){var j=R[q]-O[q];F+=j*j}if(F<r)break}return{rank:function(e){return e=o.collection(e)[0],O[u.indexOf(e)]}}}},defaults$1=defaults({root:null,weight:function(e){return 1},directed:!1,alpha:0}),elesfn$8={degreeCentralityNormalized:function(e){e=defaults$1(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var i={},a={},o=0,s=0,u=0;u<r;u++){var l=n[u],c=l.id();e.root=l;var f=this.degreeCentrality(e);o<f.indegree&&(o=f.indegree),s<f.outdegree&&(s=f.outdegree),i[c]=f.indegree,a[c]=f.outdegree}return{indegree:function(e){return 0==o?0:(string$1(e)&&(e=t.filter(e)),i[e.id()]/o)},outdegree:function(e){return 0===s?0:(string$1(e)&&(e=t.filter(e)),a[e.id()]/s)}}}for(var h={},d=0,p=0;p<r;p++){var g=n[p];e.root=g;var v=this.degreeCentrality(e);d<v.degree&&(d=v.degree),h[g.id()]=v.degree}return{degree:function(e){return 0===d?0:(string$1(e)&&(e=t.filter(e)),h[e.id()]/d)}}},degreeCentrality:function(e){e=defaults$1(e);var t=this.cy(),n=this,r=e,i=r.root,a=r.weight,o=r.directed,s=r.alpha;if(i=t.collection(i)[0],o){for(var u=i.connectedEdges(),l=u.filter(function(e){return e.target().same(i)&&n.has(e)}),c=u.filter(function(e){return e.source().same(i)&&n.has(e)}),f=l.length,h=c.length,d=0,p=0,g=0;g<l.length;g++)d+=a(l[g]);for(var v=0;v<c.length;v++)p+=a(c[v]);return{indegree:Math.pow(f,1-s)*Math.pow(d,s),outdegree:Math.pow(h,1-s)*Math.pow(p,s)}}for(var m=i.connectedEdges().intersection(n),y=m.length,b=0,x=0;x<m.length;x++)b+=a(m[x]);return{degree:Math.pow(y,1-s)*Math.pow(b,s)}}};elesfn$8.dc=elesfn$8.degreeCentrality,elesfn$8.dcn=elesfn$8.degreeCentralityNormalised=elesfn$8.degreeCentralityNormalized;var defaults$2=defaults({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$9={closenessCentralityNormalized:function(e){for(var t=defaults$2(e),n=t.harmonic,r=t.weight,i=t.directed,a=this.cy(),o={},s=0,u=this.nodes(),l=this.floydWarshall({weight:r,directed:i}),c=0;c<u.length;c++){for(var f=0,h=u[c],d=0;d<u.length;d++)if(c!==d){var p=l.distance(h,u[d]);f+=n?1/p:p}n||(f=1/f),s<f&&(s=f),o[h.id()]=f}return{closeness:function(e){return 0==s?0:(e=string$1(e)?a.filter(e)[0].id():e.id(),o[e]/s)}}},closenessCentrality:function(e){var t=defaults$2(e),n=t.root,r=t.weight,i=t.directed,a=t.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++){var c=u[l];if(!c.same(n)){var f=o.distanceTo(c);s+=a?1/f:f}}return a?s:1/s}};elesfn$9.cc=elesfn$9.closenessCentrality,elesfn$9.ccn=elesfn$9.closenessCentralityNormalised=elesfn$9.closenessCentralityNormalized;var defaults$3=defaults({weight:null,directed:!1}),elesfn$a={betweennessCentrality:function(e){for(var t=defaults$3(e),n=t.directed,r=t.weight,i=null!=r,a=this.cy(),o=this.nodes(),s={},u={},l=0,c=function(e,t){u[e]=t,t>l&&(l=t)},f=function(e){return u[e]},h=0;h<o.length;h++){var d=o[h],p=d.id();s[p]=n?d.outgoers().nodes():d.openNeighborhood().nodes(),c(p,0)}for(var g=function(e){for(var t=o[e].id(),n=[],u={},l={},h={},d=new Heap(function(e,t){return h[e]-h[t]}),p=0;p<o.length;p++){var g=o[p].id();u[g]=[],l[g]=0,h[g]=1/0}for(l[t]=1,h[t]=0,d.push(t);!d.empty();){var v=d.pop();if(n.push(v),i)for(var m=0;m<s[v].length;m++){var y=s[v][m],b=a.getElementById(v),x=void 0;x=b.edgesTo(y).length>0?b.edgesTo(y)[0]:y.edgesTo(b)[0];var w=r(x);y=y.id(),h[y]>h[v]+w&&(h[y]=h[v]+w,d.nodes.indexOf(y)<0?d.push(y):d.updateItem(y),l[y]=0,u[y]=[]),h[y]==h[v]+w&&(l[y]=l[y]+l[v],u[y].push(v))}else for(var E=0;E<s[v].length;E++){var T=s[v][E].id();h[T]==1/0&&(d.push(T),h[T]=h[v]+1),h[T]==h[v]+1&&(l[T]=l[T]+l[v],u[T].push(v))}}for(var _={},C=0;C<o.length;C++)_[o[C].id()]=0;for(;n.length>0;)for(var D=n.pop(),S=0;S<u[D].length;S++){var A=u[D][S];_[A]=_[A]+l[A]/l[D]*(1+_[D]),D!=o[e].id()&&c(D,f(D)+_[D])}},v=0;v<o.length;v++)g(v);var m={betweenness:function(e){var t=a.collection(e).id();return f(t)},betweennessNormalized:function(e){if(0==l)return 0;var t=a.collection(e).id();return f(t)/l}};return m.betweennessNormalised=m.betweennessNormalized,m}};elesfn$a.bc=elesfn$a.betweennessCentrality;var defaults$4=defaults({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),setOptions=function(e){return defaults$4(e)},getSimilarity=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},addLoops=function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},normalize=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var i=0;i<t;i++)n+=e[i*t+r];for(var a=0;a<t;a++)e[a*t+r]=e[a*t+r]/n}},mmult=function(e,t,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var a=0;a<n;a++)r[i*n+a]=0;for(var o=0;o<n;o++)for(var s=0;s<n;s++)r[i*n+s]+=e[i*n+o]*t[o*n+s]}return r},expand=function(e,t,n){for(var r=e.slice(0),i=1;i<n;i++)e=mmult(e,r,t);return e},inflate=function(e,t,n){for(var r=new Array(t*t),i=0;i<t*t;i++)r[i]=Math.pow(e[i],n);return normalize(r,t),r},hasConverged=function(e,t,n,r){for(var i=0;i<n;i++){if(Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r)!==Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r))return!1}return!0},assign=function(e,t,n,r){for(var i=[],a=0;a<t;a++){for(var o=[],s=0;s<t;s++)Math.round(1e3*e[a*t+s])/1e3>0&&o.push(n[s]);0!==o.length&&i.push(r.collection(o))}return i},isDuplicate=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},removeDuplicates=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&isDuplicate(e[t],e[n])&&e.splice(n,1);return e},markovClustering=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),i=setOptions(e),a={},o=0;o<t.length;o++)a[t[o].id()]=o;for(var s,u=t.length,l=u*u,c=new Array(l),f=0;f<l;f++)c[f]=0;for(var h=0;h<n.length;h++){var d=n[h],p=a[d.source().id()],g=a[d.target().id()],v=getSimilarity(d,i.attributes);c[p*u+g]+=v,c[g*u+p]+=v}addLoops(c,u,i.multFactor),normalize(c,u);for(var m=!0,y=0;m&&y<i.maxIterations;)m=!1,s=expand(c,u,i.expandFactor),c=inflate(s,u,i.inflateFactor),hasConverged(c,s,l,4)||(m=!0),y++;var b=assign(c,u,t,r);return b=removeDuplicates(b)},markovClustering$1={markovClustering:markovClustering,mcl:markovClustering},identity=function(e){return e},absDiff=function(e,t){return Math.abs(t-e)},addAbsDiff=function(e,t,n){return e+absDiff(t,n)},addSquaredDiff=function(e,t,n){return e+Math.pow(n-t,2)},sqrt=function(e){return Math.sqrt(e)},maxAbsDiff=function(e,t,n){return Math.max(e,absDiff(t,n))},getDistance=function(e,t,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:identity,o=r,s=0;s<e;s++)o=i(o,t(s),n(s));return a(o)},distances={euclidean:function(e,t,n){return e>=2?getDistance(e,t,n,0,addSquaredDiff,sqrt):getDistance(e,t,n,0,addAbsDiff)},squaredEuclidean:function(e,t,n){return getDistance(e,t,n,0,addSquaredDiff)},manhattan:function(e,t,n){return getDistance(e,t,n,0,addAbsDiff)},max:function(e,t,n){return getDistance(e,t,n,-1/0,maxAbsDiff)}};function clusteringDistance(e,t,n,r,i,a){var o;return o=fn(e)?e:distances[e]||distances.euclidean,0===t&&fn(e)?o(i,a):o(t,n,r,i,a)}distances["squared-euclidean"]=distances.squaredEuclidean,distances.squaredeuclidean=distances.squaredEuclidean;var defaults$5=defaults({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$1=function(e){return defaults$5(e)},getDist=function(e,t,n,r,i){var a="kMedoids"!==i?function(e){return n[e]}:function(e){return r[e](n)},o=n,s=t;return clusteringDistance(e,r.length,a,function(e){return r[e](t)},o,s)},randomCentroids=function(e,t,n){for(var r=n.length,i=new Array(r),a=new Array(r),o=new Array(t),s=null,u=0;u<r;u++)i[u]=e.min(n[u]).value,a[u]=e.max(n[u]).value;for(var l=0;l<t;l++){s=[];for(var c=0;c<r;c++)s[c]=Math.random()*(a[c]-i[c])+i[c];o[l]=s}return o},classify=function(e,t,n,r,i){for(var a=1/0,o=0,s=0;s<t.length;s++){var u=getDist(n,e,t[s],r,i);u<a&&(a=u,o=s)}return o},buildCluster=function(e,t,n){for(var r=[],i=null,a=0;a<t.length;a++)n[(i=t[a]).id()]===e&&r.push(i);return r},haveValuesConverged=function(e,t,n){return Math.abs(t-e)<=n},haveMatricesConverged=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){if(Math.abs(e[r][i]-t[r][i])>n)return!1}return!0},seenBefore=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},randomMedoids=function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var i=e[Math.floor(Math.random()*e.length)];seenBefore(i,n,r);)i=e[Math.floor(Math.random()*e.length)];n[r]=i}else for(var a=0;a<t;a++)n[a]=e[Math.floor(Math.random()*e.length)];return n},findCost=function(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=getDist("manhattan",t[i],e,n,"kMedoids");return r},kMeans=function(e){var t,n=this.cy(),r=this.nodes(),i=null,a=setOptions$1(e),o=new Array(a.k),s={};t=a.testMode?"number"==typeof a.testCentroids?randomCentroids(r,a.k,a.attributes):"object"===_typeof(a.testCentroids)?a.testCentroids:randomCentroids(r,a.k,a.attributes):randomCentroids(r,a.k,a.attributes);for(var u=!0,l=0;u&&l<a.maxIterations;){for(var c=0;c<r.length;c++)s[(i=r[c]).id()]=classify(i,t,a.distance,a.attributes,"kMeans");u=!1;for(var f=0;f<a.k;f++){var h=buildCluster(f,r,s);if(0!==h.length){for(var d=a.attributes.length,p=t[f],g=new Array(d),v=new Array(d),m=0;m<d;m++){v[m]=0;for(var y=0;y<h.length;y++)i=h[y],v[m]+=a.attributes[m](i);g[m]=v[m]/h.length,haveValuesConverged(g[m],p[m],a.sensitivityThreshold)||(u=!0)}t[f]=g,o[f]=n.collection(h)}}l++}return o},kMedoids=function(e){var t,n,r=this.cy(),i=this.nodes(),a=null,o=setOptions$1(e),s=new Array(o.k),u={},l=new Array(o.k);o.testMode?"number"==typeof o.testCentroids||(t="object"===_typeof(o.testCentroids)?o.testCentroids:randomMedoids(i,o.k)):t=randomMedoids(i,o.k);for(var c=!0,f=0;c&&f<o.maxIterations;){for(var h=0;h<i.length;h++)u[(a=i[h]).id()]=classify(a,t,o.distance,o.attributes,"kMedoids");c=!1;for(var d=0;d<t.length;d++){var p=buildCluster(d,i,u);if(0!==p.length){l[d]=findCost(t[d],p,o.attributes);for(var g=0;g<p.length;g++)(n=findCost(p[g],p,o.attributes))<l[d]&&(l[d]=n,t[d]=p[g],c=!0);s[d]=r.collection(p)}}f++}return s},updateCentroids=function(e,t,n,r,i){for(var a,o,s=0;s<t.length;s++)for(var u=0;u<e.length;u++)r[s][u]=Math.pow(n[s][u],i.m);for(var l=0;l<e.length;l++)for(var c=0;c<i.attributes.length;c++){a=0,o=0;for(var f=0;f<t.length;f++)a+=r[f][l]*i.attributes[c](t[f]),o+=r[f][l];e[l][c]=a/o}},updateMembership=function(e,t,n,r,i){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var o,s,u,l=2/(i.m-1),c=0;c<n.length;c++)for(var f=0;f<r.length;f++){o=0;for(var h=0;h<n.length;h++)s=getDist(i.distance,r[f],n[c],i.attributes,"cmeans"),u=getDist(i.distance,r[f],n[h],i.attributes,"cmeans"),o+=Math.pow(s/u,l);e[f][c]=1/o}},assign$1=function(e,t,n,r){for(var i,a,o=new Array(n.k),s=0;s<o.length;s++)o[s]=[];for(var u=0;u<t.length;u++){i=-1/0,a=-1;for(var l=0;l<t[0].length;l++)t[u][l]>i&&(i=t[u][l],a=l);o[a].push(e[u])}for(var c=0;c<o.length;c++)o[c]=r.collection(o[c]);return o},fuzzyCMeans=function(e){var t,n,r,i,a=this.cy(),o=this.nodes(),s=setOptions$1(e);r=new Array(o.length);for(var u=0;u<o.length;u++)r[u]=new Array(s.k);n=new Array(o.length);for(var l=0;l<o.length;l++)n[l]=new Array(s.k);for(var c=0;c<o.length;c++){for(var f=0,h=0;h<s.k;h++)n[c][h]=Math.random(),f+=n[c][h];for(var d=0;d<s.k;d++)n[c][d]=n[c][d]/f}t=new Array(s.k);for(var p=0;p<s.k;p++)t[p]=new Array(s.attributes.length);i=new Array(o.length);for(var g=0;g<o.length;g++)i[g]=new Array(s.k);for(var v=!0,m=0;v&&m<s.maxIterations;)v=!1,updateCentroids(t,o,n,i,s),updateMembership(n,r,t,o,s),haveMatricesConverged(n,r,s.sensitivityThreshold)||(v=!0),m++;return{clusters:assign$1(o,n,s,a),degreeOfMembership:n}},kClustering={kMeans:kMeans,kMedoids:kMedoids,fuzzyCMeans:fuzzyCMeans,fcm:fuzzyCMeans},defaults$6=defaults({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$2=function(e){var t=defaults$6(e),n=linkageAliases[t.linkage];return null!=n&&(t.linkage=n),t},mergeClosest=function(e,t,n,r,i){for(var a,o=0,s=1/0,u=i.attributes,l=function(e,t){return clusteringDistance(i.distance,u.length,function(t){return u[t](e)},function(e){return u[e](t)},e,t)},c=0;c<e.length;c++){var f=e[c].key,h=n[f][r[f]];h<s&&(o=f,s=h)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var d,p=t[o],g=t[r[o]];d="dendrogram"===i.mode?{left:p,right:g,key:p.key}:{value:p.value.concat(g.value),key:p.key},e[p.index]=d,e.splice(g.index,1),t[p.key]=d;for(var v=0;v<e.length;v++){var m=e[v];p.key===m.key?a=1/0:"min"===i.linkage?(a=n[p.key][m.key],n[p.key][m.key]>n[g.key][m.key]&&(a=n[g.key][m.key])):"max"===i.linkage?(a=n[p.key][m.key],n[p.key][m.key]<n[g.key][m.key]&&(a=n[g.key][m.key])):a="mean"===i.linkage?(n[p.key][m.key]*p.size+n[g.key][m.key]*g.size)/(p.size+g.size):"dendrogram"===i.mode?l(m.value,p.value):l(m.value[0],p.value[0]),n[p.key][m.key]=n[m.key][p.key]=a}for(var y=0;y<e.length;y++){var b=e[y].key;if(r[b]===p.key||r[b]===g.key){for(var x=b,w=0;w<e.length;w++){var E=e[w].key;n[b][E]<n[b][x]&&(x=E)}r[b]=x}e[y].index=y}return p.key=g.key=p.index=g.index=null,!0},getAllChildren=function e(t,n,r){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},buildDendrogram=function e(t,n){if(!t)return"";if(t.left&&t.right){var r=e(t.left,n),i=e(t.right,n),a=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:a.id()}}),n.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}return t.value?t.value.id():void 0},buildClustersFromTree=function e(t,n,r){if(!t)return[];var i=[],a=[],o=[];return 0===n?(t.left&&getAllChildren(t.left,i),t.right&&getAllChildren(t.right,a),o=i.concat(a),[r.collection(o)]):1===n?t.value?[r.collection(t.value)]:(t.left&&getAllChildren(t.left,i),t.right&&getAllChildren(t.right,a),[r.collection(i),r.collection(a)]):t.value?[r.collection(t.value)]:(t.left&&(i=e(t.left,n-1,r)),t.right&&(a=e(t.right,n-1,r)),i.concat(a))},hierarchicalClustering=function(e){for(var t=this.cy(),n=this.nodes(),r=setOptions$2(e),i=r.attributes,a=function(e,t){return clusteringDistance(r.distance,i.length,function(t){return i[t](e)},function(e){return i[e](t)},e,t)},o=[],s=[],u=[],l=[],c=0;c<n.length;c++){var f={value:"dendrogram"===r.mode?n[c]:[n[c]],key:c,index:c};o[c]=f,l[c]=f,s[c]=[],u[c]=0}for(var h=0;h<o.length;h++)for(var d=0;d<=h;d++){var p=void 0;p="dendrogram"===r.mode?h===d?1/0:a(o[h].value,o[d].value):h===d?1/0:a(o[h].value[0],o[d].value[0]),s[h][d]=p,s[d][h]=p,p<s[h][u[h]]&&(u[h]=d)}for(var g,v=mergeClosest(o,l,s,u,r);v;)v=mergeClosest(o,l,s,u,r);return"dendrogram"===r.mode?(g=buildClustersFromTree(o[0],r.dendrogramDepth,t),r.addDendrogram&&buildDendrogram(o[0],t)):(g=new Array(o.length),o.forEach(function(e,n){e.key=e.index=null,g[n]=t.collection(e.value)})),g},hierarchicalClustering$1={hierarchicalClustering:hierarchicalClustering,hca:hierarchicalClustering},defaults$7=defaults({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions$3=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||error("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(e){return e===n})||number(n)||error("Preference must be one of [".concat(r.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n)),defaults$7(e)},getSimilarity$1=function(e,t,n,r){var i=function(e,t){return r[t](e)};return-clusteringDistance(e,r.length,function(e){return i(t,e)},function(e){return i(n,e)},t,n)},getPreference=function(e,t){return"median"===t?median(e):"mean"===t?mean(e):"min"===t?min(e):"max"===t?max(e):t},findExemplars=function(e,t,n){for(var r=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&r.push(i);return r},assignClusters=function(e,t,n){for(var r=[],i=0;i<e;i++){for(var a=-1,o=-1/0,s=0;s<n.length;s++){var u=n[s];t[i*e+u]>o&&(a=u,o=t[i*e+u])}a>0&&r.push(a)}for(var l=0;l<n.length;l++)r[n[l]]=n[l];return r},assign$2=function(e,t,n){for(var r=assignClusters(e,t,n),i=0;i<n.length;i++){for(var a=[],o=0;o<r.length;o++)r[o]===n[i]&&a.push(o);for(var s=-1,u=-1/0,l=0;l<a.length;l++){for(var c=0,f=0;f<a.length;f++)c+=t[a[f]*e+a[l]];c>u&&(s=l,u=c)}n[i]=a[s]}return r=assignClusters(e,t,n)},affinityPropagation=function(e){for(var t,n,r,i,a,o,s=this.cy(),u=this.nodes(),l=setOptions$3(e),c={},f=0;f<u.length;f++)c[u[f].id()]=f;n=(t=u.length)*t,r=new Array(n);for(var h=0;h<n;h++)r[h]=-1/0;for(var d=0;d<t;d++)for(var p=0;p<t;p++)d!==p&&(r[d*t+p]=getSimilarity$1(l.distance,u[d],u[p],l.attributes));i=getPreference(r,l.preference);for(var g=0;g<t;g++)r[g*t+g]=i;a=new Array(n);for(var v=0;v<n;v++)a[v]=0;o=new Array(n);for(var m=0;m<n;m++)o[m]=0;for(var y=new Array(t),b=new Array(t),x=new Array(t),w=0;w<t;w++)y[w]=0,b[w]=0,x[w]=0;for(var E,T=new Array(t*l.minIterations),_=0;_<T.length;_++)T[_]=0;for(E=0;E<l.maxIterations;E++){for(var C=0;C<t;C++){for(var D=-1/0,S=-1/0,A=-1,k=0,R=0;R<t;R++)y[R]=a[C*t+R],(k=o[C*t+R]+r[C*t+R])>=D?(S=D,D=k,A=R):k>S&&(S=k);for(var O=0;O<t;O++)a[C*t+O]=(1-l.damping)*(r[C*t+O]-D)+l.damping*y[O];a[C*t+A]=(1-l.damping)*(r[C*t+A]-S)+l.damping*y[A]}for(var M=0;M<t;M++){for(var L=0,N=0;N<t;N++)y[N]=o[N*t+M],b[N]=Math.max(0,a[N*t+M]),L+=b[N];L-=b[M],b[M]=a[M*t+M],L+=b[M];for(var P=0;P<t;P++)o[P*t+M]=(1-l.damping)*Math.min(0,L-b[P])+l.damping*y[P];o[M*t+M]=(1-l.damping)*(L-b[M])+l.damping*y[M]}for(var I=0,B=0;B<t;B++){var $=o[B*t+B]+a[B*t+B]>0?1:0;T[E%l.minIterations*t+B]=$,I+=$}if(I>0&&(E>=l.minIterations-1||E==l.maxIterations-1)){for(var F=0,q=0;q<t;q++){x[q]=0;for(var j=0;j<l.minIterations;j++)x[q]+=T[j*t+q];0!==x[q]&&x[q]!==l.minIterations||F++}if(F===t)break}}for(var z=findExemplars(t,a,o),Y=assign$2(t,r,z),G={},V=0;V<z.length;V++)G[z[V]]=[];for(var U=0;U<u.length;U++){var X=Y[c[u[U].id()]];null!=X&&G[X].push(u[U])}for(var W=new Array(z.length),H=0;H<z.length;H++)W[H]=s.collection(G[z[H]]);return W},affinityPropagation$1={affinityPropagation:affinityPropagation,ap:affinityPropagation},elesfn$b={};[elesfn,elesfn$1,elesfn$2,elesfn$3,elesfn$4,elesfn$5,elesfn$6,elesfn$7,elesfn$8,elesfn$9,elesfn$a,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1].forEach(function(e){extend(elesfn$b,e)});var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,api=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};api.prototype={fulfill:function(e){return deliver(this,STATE_FULFILLED,"fulfillValue",e)},reject:function(e){return deliver(this,STATE_REJECTED,"rejectReason",e)},then:function(e,t){var n=new api;return this.onFulfilled.push(resolver(e,n,"fulfill")),this.onRejected.push(resolver(t,n,"reject")),execute(this),n.proxy}};var deliver=function(e,t,n,r){return e.state===STATE_PENDING&&(e.state=t,e[n]=r,execute(e)),e},execute=function(e){e.state===STATE_FULFILLED?execute_handlers(e,"onFulfilled",e.fulfillValue):e.state===STATE_REJECTED&&execute_handlers(e,"onRejected",e.rejectReason)},execute_handlers=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},resolver=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(e){return void t.reject(e)}resolve(t,i)}}},resolve=function e(t,n){if(t!==n&&t.proxy!==n){var r;if("object"===_typeof(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(e){return void t.reject(e)}if("function"!=typeof r)t.fulfill(n);else{var i=!1;try{r.call(n,function(r){i||(i=!0,r===n?t.reject(new TypeError("circular thenable chain")):e(t,r))},function(e){i||(i=!0,t.reject(e))})}catch(e){i||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};api.all=function(e){return new api(function(t,n){for(var r=new Array(e.length),i=0,a=function(n,a){r[n]=a,++i===e.length&&t(r)},o=0;o<e.length;o++)!function(t){var r=e[t];null!=r&&null!=r.then?r.then(function(e){a(t,e)},function(e){n(e)}):a(t,r)}(o)})},api.resolve=function(e){return new api(function(t,n){t(e)})},api.reject=function(e){return new api(function(t,n){n(e)})};var Promise$1="undefined"!=typeof Promise?Promise:api,Animation=function(e,t,n){var r=core$1(e),i=!r,a=this._private=extend({duration:1e3},t,n);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&fn(a.complete)&&a.completes.push(a.complete),i){var o=e.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(r){var s=e.pan();a.startPan={x:s.x,y:s.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];null!=r&&(e[t]=e[n],e[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],a=i.name,o=e.startStyle[a];e.startStyle[a]=i,e.style[r]=o}return t&&this.play(),this},promise:function(e){var t,n=this._private;switch(e){case"frame":t=n.frames;break;default:case"complete":case"completed":t=n.completes}return new Promise$1(function(e,n){t.push(function(){e()})})}}),anifn.complete=anifn.completed,anifn.run=anifn.play,anifn.running=anifn.playing;var define={animated:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var t=e[0];return t?t._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++){e[t]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,a=!n,o=!a;if(!i.styleEnabled())return this;var s=i.style();if(e=extend({},e,t),0===Object.keys(e).length)return new Animation(r[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(o&&(e.style=s.getPropsList(e.style||e.css),e.css=void 0),o&&null!=e.renderedPosition){var u=e.renderedPosition,l=i.pan(),c=i.zoom();e.position=renderedToModelPosition(u,c,l)}if(a&&null!=e.panBy){var f=e.panBy,h=i.pan();e.pan={x:h.x+f.x,y:h.y+f.y}}var d=e.center||e.centre;if(a&&null!=d){var p=i.getCenterPan(d.eles,e.zoom);null!=p&&(e.pan=p)}if(a&&null!=e.fit){var g=e.fit,v=i.getFitViewport(g.eles||g.boundingBox,g.padding);null!=v&&(e.pan=v.pan,e.zoom=v.zoom)}if(a&&plainObject(e.zoom)){var m=i.getZoomedViewport(e.zoom);null!=m&&(m.zoomed&&(e.zoom=m.zoom),m.panned&&(e.pan=m.pan))}return new Animation(r[0],e)}},animate:function(){return function(e,t){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=extend({},e,t));for(var r=0;r<n.length;r++){var i=n[r],a=i.animated()&&(void 0===e.queue||e.queue);i.animation(e,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var a=n[i]._private,o=a.animation.current,s=0;s<o.length;s++){var u=o[s]._private;t&&(u.duration=0)}e&&(a.animation.queue=[]),t||(a.animation.current=[])}return r.notify("draw"),this}}},define$1={data:function(e){return e=extend({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,n){var r=e,i=void 0!==this.length,a=i?this:[this],o=i?this[0]:this;if(string$1(t)){var s;if(r.allowGetting&&void 0===n)return o&&(r.beforeGet(o),s=o._private[r.field][t]),s;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[t]){var u=_defineProperty$1({},t,n);r.beforeSet(this,u);for(var l=0,c=a.length;l<c;l++){var f=a[l];r.canSet(f)&&(f._private[r.field][t]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&plainObject(t)){var h,d,p=t,g=Object.keys(p);r.beforeSet(this,p);for(var v=0;v<g.length;v++){if(d=p[h=g[v]],!r.immutableKeys[h])for(var m=0;m<a.length;m++){var y=a[m];r.canSet(y)&&(y._private[r.field][h]=d)}}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&fn(t)){var b=t;this.on(r.bindingEvent,b)}else if(r.allowGetting&&void 0===t){var x;return o&&(r.beforeGet(o),x=o._private[r.field]),x}return this}},removeData:function(e){return e=extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var n=e,r=void 0!==this.length?this:[this];if(string$1(t)){for(var i=t.split(/\s+/),a=i.length,o=0;o<a;o++){var s=i[o];if(!emptyString(s))if(!n.immutableKeys[s])for(var u=0,l=r.length;u<l;u++)r[u]._private[n.field][s]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===t){for(var c=0,f=r.length;c<f;c++)for(var h=r[c]._private[n.field],d=Object.keys(h),p=0;p<d.length;p++){var g=d[p];!n.immutableKeys[g]&&(h[g]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},define$2={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return new Promise$1(function(e,t){var i=r.concat([function(t){n.off.apply(n,a),e(t)}]),a=i.concat([]);n.on.apply(n,i)})}}},define$3={};[define,define$1,define$2].forEach(function(e){extend(define$3,e)});var elesfn$c={animate:define$3.animate(),animation:define$3.animation(),animated:define$3.animated(),clearQueue:define$3.clearQueue(),delay:define$3.delay(),delayAnimation:define$3.delayAnimation(),stop:define$3.stop()},elesfn$d={classes:function(e){if(void 0===e){var t=[];return this[0]._private.classes.forEach(function(e){return t.push(e)}),t}array(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],r=new Set$1(e),i=0;i<this.length;i++){for(var a=this[i],o=a._private,s=o.classes,u=!1,l=0;l<e.length;l++){var c=e[l];if(!s.has(c)){u=!0;break}}u||(u=s.size!==e.length),u&&(o.classes=r,n.push(a))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){array(e)||(e=e.match(/\S+/g)||[]);for(var n=void 0===t,r=[],i=0,a=this.length;i<a;i++)for(var o=this[i],s=o._private.classes,u=!1,l=0;l<e.length;l++){var c=e[l],f=s.has(c),h=!1;t||n&&!f?(s.add(c),h=!0):(!t||n&&f)&&(s.delete(c),h=!0),!u&&h&&(r.push(o),u=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};elesfn$d.className=elesfn$d.classNames=elesfn$d.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:number$1,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+",tokens.value=tokens.string+"|"+tokens.number,tokens.className=tokens.variable,tokens.id=tokens.variable,function(){var e,t,n;for(e=tokens.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],tokens.comparatorOp+="|@"+t;for(e=tokens.comparatorOp.split("|"),n=0;n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="!==t&&(tokens.comparatorOp+="|\\!"+t)}();var newQuery=function(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return descending(e.selector,t.selector)}),lookup=function(){for(var e,t={},n=0;n<stateSelectors.length;n++)t[(e=stateSelectors[n]).selector]=e.matches;return t}(),stateSelectorMatches=function(e,t){return lookup[e](t)},stateSelectorRegex="("+stateSelectors.map(function(e){return e.selector}).join("|")+")",cleanMetaChars=function(e){return e.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),function(e,t){return t})},replaceLastQuery=function(e,t,n){e[e.length-1]=n},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function(e,t,n){var r=_slicedToArray$1(n,1)[0];t.checks.push({type:Type.GROUP,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function(e,t,n){var r=_slicedToArray$1(n,1)[0];t.checks.push({type:Type.STATE,value:r})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function(e,t,n){var r=_slicedToArray$1(n,1)[0];t.checks.push({type:Type.ID,value:cleanMetaChars(r)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function(e,t,n){var r=_slicedToArray$1(n,1)[0];t.checks.push({type:Type.CLASS,value:cleanMetaChars(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(e,t,n){var r=_slicedToArray$1(n,1)[0];t.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(e,t,n){var r=_slicedToArray$1(n,3),i=r[0],a=r[1],o=r[2];o=null!=new RegExp("^"+tokens.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),t.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(i),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(e,t,n){var r=_slicedToArray$1(n,2),i=r[0],a=r[1];t.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(a),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(e,t,n){var r=_slicedToArray$1(n,3),i=r[0],a=r[1],o=r[2];t.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(i),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,i=e.compoundCount,a=e[e.length-1];return null!=n&&(a.subject=n,e.currentSubject=null),a.edgeCount=r,a.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]=newQuery()}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function(e,t){if(null==e.currentSubject){var n=newQuery(),r=t,i=newQuery();return n.checks.push({type:Type.DIRECTED_EDGE,source:r,target:i}),replaceLastQuery(e,t,n),e.edgeCount++,i}var a=newQuery(),o=t,s=newQuery();return a.checks.push({type:Type.NODE_SOURCE,source:o,target:s}),replaceLastQuery(e,t,a),e.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var n=newQuery(),r=t,i=newQuery();return n.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[r,i]}),replaceLastQuery(e,t,n),e.edgeCount++,i}var a=newQuery(),o=t,s=newQuery();return a.checks.push({type:Type.NODE_NEIGHBOR,node:o,neighbor:s}),replaceLastQuery(e,t,a),s}},{name:"child",separator:!0,regex:tokens.child,populate:function(e,t){if(null==e.currentSubject){var n=newQuery(),r=newQuery(),i=e[e.length-1];return n.checks.push({type:Type.CHILD,parent:i,child:r}),replaceLastQuery(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var a=newQuery(),o=e[e.length-1],s=newQuery(),u=newQuery(),l=newQuery(),c=newQuery();return a.checks.push({type:Type.COMPOUND_SPLIT,left:o,right:s,subject:u}),u.checks=t.checks,t.checks=[{type:Type.TRUE}],c.checks.push({type:Type.TRUE}),s.checks.push({type:Type.PARENT,parent:c,child:l}),replaceLastQuery(e,o,a),e.currentSubject=u,e.compoundCount++,l}var f=newQuery(),h=newQuery(),d=[{type:Type.PARENT,parent:f,child:h}];return f.checks=t.checks,t.checks=d,e.compoundCount++,h}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function(e,t){if(null==e.currentSubject){var n=newQuery(),r=newQuery(),i=e[e.length-1];return n.checks.push({type:Type.DESCENDANT,ancestor:i,descendant:r}),replaceLastQuery(e,t,n),e.compoundCount++,r}if(e.currentSubject===t){var a=newQuery(),o=e[e.length-1],s=newQuery(),u=newQuery(),l=newQuery(),c=newQuery();return a.checks.push({type:Type.COMPOUND_SPLIT,left:o,right:s,subject:u}),u.checks=t.checks,t.checks=[{type:Type.TRUE}],c.checks.push({type:Type.TRUE}),s.checks.push({type:Type.ANCESTOR,ancestor:c,descendant:l}),replaceLastQuery(e,o,a),e.currentSubject=u,e.compoundCount++,l}var f=newQuery(),h=newQuery(),d=[{type:Type.ANCESTOR,ancestor:f,descendant:h}];return f.checks=t.checks,t.checks=d,e.compoundCount++,h}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return warn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1].checks[0],r=null==n?null:n.type;r===Type.DIRECTED_EDGE?n.type=Type.NODE_TARGET:r===Type.UNDIRECTED_EDGE&&(n.type=Type.NODE_NEIGHBOR,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];exprs.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var consumeExpr=function(e){for(var t,n,r,i=0;i<exprs.length;i++){var a=exprs[i],o=a.name,s=e.match(a.regexObj);if(null!=s){n=s,t=a,r=o;var u=s[0];e=e.substring(u.length);break}}return{expr:t,match:n,name:r,remaining:e}},consumeWhitespace=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},parse=function(e){var t=this.inputText=e,n=this[0]=newQuery();for(this.length=1,t=consumeWhitespace(t);;){var r=consumeExpr(t);if(null==r.expr)return warn("The selector `"+e+"`is invalid"),!1;var i=r.match.slice(1),a=r.expr.populate(this,n,i);if(!1===a)return!1;if(null!=a&&(n=a),(t=r.remaining).match(/^\s*$/))break}var o=this[this.length-1];null!=this.currentSubject&&(o.subject=this.currentSubject),o.edgeCount=this.edgeCount,o.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var u=this[s];if(u.compoundCount>0&&u.edgeCount>0)return warn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(u.edgeCount>1)return warn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===u.edgeCount&&warn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString=function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return string$1(t)?'"'+t+'"':e(t)},n=function(e){return" "+e+" "},r=function(r,a){var o=r.type,s=r.value;switch(o){case Type.GROUP:var u=e(s);return u.substring(0,u.length-1);case Type.DATA_COMPARE:var l=r.field,c=r.operator;return"["+l+n(e(c))+t(s)+"]";case Type.DATA_BOOL:var f=r.operator,h=r.field;return"["+e(f)+h+"]";case Type.DATA_EXIST:return"["+r.field+"]";case Type.META_COMPARE:var d=r.operator;return"[["+r.field+n(e(d))+t(s)+"]]";case Type.STATE:return s;case Type.ID:return"#"+s;case Type.CLASS:return"."+s;case Type.PARENT:case Type.CHILD:return i(r.parent,a)+n(">")+i(r.child,a);case Type.ANCESTOR:case Type.DESCENDANT:return i(r.ancestor,a)+" "+i(r.descendant,a);case Type.COMPOUND_SPLIT:var p=i(r.left,a),g=i(r.subject,a),v=i(r.right,a);return p+(p.length>0?" ":"")+g+v;case Type.TRUE:return""}},i=function(e,t){return e.checks.reduce(function(n,i,a){return n+(t===e&&0===a?"$":"")+r(i,t)},"")},a="",o=0;o<this.length;o++){var s=this[o];a+=i(s,s.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a},parse$1={parse:parse,toString:toString},valCmp=function(e,t,n){var r,i,a,o=string$1(e),s=number(e),u=string$1(n),l=!1,c=!1,f=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),l=!0),(o||u||l)&&(i=o||s?""+e:"",a=""+n),l&&(e=i=i.toLowerCase(),n=a=a.toLowerCase()),t){case"*=":r=i.indexOf(a)>=0;break;case"$=":r=i.indexOf(a,i.length-a.length)>=0;break;case"^=":r=0===i.indexOf(a);break;case"=":r=e===n;break;case">":f=!0,r=e>n;break;case">=":f=!0,r=e>=n;break;case"<":f=!0,r=e<n;break;case"<=":f=!0,r=e<=n;break;default:r=!1}return!c||null==e&&f||(r=!r),r},boolCmp=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}},existCmp=function(e){return void 0!==e},data=function(e,t){return e.data(t)},meta=function(e,t){return e[t]()},match=[],matches=function(e,t){return e.checks.every(function(e){return match[e.type](e,t)})};match[Type.GROUP]=function(e,t){var n=e.value;return"*"===n||n===t.group()},match[Type.STATE]=function(e,t){var n=e.value;return stateSelectorMatches(n,t)},match[Type.ID]=function(e,t){var n=e.value;return t.id()===n},match[Type.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)},match[Type.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return valCmp(meta(t,n),r,i)},match[Type.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,i=e.value;return valCmp(data(t,n),r,i)},match[Type.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return boolCmp(data(t,n),r)},match[Type.DATA_EXIST]=function(e,t){var n=e.field;e.operator;return existCmp(data(t,n))},match[Type.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],i=t.source(),a=t.target();return matches(n,i)&&matches(r,a)||matches(r,i)&&matches(n,a)},match[Type.NODE_NEIGHBOR]=function(e,t){return matches(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&matches(e.neighbor,t)})},match[Type.DIRECTED_EDGE]=function(e,t){return matches(e.source,t.source())&&matches(e.target,t.target())},match[Type.NODE_SOURCE]=function(e,t){return matches(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&matches(e.target,t)})},match[Type.NODE_TARGET]=function(e,t){return matches(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&matches(e.source,t)})},match[Type.CHILD]=function(e,t){return matches(e.child,t)&&matches(e.parent,t.parent())},match[Type.PARENT]=function(e,t){return matches(e.parent,t)&&t.children().some(function(t){return matches(e.child,t)})},match[Type.DESCENDANT]=function(e,t){return matches(e.descendant,t)&&t.ancestors().some(function(t){return matches(e.ancestor,t)})},match[Type.ANCESTOR]=function(e,t){return matches(e.ancestor,t)&&t.descendants().some(function(t){return matches(e.descendant,t)})},match[Type.COMPOUND_SPLIT]=function(e,t){return matches(e.subject,t)&&matches(e.left,t)&&matches(e.right,t)},match[Type.TRUE]=function(){return!0},match[Type.COLLECTION]=function(e,t){return e.value.has(t)},match[Type.FILTER]=function(e,t){return(0,e.value)(t)};var filter=function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===Type.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(e){for(var n=0;n<t.length;n++){var r=t[n];if(matches(r,e))return!0}return!1};return null==t.text()&&(n=function(){return!0}),e.filter(n)},matches$1=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(matches(n,e))return!0}return!1},matching={matches:matches$1,filter:filter},Selector=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||string$1(e)&&e.match(/^\s*$/)||(elementOrCollection(e)?this.addQuery({checks:[{type:Type.COLLECTION,value:e.collection()}]}):fn(e)?this.addQuery({checks:[{type:Type.FILTER,value:e}]}):string$1(e)?this.parse(e)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1,matching].forEach(function(e){return extend(selfn,e)}),selfn.text=function(){return this.inputText},selfn.size=function(){return this.length},selfn.eq=function(e){return this[e]},selfn.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},selfn.addQuery=function(e){this[this.length++]=e},selfn.selector=selfn.toString;var elesfn$e={allAre:function(e){var t=new Selector(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new Selector(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var n=0;n<this.length;n++){if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every(function(t){return e.hasElementWithId(t.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};elesfn$e.allAreNeighbours=elesfn$e.allAreNeighbors,elesfn$e.has=elesfn$e.contains,elesfn$e.equal=elesfn$e.equals=elesfn$e.same;var cache=function(e,t){return function(n,r,i,a){var o,s=n;if(null==s?o="":elementOrCollection(s)&&1===s.length&&(o=s.id()),1===this.length&&o){var u=this[0]._private,l=u.traversalCache=u.traversalCache||{},c=l[t]=l[t]||[],f=hashString(o),h=c[f];return h||(c[f]=e.call(this,n,r,i,a))}return e.call(this,n,r,i,a)}},elesfn$f={parent:function(e){var t=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&t.push(i)}return this.spawn(t,{unique:!0}).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n].parents();t=(t=t||r).intersect(r)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:cache(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)t.push(r[i]);return this.spawn(t,{unique:!0}).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(n){for(var r=0;r<n.length;r++){var i=n[r];t.push(i),i.children().nonempty()&&e(i.children())}}(this.children()),this.spawn(t,{unique:!0}).filter(e)}},fn$1,elesfn$g;function forEachCompound(e,t,n,r){for(var i=[],a=new Set$1,o=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var u=e[s];n?i.push(u):o&&r(i,a,u)}for(;i.length>0;){var l=i.shift();t(l),a.add(l.id()),o&&r(i,a,l)}return e}function addChildren(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var a=r[i];t.has(a.id())||e.push(a)}}function addParent(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function addParentAndChildren(e,t,n){addParent(e,t,n),addChildren(e,t,n)}elesfn$f.forEachDown=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addChildren)},elesfn$f.forEachUp=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParent)},elesfn$f.forEachUpAndDown=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParentAndChildren)},elesfn$f.ancestors=elesfn$f.parents,fn$1=elesfn$g={data:define$3.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define$3.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define$3.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define$3.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define$3.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define$3.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},fn$1.attr=fn$1.data,fn$1.removeAttr=fn$1.removeData;var data$1=elesfn$g,elesfn$h={},fn$2,elesfn$i;function defineDegreeFunction(e){return function(t){if(void 0===t&&(t=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,a=0;a<i.length;a++){var o=i[a];!t&&o.isLoop()||(n+=e(r,o))}return n}}}function defineDegreeBoundsFunction(e,t){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][e](n);void 0===o||void 0!==r&&!t(o,r)||(r=o)}return r}}extend(elesfn$h,{degree:defineDegreeFunction(function(e,t){return t.source().same(t.target())?2:1}),indegree:defineDegreeFunction(function(e,t){return t.target().same(e)?1:0}),outdegree:defineDegreeFunction(function(e,t){return t.source().same(e)?1:0})}),extend(elesfn$h,{minDegree:defineDegreeBoundsFunction("degree",function(e,t){return e<t}),maxDegree:defineDegreeBoundsFunction("degree",function(e,t){return e>t}),minIndegree:defineDegreeBoundsFunction("indegree",function(e,t){return e<t}),maxIndegree:defineDegreeBoundsFunction("indegree",function(e,t){return e>t}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(e,t){return e<t}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(e,t){return e>t})}),extend(elesfn$h,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var beforePositionSet=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(!i.locked()){var a=i._private.position,o={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};!i.isParent()||0===o.x&&0===o.y||i.children().shift(o,n),i.shiftCachedBoundingBox(o)}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){beforePositionSet(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};fn$2=elesfn$i={position:define$3.data(positionDef),silentPosition:define$3.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){beforePositionSet(e,t,!0)}})),positions:function(e,t){if(plainObject(e))t?this.silentPosition(e):this.position(e);else if(fn(e)){var n=e,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var a,o=this[i];(a=n(o,i))&&(t?o.silentPosition(a):o.position(a))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(plainObject(e)?(r={x:number(e.x)?e.x:0,y:number(e.y)?e.y:0},n=t):string$1(e)&&number(t)&&((r={x:0,y:0})[e]=t),null!=r){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=o.position(),u={x:s.x+r.x,y:s.y+r.y};n?o.silentPosition(u):o.position(u)}i.endBatch()}return this},silentShift:function(e,t){return plainObject(e)?this.shift(e,!0):string$1(e)&&number(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),o=plainObject(e)?e:void 0,s=void 0!==o||void 0!==t&&string$1(e);if(n&&n.isNode()){if(!s){var u=n.position();return o=modelToRenderedPosition(u,i,a),void 0===e?o:o[e]}for(var l=0;l<this.length;l++){var c=this[l];void 0!==t?c.position(e,(t-a[e])/i):void 0!==o&&c.position(renderedToModelPosition(o,i,a))}}else if(!s)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=plainObject(e)?e:void 0,a=void 0!==i||void 0!==t&&string$1(e),o=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var s=n.position(),u=o?n.parent():null,l=u&&u.length>0,c=l;l&&(u=u[0]);var f=c?u.position():{x:0,y:0};return i={x:s.x-f.x,y:s.y-f.y},void 0===e?i:i[e]}for(var h=0;h<this.length;h++){var d=this[h],p=o?d.parent():null,g=p&&p.length>0,v=g;g&&(p=p[0]);var m=v?p.position():{x:0,y:0};void 0!==t?d.position(e,t+m[e]):void 0!==i&&d.position({x:i.x+m.x,y:i.y+m.y})}}else if(!a)return;return this}},fn$2.modelPosition=fn$2.point=fn$2.position,fn$2.modelPositions=fn$2.points=fn$2.positions,fn$2.renderedPoint=fn$2.renderedPosition,fn$2.relativePoint=fn$2.relativePosition;var position=elesfn$i,fn$3,elesfn$j;fn$3=elesfn$j={},elesfn$j.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),a=t.x1*r+i.x,o=t.x2*r+i.x,s=t.y1*r+i.y,u=t.y2*r+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}},elesfn$j.dirtyCompoundBoundsCache=function(){var e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(e){if(e.isParent()){var t=e._private;t.compoundBoundsClean=!1,t.bbCache=null,e.emitAndNotify("bounds")}}),this):this},elesfn$j.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(e){if(e.isParent()){var t=e._private,n=e.children(),r="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),o=t.position;0!==a.w&&0!==a.h||((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var u=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(u=100*u/i.width.val);var l=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(l=100*l/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var f=m(i.width.val-a.w,s,u),h=f.biasDiff,d=f.biasComplementDiff,p=m(i.height.val-a.h,l,c),g=p.biasDiff,v=p.biasComplementDiff;t.autoPadding=function(e,t,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,i.width.val),o.x=(-h+a.x1+a.x2+d)/2,t.autoHeight=Math.max(a.h,i.height.val),o.y=(-g+a.y1+a.y2+v)/2}function m(e,t,n){var r=0,i=0,a=t+n;return e>0&&a>0&&(r=t/a*e,i=n/a*e),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],a=i._private;a.compoundBoundsClean||(n(i),t.batching()||(a.compoundBoundsClean=!0))}return this};var noninf=function(e){return e===1/0||e===-1/0?0:e},updateBounds=function(e,t,n,r,i){r-t!=0&&i-n!=0&&null!=t&&null!=n&&null!=r&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},updateBoundsFromBox=function(e,t){return null==t?e:updateBounds(e,t.x1,t.y1,t.x2,t.y2)},prefixedProperty=function(e,t,n){return getPrefixedProperty(e,t,n)},updateBoundsFromArrow=function(e,t,n){if(!t.cy().headless()){var r,i,a=t._private,o=a.rstyle,s=o.arrowWidth/2;if("none"!==t.pstyle(n+"-arrow-shape").value){"source"===n?(r=o.srcX,i=o.srcY):"target"===n?(r=o.tgtX,i=o.tgtY):(r=o.midX,i=o.midY);var u=a.arrowBounds=a.arrowBounds||{},l=u[n]=u[n]||{};l.x1=r-s,l.y1=i-s,l.x2=r+s,l.y2=i+s,l.w=l.x2-l.x1,l.h=l.y2-l.y1,expandBoundingBox(l,1),updateBounds(e,l.x1,l.y1,l.x2,l.y2)}}},updateBoundsFromLabel=function(e,t,n){if(!t.cy().headless()){var r;r=n?n+"-":"";var i=t._private,a=i.rstyle;if(t.pstyle(r+"label").strValue){var o,s,u,l,c=t.pstyle("text-halign"),f=t.pstyle("text-valign"),h=prefixedProperty(a,"labelWidth",n),d=prefixedProperty(a,"labelHeight",n),p=prefixedProperty(a,"labelX",n),g=prefixedProperty(a,"labelY",n),v=t.pstyle(r+"text-margin-x").pfValue,m=t.pstyle(r+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle(r+"text-rotation"),x=t.pstyle("text-outline-width").pfValue,w=t.pstyle("text-border-width").pfValue/2,E=t.pstyle("text-background-padding").pfValue,T=d,_=h,C=_/2,D=T/2;if(y)o=p-C,s=p+C,u=g-D,l=g+D;else{switch(c.value){case"left":o=p-_,s=p;break;case"center":o=p-C,s=p+C;break;case"right":o=p,s=p+_}switch(f.value){case"top":u=g-T,l=g;break;case"center":u=g-D,l=g+D;break;case"bottom":u=g,l=g+T}}o+=v-Math.max(x,w)-E,s+=v+Math.max(x,w)+E,u+=m-Math.max(x,w)-E,l+=m+Math.max(x,w)+E;var S=n||"main",A=i.labelBounds,k=A[S]=A[S]||{};k.x1=o,k.y1=u,k.x2=s,k.y2=l,k.w=s-o,k.h=l-u,expandBoundingBox(k,1);var R=y&&"autorotate"===b.strValue,O=null!=b.pfValue&&0!==b.pfValue;if(R||O){var M=R?prefixedProperty(i.rstyle,"labelAngle",n):b.pfValue,L=Math.cos(M),N=Math.sin(M),P=(o+s)/2,I=(u+l)/2;if(!y){switch(c.value){case"left":P=s;break;case"right":P=o}switch(f.value){case"top":I=l;break;case"bottom":I=u}}var B=function(e,t){return{x:(e-=P)*L-(t-=I)*N+P,y:e*N+t*L+I}},$=B(o,u),F=B(o,l),q=B(s,u),j=B(s,l);o=Math.min($.x,F.x,q.x,j.x),s=Math.max($.x,F.x,q.x,j.x),u=Math.min($.y,F.y,q.y,j.y),l=Math.max($.y,F.y,q.y,j.y)}updateBounds(e,o,u,s,l),updateBounds(i.labelBounds.all,o,u,s,l)}return e}},boundingBoxImpl=function(e,t){var n,r,i,a,o,s,u=e._private.cy,l=u.styleEnabled(),c=u.headless(),f=makeBoundingBox(),h=e._private,d=e.isNode(),p=e.isEdge(),g=h.rstyle,v=d&&l?e.pstyle("bounds-expansion").pfValue:[0],m=function(e){return"none"!==e.pstyle("display").value},y=!l||m(e)&&(!p||m(e.source())&&m(e.target()));if(y){var b=0;l&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(b=e.pstyle("overlay-padding").value);var x=0;if(l&&(x=e.pstyle("width").pfValue/2),d&&t.includeNodes){var w=e.position();o=w.x,s=w.y;var E=e.outerWidth()/2,T=e.outerHeight()/2;updateBounds(f,n=o-E,i=s-T,r=o+E,a=s+T)}else if(p&&t.includeEdges)if(l&&!c&&(n=Math.min(g.srcX,g.midX,g.tgtX),r=Math.max(g.srcX,g.midX,g.tgtX),i=Math.min(g.srcY,g.midY,g.tgtY),a=Math.max(g.srcY,g.midY,g.tgtY),updateBounds(f,n-=x,i-=x,r+=x,a+=x)),l&&!c&&"haystack"===e.pstyle("curve-style").strValue){var _=g.haystackPts||[];if(n=_[0].x,i=_[0].y,n>(r=_[1].x)){var C=n;n=r,r=C}if(i>(a=_[1].y)){var D=i;i=a,a=D}updateBounds(f,n-x,i-x,r+x,a+x)}else{for(var S=g.bezierPts||g.linePts||[],A=0;A<S.length;A++){var k=S[A];n=k.x-x,r=k.x+x,i=k.y-x,a=k.y+x,updateBounds(f,n,i,r,a)}if(0===S.length){var R=e.source().position(),O=e.target().position();if((n=R.x)>(r=O.x)){var M=n;n=r,r=M}if((i=R.y)>(a=O.y)){var L=i;i=a,a=L}updateBounds(f,n-=x,i-=x,r+=x,a+=x)}}if(l&&t.includeEdges&&p&&(updateBoundsFromArrow(f,e,"mid-source"),updateBoundsFromArrow(f,e,"mid-target"),updateBoundsFromArrow(f,e,"source"),updateBoundsFromArrow(f,e,"target")),l)if("yes"===e.pstyle("ghost").value){var N=e.pstyle("ghost-offset-x").pfValue,P=e.pstyle("ghost-offset-y").pfValue;updateBounds(f,f.x1+N,f.y1+P,f.x2+N,f.y2+P)}var I=h.bodyBounds=h.bodyBounds||{};assignBoundingBox(I,f),expandBoundingBoxSides(I,v),expandBoundingBox(I,1),l&&(n=f.x1,r=f.x2,i=f.y1,a=f.y2,updateBounds(f,n-b,i-b,r+b,a+b));var B=h.overlayBounds=h.overlayBounds||{};assignBoundingBox(B,f),expandBoundingBoxSides(B,v),expandBoundingBox(B,1);var $=h.labelBounds=h.labelBounds||{};null!=$.all?clearBoundingBox($.all):$.all=makeBoundingBox(),l&&t.includeLabels&&(t.includeMainLabels&&updateBoundsFromLabel(f,e,null),p&&(t.includeSourceLabels&&updateBoundsFromLabel(f,e,"source"),t.includeTargetLabels&&updateBoundsFromLabel(f,e,"target")))}return f.x1=noninf(f.x1),f.y1=noninf(f.y1),f.x2=noninf(f.x2),f.y2=noninf(f.y2),f.w=noninf(f.x2-f.x1),f.h=noninf(f.y2-f.y1),f.w>0&&f.h>0&&y&&(expandBoundingBoxSides(f,v),expandBoundingBox(f,1)),f},getKey=function(e){var t=0,n=function(e){return(e?1:0)<<t++},r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),r+=n(e.includeTargetLabels),r+=n(e.includeOverlays)},getBoundingBoxPosKey=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),r=function(e){return Math.round(e)};return hashIntsArray([r(t.x),r(t.y),r(n.x),r(n.y)])}return 0},cachedBoundingBoxImpl=function(e,t){var n,r=e._private,i=e.isEdge(),a=(null==t?defBbOptsKey:getKey(t))===defBbOptsKey,o=getBoundingBoxPosKey(e),s=r.bbCachePosKey===o,u=!(t.useCache&&s)||null==r.bbCache;if(u?(s||e.recalculateRenderedStyle(),n=boundingBoxImpl(e,defBbOpts),r.bbCache=n,r.bbCacheShift.x=r.bbCacheShift.y=0,r.bbCachePosKey=o):n=r.bbCache,!u&&(0!==r.bbCacheShift.x||0!==r.bbCacheShift.y)){var l=assignShiftToBoundingBox,c=r.bbCacheShift,f=function(e,t){null!=e&&l(e,t)};l(n,c);var h=r.bodyBounds,d=r.overlayBounds,p=r.labelBounds,g=r.arrowBounds;f(h,c),f(d,c),null!=g&&(f(g.source,c),f(g.target,c),f(g["mid-source"],c),f(g["mid-target"],c)),null!=p&&(f(p.main,c),f(p.all,c),f(p.source,c),f(p.target,c))}if(r.bbCacheShift.x=r.bbCacheShift.y=0,!a){var v=e.isNode();n=makeBoundingBox(),(t.includeNodes&&v||t.includeEdges&&!v)&&(t.includeOverlays?updateBoundsFromBox(n,r.overlayBounds):updateBoundsFromBox(n,r.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?updateBoundsFromBox(n,r.labelBounds.all):(t.includeMainLabels&&updateBoundsFromBox(n,r.labelBounds.main),t.includeSourceLabels&&updateBoundsFromBox(n,r.labelBounds.source),t.includeTargetLabels&&updateBoundsFromBox(n,r.labelBounds.target))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults(defBbOpts);elesfn$j.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=makeBoundingBox();var n=filledBbOpts(e=e||defBbOpts);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],a=i._private,o=getBoundingBoxPosKey(i),s=a.bbCachePosKey===o,u=n.useCache&&s;i.recalculateRenderedStyle(u)}this.updateCompoundBounds();for(var l=0;l<this.length;l++){var c=this[l];updateBoundsFromBox(t,cachedBoundingBoxImpl(c,n))}}else e=void 0===e?defBbOpts:filledBbOpts(e),t=cachedBoundingBoxImpl(this[0],e);return t.x1=noninf(t.x1),t.y1=noninf(t.y1),t.x2=noninf(t.x2),t.y2=noninf(t.y2),t.w=noninf(t.x2-t.x1),t.h=noninf(t.y2-t.y1),t},elesfn$j.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCacheShift.x=t.bbCacheShift.y=0,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},elesfn$j.shiftCachedBoundingBox=function(e){for(var t=0;t<this.length;t++){var n=this[t]._private;null!=n.bbCache&&(n.bbCacheShift.x+=e.x,n.bbCacheShift.y+=e.y)}return this.emitAndNotify("bounds"),this},elesfn$j.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes();if(r&&(t=t.filter(function(e){return!e.isParent()})),plainObject(e)){var i=e;e=function(){return i}}n.startBatch(),t.forEach(function(t,n){return t._private.bbAtOldPos=e(t,n)}).silentPositions(e),r&&this.updateCompoundBounds(!0);var a=copyBoundingBox(this.boundingBox({useCache:!1}));return t.silentPositions(function(e){return e._private.bbAtOldPos}),n.endBatch(),a},fn$3.boundingbox=fn$3.bb=fn$3.boundingBox,fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var bounds=elesfn$j,fn$4,elesfn$k;fn$4=elesfn$k={};var defineDimFns=function(e){e.uppercaseName=capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=capitalize(e.outerName),fn$4[e.name]=function(){var t=this[0],n=t._private,r=n.cy._private.styleEnabled;if(t){if(!r)return 1;if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var i=t.pstyle(e.name);switch(i.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return i.pfValue}}},fn$4["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private.cy._private.styleEnabled;if(t)return n?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},fn$4["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},fn$4["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};defineDimFns({name:"width"}),defineDimFns({name:"height"}),elesfn$k.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},elesfn$k.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},elesfn$k.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var widthHeight=elesfn$k,ifEdge=function(e,t){if(e.isEdge())return t(e)},ifEdgeRenderedPosition=function(e,t){if(e.isEdge()){var n=e.cy();return modelToRenderedPosition(t(e),n.zoom(),n.pan())}},ifEdgeRenderedPositions=function(e,t){if(e.isEdge()){var n=e.cy(),r=n.pan(),i=n.zoom();return t(e).map(function(e){return modelToRenderedPosition(e,i,r)})}},controlPoints=function(e){return e.renderer().getControlPoints(e)},segmentPoints=function(e){return e.renderer().getSegmentPoints(e)},sourceEndpoint=function(e){return e.renderer().getSourceEndpoint(e)},targetEndpoint=function(e){return e.renderer().getTargetEndpoint(e)},midpoint=function(e){return e.renderer().getEdgeMidpoint(e)},pts={controlPoints:{get:controlPoints,mult:!0},segmentPoints:{get:segmentPoints,mult:!0},sourceEndpoint:{get:sourceEndpoint},targetEndpoint:{get:targetEndpoint},midpoint:{get:midpoint}},renderedName=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},edgePoints=Object.keys(pts).reduce(function(e,t){var n=pts[t],r=renderedName(t);return e[t]=function(){return ifEdge(this,n.get)},n.mult?e[r]=function(){return ifEdgeRenderedPositions(this,n.get)}:e[r]=function(){return ifEdgeRenderedPosition(this,n.get)},e},{}),dimensions=extend({},position,bounds,widthHeight,edgePoints),Event=function(e,t){this.recycle(e,t)};function returnFalse(){return!1}function returnTrue(){return!0}Event.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?returnTrue:returnFalse):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:emptyOpts,t=arguments.length>1?arguments[1]:void 0,n=0;n<defaultsKeys.length;n++){var r=defaultsKeys[n];this[r]=e[r]||defaults$8[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}var p=Emitter.prototype,forEachEvent=function(e,t,n,r,i,a,o){fn(r)&&(i=r,r=null),o&&(a=null==a?o:extend({},a,o));for(var s=array(n)?n:n.split(/\s+/),u=0;u<s.length;u++){var l=s[u];if(!emptyString(l)){var c=l.match(eventRegex);if(c)if(!1===t(e,l,c[1],c[2]?c[2]:null,r,i,a))break}}},makeEventObj=function(e,t){return e.addEventFields(e.context,t),new Event(t.type,t)},forEachEventObj=function(e,t,n){if(event(n))t(e,n);else if(plainObject(n))t(e,makeEventObj(e,n));else for(var r=array(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var a=r[i];if(!emptyString(a)){var o=a.match(eventRegex);if(o){var s=o[1],u=o[2]?o[2]:null;t(e,makeEventObj(e,{type:s,namespace:u,target:e.context}))}}}};p.on=p.addListener=function(e,t,n,r,i){return forEachEvent(this,function(e,t,n,r,i,a,o){fn(a)&&e.listeners.push({event:t,callback:a,type:n,namespace:r,qualifier:i,conf:o})},e,t,n,r,i),this},p.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},p.removeListener=p.off=function(e,t,n,r){var i=this;0!==this.emitting&&(this.listeners=copyArray(this.listeners));for(var a=this.listeners,o=function(o){var s=a[o];forEachEvent(i,function(t,n,r,i,u,l){if((s.type===r||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!u||t.qualifierCompare(s.qualifier,u))&&(!l||s.callback===l))return a.splice(o,1),!1},e,t,n,r)},s=a.length-1;s>=0;s--)o(s);return this},p.removeAllListeners=function(){return this.removeListener("*")},p.emit=p.trigger=function(e,t,n){var r=this.listeners,i=r.length;return this.emitting++,array(t)||(t=[t]),forEachEventObj(this,function(e,a){null!=n&&(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}],i=r.length);for(var o=function(n){var i=r[n];if(i.type===a.type&&(!i.namespace||i.namespace===a.namespace||i.namespace===universalNamespace)&&e.eventMatches(e.context,i,a)){var o=[a];null!=t&&push(o,t),e.beforeEmit(e.context,i,a),i.conf&&i.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==i}));var s=e.callbackContext(e.context,i,a),u=i.callback.apply(s,o);e.afterEmit(e.context,i,a),!1===u&&(a.stopPropagation(),a.preventDefault())}},s=0;s<i;s++)o(s);e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)},e),this.emitting--,this};var emitterOptions={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&element$1(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},argSelector=function(e){return string$1(e)?new Selector(e):e},elesfn$l={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Emitter(emitterOptions,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=argSelector(t),i=0;i<this.length;i++){this[i].emitter().on(e,r,n)}return this},removeListener:function(e,t,n){for(var r=argSelector(t),i=0;i<this.length;i++){this[i].emitter().removeListener(e,r,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function(e,t,n){for(var r=argSelector(t),i=0;i<this.length;i++){this[i].emitter().one(e,r,n)}return this},once:function(e,t,n){for(var r=argSelector(t),i=0;i<this.length;i++){this[i].emitter().on(e,r,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){this[n].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};define$3.eventAliasesOn(elesfn$l);var elesfn$m={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.merge(r):t.merge(r)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(string$1(e)||elementOrCollection(e))return new Selector(e).filter(this);if(fn(e)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(t?e.apply(t,[i,r,this]):e(i,r,this))&&n.merge(i)}return n}return this.spawn()},not:function(e){if(e){string$1(e)&&(e=this.filter(e));for(var t=[],n=e._private.map,r=0;r<this.length;r++){var i=this[r];n.has(i.id())||t.push(i)}return this.spawn(t)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(string$1(e)){var t=e;return this.filter(t)}for(var n=[],r=e,i=this.length<e.length,a=i?r._private.map:this._private.map,o=i?this:r,s=0;s<o.length;s++){var u=o[s]._private.data.id,l=a.get(u);l&&n.push(l.ele)}return this.spawn(n)},xor:function(e){var t=this._private.cy;string$1(e)&&(e=t.$(e));var n=[],r=e,i=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id;t.hasElementWithId(a)||n.push(i)}};return i(this,r),i(r,this),this.spawn(n)},diff:function(e){var t=this._private.cy;string$1(e)&&(e=t.$(e));var n=[],r=[],i=[],a=e,o=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r],o=a._private.data.id;t.hasElementWithId(o)?i.push(a):n.push(a)}};return o(this,a,n),o(a,this,r),{left:this.spawn(n,{unique:!0}),right:this.spawn(r,{unique:!0}),both:this.spawn(i,{unique:!0})}},add:function(e){var t=this._private.cy;if(!e)return this;if(string$1(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=[],i=0;i<this.length;i++)r.push(this[i]);for(var a=this._private.map,o=0;o<e.length;o++){var s=!a.has(e[o].id());s&&r.push(e[o])}return this.spawn(r)},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&string$1(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=t.map,a=0;a<e.length;a++){var o=e[a],s=o._private.data.id;if(!i.has(s)){var u=this.length++;this[u]=o,i.set(s,{ele:o,index:u})}else{var l=i.get(s).index;this[l]=o,i.set(s,{ele:o,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),n=this._private.map;this[e]=void 0,n.delete(t);var r=e===this.length-1;if(this.length>1&&!r){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[e]=a,n.set(o,{ele:a,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&string$1(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],r=0;r<this.length;r++){var i=this[r],a=t?e.apply(t,[i,r,this]):e(i,r,this);n.push(a)}return n},reduce:function(e,t){for(var n=t,r=0;r<this.length;r++)n=e(n,this[r],r,this);return n},max:function(e,t){for(var n,r=-1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o>r&&(r=o,n=a)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o<r&&(r=o,n=a)}return{value:r,ele:n}}},fn$5=elesfn$m;fn$5.u=fn$5["|"]=fn$5["+"]=fn$5.union=fn$5.or=fn$5.add,fn$5["\\"]=fn$5["!"]=fn$5["-"]=fn$5.difference=fn$5.relativeComplement=fn$5.subtract=fn$5.not,fn$5.n=fn$5["&"]=fn$5["."]=fn$5.and=fn$5.intersection=fn$5.intersect,fn$5["^"]=fn$5["(+)"]=fn$5["(-)"]=fn$5.symmetricDifference=fn$5.symdiff=fn$5.xor,fn$5.fnFilter=fn$5.filterFn=fn$5.stdFilter=fn$5.filter,fn$5.complement=fn$5.abscomp=fn$5.absoluteComplement;var elesfn$n={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},zIndexSort=function(e,t){var n=e.cy().hasCompoundNodes();function r(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?n?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?MAX_INT:0}var i=r(e)-r(t);if(0!==i)return i;function a(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var o=a(e)-a(t);if(0!==o)return o;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},elesfn$o={forEach:function(e,t){if(fn(e))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(t?e.apply(t,[i,r,this]):e(i,r,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!fn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:MAX_INT-1}var r=t.source,i=t.target,a=r.zDepth(),o=i.zDepth();return Math.max(a,o,0)}}};elesfn$o.each=elesfn$o.forEach;var getLayoutDimensionOptions=defaults({nodeDimensionsIncludeLabels:!1}),elesfn$p={layoutDimensions:function(e){var t;if(e=getLayoutDimensionOptions(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,n){var r=this.nodes(),i=this.cy(),a=t.eles,o=function(e){return e.id()},s=memoize(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=t.spacingFactor&&1!==t.spacingFactor,l=function(){if(!u)return null;for(var e=makeBoundingBox(),t=0;t<r.length;t++){var n=r[t],i=s(n,t);expandBoundingBoxByPoint(e,i.x,i.y)}return e}(),c=memoize(function(e,n){var r=s(e,n);u&&(r=function(e,t,n){var r=t.x1+t.w/2,i=t.y1+t.h/2;return{x:r+(n.x-r)*e,y:i+(n.y-i)*e}}(Math.abs(t.spacingFactor),l,r));return null!=t.transform&&(r=t.transform(e,r)),r},o);if(t.animate){for(var f=0;f<r.length;f++){var h=r[f],d=c(h,f);if(null==t.animateFilter||t.animateFilter(h,f)){var p=h.animation({position:d,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else h.position(d)}if(t.fit){var g=i.animation({fit:{boundingBox:a.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else if(void 0!==t.zoom&&void 0!==t.pan){var v=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}e.animations.forEach(function(e){return e.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Promise$1.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(c),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(extend({},e,{eles:this}))}};function styleCache(e,t,n){var r,i=n._private,a=i.styleCache=i.styleCache||[];return null!=(r=a[e])?r:r=a[e]=t(n)}function cacheStyleFunction(e,t){return e=hashString(e),function(n){return styleCache(e,t,n)}}function cachePrototypeStyleFunction(e,t){e=hashString(e);var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return styleCache(e,n,t)}}elesfn$p.createLayout=elesfn$p.makeLayout=elesfn$p.layout;var elesfn$q={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),n=function(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(n)):this.forEach(function(e){n(e),e.connectedEdges().forEach(n)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var n=t.hasCompoundNodes(),r=t.style(),i=this;e=!(!e&&void 0!==e),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=r.apply(i);return e?a.emitAndNotify("style"):a.emit("style"),this},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){var i=n._private.style[e];return null!=i?i:t?r.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(plainObject(e)){var i=e;r.applyBypass(this,i,!1),this.emitAndNotify("style")}else if(string$1(e)){if(void 0===t){var a=this[0];return a?r.getStylePropertyValue(a,e):void 0}r.applyBypass(this,e,t,!1),this.emitAndNotify("style")}else if(void 0===e){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=t.style();if(void 0===e)for(var r=0;r<this.length;r++){var i=this[r];n.removeAllBypasses(i,!1)}else{e=e.split(/\s+/);for(var a=0;a<this.length;a++){var o=this[a];n.removeBypasses(o,e,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++){i*=a[o].pstyle("opacity").value}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function checkCompound(e,t){var n=e._private.data.parent?e.parents():null;if(n)for(var r=0;r<n.length;r++){if(!t(n[r]))return!1}return!0}function defineDerivedStateFunction(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],a=e.hasCompoundNodes();if(i){var o=i._private;if(!t(i))return!1;if(i.isNode())return!a||checkCompound(i,r);var s=o.source,u=o.target;return n(s)&&(!a||checkCompound(s,n))&&(s===u||n(u)&&(!a||checkCompound(u,n)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});elesfn$q.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&eleTakesUpSpace(e)}),parentInteractive=cacheStyleFunction("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&eleTakesUpSpace(e)});elesfn$q.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace})),elesfn$q.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var eleVisible=cacheStyleFunction("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&eleTakesUpSpace(e)}),edgeVisibleViaNode=eleTakesUpSpace;elesfn$q.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode})),elesfn$q.hidden=function(){var e=this[0];if(e)return!e.visible()},elesfn$q.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())}),elesfn$q.bypass=elesfn$q.css=elesfn$q.style,elesfn$q.renderedCss=elesfn$q.renderedStyle,elesfn$q.removeBypass=elesfn$q.removeCss=elesfn$q.removeStyle,elesfn$q.pstyle=elesfn$q.parsedStyle;var elesfn$r={};function defineSwitchFunction(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(1===t.length&&fn(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&array(t[0])){for(var o=1===t.length?t[0]:null,s=0;s<this.length;s++){var u=this[s],l=!e.ableField||u._private[e.ableField],c=u._private[e.field]!=e.value;if(e.overrideAble){var f=e.overrideAble(u);if(void 0!==f&&(l=f,!f))return this}l&&(u._private[e.field]=e.value,c&&n.push(u))}var h=this.spawn(n);h.updateStyle(),h.emit(e.event),o&&h.emit(o)}return this}}function defineSwitchSet(e){elesfn$r[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},elesfn$r[e.on]=defineSwitchFunction({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),elesfn$r[e.off]=defineSwitchFunction({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),defineSwitchSet({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),defineSwitchSet({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),elesfn$r.deselect=elesfn$r.unselect,elesfn$r.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},defineSwitchSet({field:"active",on:"activate",off:"unactivate"}),defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"}),elesfn$r.inactive=function(){var e=this[0];if(e)return!e._private.active};var elesfn$s={},defineDagExtremity=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),s=0;s<o.length;s++){var u=o[s],l=u.source(),c=u.target();if(e.noIncomingEdges&&c===i&&l!==i||e.noOutgoingEdges&&l===i&&c!==i){a=!0;break}}a||n.push(i)}}return this.spawn(n,{unique:!0}).filter(t)}},defineDagOneHop=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target();e.outgoing&&u===i?(n.push(s),n.push(l)):e.incoming&&l===i&&(n.push(s),n.push(u))}}return this.spawn(n,{unique:!0}).filter(t)}},defineDagAllHops=function(e){return function(t){for(var n=this,r=[],i={};;){var a=e.outgoing?n.outgoers():n.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var u=a[s],l=u.id();i[l]||(i[l]=!0,r.push(u),o=!0)}if(!o)break;n=a}return this.spawn(r,{unique:!0}).filter(t)}};function defineSourceFunction(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[e.attr];i&&n.push(i)}return this.spawn(n,{unique:!0}).filter(t)}}function defineEdgesWithFunction(e){return function(t){var n=[],r=this._private.cy,i=e||{};string$1(t)&&(t=r.$(t));for(var a=0;a<t.length;a++)for(var o=t[a]._private.edges,s=0;s<o.length;s++){var u=o[s],l=u._private.data,c=this.hasElementWithId(l.source)&&t.hasElementWithId(l.target),f=t.hasElementWithId(l.source)&&this.hasElementWithId(l.target);if(c||f){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!f)continue}n.push(u)}}return this.spawn(n,{unique:!0})}}function defineParallelEdgesFunction(e){return e=extend({},{codirected:!1},e),function(t){for(var n=[],r=this.edges(),i=e,a=0;a<r.length;a++)for(var o=r[a]._private,s=o.source,u=s._private.data.id,l=o.data.target,c=s._private.edges,f=0;f<c.length;f++){var h=c[f],d=h._private.data,p=d.target,g=d.source,v=p===l&&g===u,m=u===p&&l===g;(i.codirected&&v||!i.codirected&&(v||m))&&n.push(h)}return this.spawn(n,{unique:!0}).filter(t)}}elesfn$s.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},extend(elesfn$s,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({incoming:!0})}),extend(elesfn$s,{neighborhood:cache(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,{unique:!0}).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),elesfn$s.neighbourhood=elesfn$s.neighborhood,elesfn$s.closedNeighbourhood=elesfn$s.closedNeighborhood,elesfn$s.openNeighbourhood=elesfn$s.openNeighborhood,extend(elesfn$s,{source:cache(function(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t},"source"),target:cache(function(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t},"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})}),extend(elesfn$s,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")}),extend(elesfn$s,{connectedEdges:cache(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,a=0;a<i.length;a++){var o=i[a];t.push(o)}}return this.spawn(t,{unique:!0}).filter(e)},"connectedEdges"),connectedNodes:cache(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(t.push(r.source()[0]),t.push(r.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)},"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")}),extend(elesfn$s,{components:function(e){var t=this,n=t.cy(),r=n.collection(),i=null==e?t.nodes():e.nodes(),a=[];null!=e&&i.empty()&&(i=e.sources());var o=function(e,t){r.merge(e),i.unmerge(e),t.merge(e)};if(i.empty())return t.spawn();var s=function(){var e=n.collection();a.push(e);var r=i[0];o(r,e),t.bfs({directed:!1,roots:r,visit:function(t){return o(t,e)}}),e.forEach(function(t){t.connectedEdges().forEach(function(t){e.has(t.source())&&e.has(t.target())&&e.merge(t)})})};do{s()}while(i.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),elesfn$s.componentsOf=elesfn$s.components;var idFactory={generate:function(e,t,n){for(var r=null!=n?n:uuid();e.hasElementWithId(r);)r=uuid();return r}},Collection=function(e,t,n){if(void 0!==e&&core$1(e)){var r=new Map$1,i=!1;if(t){if(t.length>0&&plainObject(t[0])&&!element$1(t[0])){i=!0;for(var a=[],o=new Set$1,s=0,u=t.length;s<u;s++){var l=t[s];null==l.data&&(l.data={});var c=l.data;if(null==c.id)c.id=idFactory.generate(e,l);else if(e.hasElementWithId(c.id)||o.has(c.id))continue;var f=new Element(e,l,!1);a.push(f),o.add(c.id)}t=a}}else t=[];this.length=0;for(var h=0,d=t.length;h<d;h++){var p=t[h][0];if(null!=p){var g=p._private.data.id;(null==n||n.unique&&!r.has(g))&&(r.set(g,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={cy:e,map:r},i&&this.restore()}else error("A collection must have a reference to the core")},elesfn$t=Element.prototype=Collection.prototype;elesfn$t.instanceString=function(){return"collection"},elesfn$t.spawn=function(e,t,n){return core$1(e)||(n=t,t=e,e=this.cy()),new Collection(e,t,n)},elesfn$t.spawnSelf=function(){return this.spawn(this)},elesfn$t.cy=function(){return this._private.cy},elesfn$t.renderer=function(){return this._private.cy.renderer()},elesfn$t.element=function(){return this[0]},elesfn$t.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])},elesfn$t.unique=function(){return new Collection(this._private.cy,this,{unique:!0})},elesfn$t.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},elesfn$t.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new Collection(t)},elesfn$t.$id=elesfn$t.getElementById,elesfn$t.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},elesfn$t.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},elesfn$t.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},elesfn$t.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var r=t._private;if(plainObject(e)){if(n.startBatch(),e.data){t.data(e.data);var i=r.data;if(t.isEdge()){var a=!1,o={},s=e.data.source,u=e.data.target;null!=s&&s!=i.source&&(o.source=""+s,a=!0),null!=u&&u!=i.target&&(o.target=""+u,a=!0),a&&(t=t.move(o))}else{var l=e.data.parent;null==l&&null==i.parent||l==i.parent||(void 0===l&&(l=null),null!=l&&(l=""+l),t=t.move({parent:l}))}}e.position&&t.position(e.position);var c=function(n,i,a){var o=e[n];null!=o&&o!==r[n]&&(o?t[i]():t[a]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var f={data:copy(r.data),position:copy(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};f.classes="";var h=0;return r.classes.forEach(function(e){return f.classes+=0==h++?e:" "+e}),f}}},elesfn$t.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},elesfn$t.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Element(e,r,!1);t.push(i)}return new Collection(e,t)},elesfn$t.copy=elesfn$t.clone,elesfn$t.restore=function(){for(var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.cy(),a=i._private,o=[],s=[],u=0,l=this.length;u<l;u++){var c=this[u];r&&!c.removed()||(c.isNode()?o.push(c):s.push(c))}e=o.concat(s);var f=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var h=e[t],d=h._private,p=d.data;if(h.clearTraversalCache(),r||d.removed)if(void 0===p.id)p.id=idFactory.generate(i,h);else if(number(p.id))p.id=""+p.id;else{if(emptyString(p.id)||!string$1(p.id)){error("Can not create element with invalid string ID `"+p.id+"`"),f();continue}if(i.hasElementWithId(p.id)){error("Can not create second element with ID `"+p.id+"`"),f();continue}}else;var g=p.id;if(h.isNode()){var v=d.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(h.isEdge()){for(var m=h,y=["source","target"],b=y.length,x=!1,w=0;w<b;w++){var E=y[w],T=p[E];number(T)&&(T=p[E]=""+p[E]),null==T||""===T?(error("Can not create edge `"+g+"` with unspecified "+E),x=!0):i.hasElementWithId(T)||(error("Can not create edge `"+g+"` with nonexistant "+E+" `"+T+"`"),x=!0)}if(x){f();continue}var _=i.getElementById(p.source),C=i.getElementById(p.target);_.same(C)?_._private.edges.push(m):(_._private.edges.push(m),C._private.edges.push(m)),m._private.source=_,m._private.target=C}d.map=new Map$1,d.map.set(g,{ele:h,index:0}),d.removed=!1,r&&i.addToPool(h)}for(var D=0;D<o.length;D++){var S=o[D],A=S._private.data;number(A.parent)&&(A.parent=""+A.parent);var k=A.parent;if(null!=k){var R=i.getElementById(k);if(R.empty())A.parent=void 0;else{for(var O=!1,M=R;!M.empty();){if(S.same(M)){O=!0,A.parent=void 0;break}M=M.parent()}O||(R[0]._private.children.push(S),S._private.parent=R[0],a.hasCompoundNodes=!0)}}}if(e.length>0){for(var L=new Collection(i,e),N=0;N<L.length;N++){var P=L[N];P.isNode()||(P.parallelEdges().clearTraversalCache(),P.source().clearTraversalCache(),P.target().clearTraversalCache())}(a.hasCompoundNodes?i.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):L).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?L.emitAndNotify("add"):r&&L.emit("add")}return this},elesfn$t.removed=function(){var e=this[0];return e&&e._private.removed},elesfn$t.inside=function(){var e=this[0];return e&&!e._private.removed},elesfn$t.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r={},i=this._private.cy;function a(e){var i=r[e.id()];t&&e.removed()||i||(r[e.id()]=!0,e.isNode()?(n.push(e),function(e){for(var t=e._private.edges,n=0;n<t.length;n++)a(t[n])}(e),function(e){for(var t=e._private.children,n=0;n<t.length;n++)a(t[n])}(e)):n.unshift(e))}for(var o=0,s=this.length;o<s;o++){a(this[o])}function u(e,t){var n=e._private.edges;removeFromArray(n,t),e.clearTraversalCache()}function l(e){e.clearTraversalCache()}var c=[];function f(e,t){t=t[0];var n=(e=e[0])._private.children,r=e.id();removeFromArray(n,t),t._private.parent=null,c.ids[r]||(c.ids[r]=!0,c.push(e))}c.ids={},this.dirtyCompoundBoundsCache(),t&&i.removeFromPool(n);for(var h=0;h<n.length;h++){var d=n[h];if(d.isEdge()){var p=d.source()[0],g=d.target()[0];u(p,d),u(g,d);for(var v=d.parallelEdges(),m=0;m<v.length;m++){var y=v[m];l(y),y.isBundledBezier()&&y.dirtyBoundingBoxCache()}}else{var b=d.parent();0!==b.length&&f(b,d)}t&&(d._private.removed=!0)}var x=i._private.elements;i._private.hasCompoundNodes=!1;for(var w=0;w<x.length;w++){if(x[w].isParent()){i._private.hasCompoundNodes=!0;break}}var E=new Collection(this.cy(),n);E.size()>0&&(e?E.emitAndNotify("remove"):t&&E.emit("remove"));for(var T=0;T<c.length;T++){var _=c[T];t&&_.removed()||_.updateStyle()}return E},elesfn$t.move=function(e){var t=this._private.cy,n=this,r=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var i=r(e.source),a=r(e.target),o=null!=i&&t.hasElementWithId(i),s=null!=a&&t.hasElementWithId(a);(o||s)&&(t.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var t=n[e],r=t._private.data;t.isEdge()&&(o&&(r.source=i),s&&(r.target=a))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==e.parent){var u=r(e.parent);if(null===u||t.hasElementWithId(u)){var l=null===u?void 0:u;t.batch(function(){var e=n.remove(!1,!1);e.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var r=n[t],i=r._private.data;r.isNode()&&(i.parent=l)}e.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[elesfn$b,elesfn$c,elesfn$d,elesfn$e,elesfn$f,data$1,elesfn$h,dimensions,elesfn$l,elesfn$m,elesfn$n,elesfn$o,elesfn$p,elesfn$q,elesfn$r,elesfn$s].forEach(function(e){extend(elesfn$t,e)});var corefn={add:function(e){var t,n=this;if(elementOrCollection(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var i=[],a=0;a<r.length;a++){var o=r[a];i.push(o.json())}t=new Collection(n,i)}}else if(array(e)){t=new Collection(n,e)}else if(plainObject(e)&&(array(e.nodes)||array(e.edges))){for(var s=e,u=[],l=["nodes","edges"],c=0,f=l.length;c<f;c++){var h=l[c],d=s[h];if(array(d))for(var p=0,g=d.length;p<g;p++){var v=extend({group:h},d[p]);u.push(v)}}t=new Collection(n,u)}else{t=new Element(n,e).collection()}return t},remove:function(e){if(elementOrCollection(e));else if(string$1(e)){var t=e;e=this.$(t)}return e.remove()}};function generateCubicBezier(e,t,n,r){var i=4,a=.001,o=1e-7,s=10,u=11,l=1/(u-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var f=0;f<4;++f)if("number"!=typeof arguments[f]||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var h=c?new Float32Array(u):new Array(u);function d(e,t){return 1-3*t+3*e}function p(e,t){return 3*t-6*e}function g(e){return 3*e}function v(e,t,n){return((d(t,n)*e+p(t,n))*e+g(t))*e}function m(e,t,n){return 3*d(t,n)*e*e+2*p(t,n)*e+g(t)}function y(t){for(var r=0,c=1,f=u-1;c!==f&&h[c]<=t;++c)r+=l;var d=r+(t-h[--c])/(h[c+1]-h[c])*l,p=m(d,e,n);return p>=a?function(t,r){for(var a=0;a<i;++a){var o=m(r,e,n);if(0===o)return r;r-=(v(r,e,n)-t)/o}return r}(t,d):0===p?d:function(t,r,i){var a,u,l=0;do{(a=v(u=r+(i-r)/2,e,n)-t)>0?i=u:r=u}while(Math.abs(a)>o&&++l<s);return u}(t,r,r+l)}var b=!1;function x(){b=!0,e===t&&n===r||function(){for(var t=0;t<u;++t)h[t]=v(t*l,e,n)}()}var w=function(i){return b||x(),e===t&&n===r?i:0===i?0:1===i?1:v(y(i),t,r)};w.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var E="generateBezier("+[e,t,n,r]+")";return w.toString=function(){return E},w}var generateSpringRK4=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},a=t(n,.5*r,i),o=t(n,.5*r,a),s=t(n,r,o),u=1/6*(i.dx+2*(a.dx+o.dx)+s.dx),l=1/6*(i.dv+2*(a.dv+o.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function e(t,r,i){var a,o,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0;for(t=parseFloat(t)||500,r=parseFloat(r)||20,i=i||null,u.tension=t,u.friction=r,o=(a=null!==i)?(c=e(t,r))/i*.016:.016;s=n(s||u,o),l.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return a?function(e){return l[e*(l.length-1)|0]}:c}}(),cubicBezier=function(e,t,n,r){var i=generateCubicBezier(e,t,n,r);return function(e,t,n){return e+(t-e)*i(n)}},easings={linear:function(e,t,n){return e+(t-e)*n},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(e,t,n){if(0===n)return easings.linear;var r=generateSpringRK4(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":cubicBezier};function getEasedValue(e,t,n,r,i){if(1===r)return n;var a=i(t,n,r);return null==e?a:((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max)),a)}function getValue(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function ease(e,t,n,r,i){var a=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var o=getValue(e,i),s=getValue(t,i);if(number(o)&&number(s))return getEasedValue(a,o,s,n,r);if(array(o)&&array(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],f=s[l];if(null!=c&&null!=f){var h=getEasedValue(a,c,f,n,r);u.push(h)}else u.push(f)}return u}}function step(e,t,n,r){var i=!r,a=e._private,o=t._private,s=o.easing,u=o.startTime,l=(r?e:e.cy()).style();if(!o.easingImpl)if(null==s)o.easingImpl=easings.linear;else{var c,f,h;if(string$1(s))c=l.parse("transition-timing-function",s).value;else c=s;string$1(c)?(f=c,h=[]):(f=c[1],h=c.slice(2).map(function(e){return+e})),h.length>0?("spring"===f&&h.push(o.duration),o.easingImpl=easings[f].apply(null,h)):o.easingImpl=easings[f]}var d,p=o.easingImpl;if(d=0===o.duration?1:(n-u)/o.duration,o.applying&&(d=o.progress),d<0?d=0:d>1&&(d=1),null==o.delay){var g=o.startPosition,v=o.position;if(v&&i&&!e.locked()){var m={};valid(g.x,v.x)&&(m.x=ease(g.x,v.x,d,p)),valid(g.y,v.y)&&(m.y=ease(g.y,v.y,d,p)),e.position(m)}var y=o.startPan,b=o.pan,x=a.pan,w=null!=b&&r;w&&(valid(y.x,b.x)&&(x.x=ease(y.x,b.x,d,p)),valid(y.y,b.y)&&(x.y=ease(y.y,b.y,d,p)),e.emit("pan"));var E=o.startZoom,T=o.zoom,_=null!=T&&r;_&&(valid(E,T)&&(a.zoom=bound(a.minZoom,ease(E,T,d,p),a.maxZoom)),e.emit("zoom")),(w||_)&&e.emit("viewport");var C=o.style;if(C&&C.length>0&&i){for(var D=0;D<C.length;D++){var S=C[D],A=S.name,k=S,R=o.startStyle[A],O=ease(R,k,d,p,l.properties[R.name]);l.overrideBypass(e,A,O)}e.emit("style")}}return o.progress=d,d}function valid(e,t){return null!=e&&null!=t&&(!(!number(e)||!number(t))||!(!e||!t))}function startAnimation(e,t,n,r){var i=t._private;i.started=!0,i.startTime=n-i.progress*i.duration}function stepAll(e,t){var n=t._private.aniEles,r=[];function i(t,n){var i=t._private,a=i.animation.current,o=i.animation.queue,s=!1;if(!n&&"none"===t.pstyle("display").value){a=a.splice(0,a.length).concat(o.splice(0,o.length));for(var u=0;u<a.length;u++)a[u].stop()}if(0===a.length){var l=o.shift();l&&a.push(l)}for(var c=function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},f=a.length-1;f>=0;f--){var h=a[f],d=h._private;d.stopped?(a.splice(f,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||startAnimation(t,h,e),step(t,h,e,n),d.applying&&(d.applying=!1),c(d.frames),null!=d.step&&d.step(e),h.completed()&&(a.splice(f,1),d.hooked=!1,d.playing=!1,d.started=!1,c(d.completes)),s=!0)}return n||0!==a.length||0!==o.length||r.push(t),s}for(var a=!1,o=0;o<n.length;o++){var s=i(n[o]);a=a||s}var u=i(t,!0);(a||u)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}var corefn$1={animate:define$3.animate(),animation:define$3.animation(),animated:define$3.animated(),clearQueue:define$3.clearQueue(),delay:define$3.delay(),delayAnimation:define$3.delayAnimation(),stop:define$3.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function(t,n){stepAll(n,e)},t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&requestAnimationFrame(function(n){stepAll(n,e),t()})}()}}},emitterOptions$1={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&element$1(n.target)&&r.matches(n.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},argSelector$1=function(e){return string$1(e)?new Selector(e):e},elesfn$u={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Emitter(emitterOptions$1,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,argSelector$1(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,argSelector$1(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,argSelector$1(t),n),this},once:function(e,t,n){return this.emitter().one(e,argSelector$1(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};define$3.eventAliasesOn(elesfn$u);var corefn$2={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};corefn$2.jpeg=corefn$2.jpg;var corefn$3={layout:function(e){if(null!=e)if(null!=e.name){var t=e.name,n=this.extension("layout",t);if(null!=n){var r;r=string$1(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$();var i=new n(extend({},e,{cy:this,eles:r}));return i}error("No such layout `"+t+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else error("A `name` must be specified to make a layout");else error("Layout options must be specified to make a layout")}};corefn$3.createLayout=corefn$3.makeLayout=corefn$3.layout;var corefn$4={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=t&&r.merge(t)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],a=e[i];t.getElementById(i).data(a)}})}},rendererDefaults=defaults({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),corefn$5={renderTo:function(e,t,n,r){return this._private.renderer.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);if(null!=t){void 0!==e.wheelSensitivity&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=rendererDefaults(e);n.cy=this,this._private.renderer=new t(n),this.notify("init")}else error("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};corefn$5.invalidateDimensions=corefn$5.resize;var corefn$6={collection:function(e,t){return string$1(e)?this.$(e):elementOrCollection(e)?e.collection():array(e)?new Collection(this,e,t):new Collection(this)},nodes:function(e){var t=this.$(function(e){return e.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(e){return e.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$6.elements=corefn$6.filter=corefn$6.$;var styfn={},TRUE="t",FALSE="f";styfn.apply=function(e){var t=this._private,n=t.cy.collection();t.newStyle&&(t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0));for(var r=0;r<e.length;r++){var i=e[r],a=this.getContextMeta(i);if(!a.empty){var o=this.getContextStyle(a),s=this.applyContextStyle(a,o,i);t.newStyle||this.updateTransitions(i,s.diffProps),this.updateStyleHints(i)&&n.merge(i)}}return t.newStyle=!1,n},styfn.getPropertiesDiff=function(e,t){var n=this._private.propDiffs=this._private.propDiffs||{},r=e+"-"+t,i=n[r];if(i)return i;for(var a=[],o={},s=0;s<this.length;s++){var u=this[s],l=e[s]===TRUE,c=t[s]===TRUE,f=l!==c,h=u.mappedProperties.length>0;if(f||c&&h){var d=void 0;f&&h?d=u.properties:f?d=u.properties:h&&(d=u.mappedProperties);for(var p=0;p<d.length;p++){for(var g=d[p],v=g.name,m=!1,y=s+1;y<this.length;y++){var b=this[y];if(t[y]===TRUE&&(m=null!=b.properties[g.name]))break}o[v]||m||(o[v]=!0,a.push(v))}}}return n[r]=a,a},styfn.getContextMeta=function(e){var t,n="",r=e._private.styleCxtKey||"";this._private.newStyle&&(r="");for(var i=0;i<this.length;i++){var a=this[i];n+=a.selector&&a.selector.matches(e)?TRUE:FALSE}return t=this.getPropertiesDiff(r,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},styfn.getContextStyle=function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var r={_private:{key:t}},i=0;i<this.length;i++){var a=this[i];if(t[i]===TRUE)for(var o=0;o<a.properties.length;o++){var s=a.properties[o];r[s.name]=s}}return n[t]=r,r},styfn.applyContextStyle=function(e,t,n){for(var r=e.diffPropNames,i={},a=this.types,o=0;o<r.length;o++){var s=r[o],u=t[s],l=n.pstyle(s);if(!u){if(!l)continue;u=l.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(l!==u){if(u.mapped===a.fn&&null!=l&&null!=l.mapping&&l.mapping.value===u.value){var c=l.mapping;if((c.fnValue=u.value(n))===c.prevFnValue)continue}var f=i[s]={prev:l};this.applyParsedProperty(n,u),f.next=n.pstyle(s),f.next&&f.next.bypass&&(f.next=f.next.bypassed)}}return{diffProps:i}},styfn.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,a=function(e,t,r){return n.getPropertiesHash(e,t,r)},o=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,u=e._private.style;r=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];t.styleKeys[c]=0}for(var f=function(e,n){return t.styleKeys[n]=hashInt(e,t.styleKeys[n])},h=function(e,t){for(var n=0;n<e.length;n++)f(e.charCodeAt(n),t)},d=function(e){return-128<e&&e<128&&Math.floor(e)!==e?2e9-(1024*e|0):e},p=0;p<r.length;p++){var g=r[p],v=u[g];if(null!=v){var m=this.properties[g],y=m.type,b=m.groupKey,x=void 0;null!=m.hashOverride?x=m.hashOverride(e,v):null!=v.pfValue&&(x=v.pfValue);var w=null==m.enums?v.value:null,E=null!=x,T=E||null!=w,_=v.units;if(y.number&&T){var C=E?x:w;if(y.multiple)for(var D=0;D<C.length;D++)f(d(C[D]),b);else f(d(C),b);E||null==_||h(_,b)}else h(v.strValue,b)}}for(var S=0,A=0;A<i.length;A++){var k=i[A],R=t.styleKeys[k];S=hashInt(R,S)}t.styleKey=S;var O=t.labelDimsKey=t.styleKeys.labelDimensions;if(t.labelKey=a(e,["label"],O),t.labelStyleKey=hashInt(t.styleKeys.commonLabel,t.labelKey),s||(t.sourceLabelKey=a(e,["source-label"],O),t.sourceLabelStyleKey=hashInt(t.styleKeys.commonLabel,t.sourceLabelKey),t.targetLabelKey=a(e,["target-label"],O),t.targetLabelStyleKey=hashInt(t.styleKeys.commonLabel,t.targetLabelKey)),s){var M=t.styleKeys,L=M.nodeBody,N=M.nodeBorder,P=M.backgroundImage,I=M.compound,B=M.pie;t.nodeKey=hashIntsArray([N,P,I,B],L),t.hasPie=0!=B}return o!==t.styleKey},styfn.clearStyleHints=function(e){var t=e._private;t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},styfn.applyParsedProperty=function(e,t){var n,r=this,i=t,a=e._private.style,o=r.types,s=r.properties[i.name].type,u=i.bypass,l=a[i.name],c=l&&l.bypass,f=e._private,h=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},d=function(){var t=h(l),n=h(i);r.checkTriggers(e,i.name,t,n)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",u)),i.delete)return a[i.name]=void 0,d(),!0;if(i.deleteBypassed)return l?!!l.bypass&&(l.bypassed=void 0,d(),!0):(d(),!0);if(i.deleteBypass)return l?!!l.bypass&&(a[i.name]=l.bypassed,d(),!0):(d(),!0);var p=function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:for(var g,v=i.field.split("."),m=f.data,y=0;y<v.length&&m;y++){m=m[v[y]]}if(null==m)return p(),!1;if(!number(m))return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+m+"` for `"+e.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((g=0===b?0:(m-i.fieldMin)/b)<0?g=0:g>1&&(g=1),s.color){var x=i.valueMin[0],w=i.valueMax[0],E=i.valueMin[1],T=i.valueMax[1],_=i.valueMin[2],C=i.valueMax[2],D=null==i.valueMin[3]?1:i.valueMin[3],S=null==i.valueMax[3]?1:i.valueMax[3],A=[Math.round(x+(w-x)*g),Math.round(E+(T-E)*g),Math.round(_+(C-_)*g),Math.round(D+(S-D)*g)];n={bypass:i.bypass,name:i.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else{if(!s.number)return!1;var k=i.valueMin+(i.valueMax-i.valueMin)*g;n=this.parse(i.name,k,i.bypass,"mapping")}if(!n)return p(),!1;n.mapping=i,i=n;break;case o.data:for(var R=i.field.split("."),O=f.data,M=0;M<R.length&&O;M++){O=O[R[M]]}if(null!=O&&(n=this.parse(i.name,O,i.bypass,"mapping")),!n)return p(),!1;n.mapping=i,i=n;break;case o.fn:var L=i.value,N=null!=i.fnValue?i.fnValue:L(e);if(i.prevFnValue=N,null==N)return warn("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(i.name,N,i.bypass,"mapping")))return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=copy(i),i=n;break;case void 0:break;default:return!1}return u?(i.bypassed=c?l.bypassed:l,a[i.name]=i):c?l.bypassed=i:a[i.name]=i,d(),!0},styfn.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),t)for(var i=r._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=i[s];null!=u&&(u.bypass?u.bypassed=null:i[s]=null)}else r._private.style={}}},styfn.update=function(){this._private.cy.mutableElements().updateStyle()},styfn.updateTransitions=function(e,t){var n=this,r=e._private,i=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=e.pstyle(c),h=t[c];if(h){var d=h.prev,p=null!=h.next?h.next:f,g=!1,v=void 0;d&&(number(d.pfValue)&&number(p.pfValue)?(g=p.pfValue-d.pfValue,v=d.pfValue+1e-6*g):number(d.value)&&number(p.value)?(g=p.value-d.value,v=d.value+1e-6*g):array(d.value)&&array(p.value)&&(g=d.value[0]!==p.value[0]||d.value[1]!==p.value[1]||d.value[2]!==p.value[2],v=d.strValue),g&&(s[c]=p.strValue,this.applyBypass(e,c,v),u=!0))}}if(!u)return;r.transitioning=!0,new Promise$1(function(t){o>0?e.delayAnimation(o).play().promise().then(t):t()}).then(function(){return e.animation({style:s,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),r.transitioning=!1)},styfn.checkTrigger=function(e,t,n,r,i,a){var o=this.properties[t],s=i(o);null!=s&&s(n,r)&&a(o)},styfn.checkZOrderTrigger=function(e,t,n,r){var i=this;this.checkTrigger(e,t,n,r,function(e){return e.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},styfn.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(e){return e.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),"bezier"!==e.pstyle("curve-style").value&&("curve-style"!==t||"bezier"!==n&&"bezier"!==r)||!i.triggersBoundsOfParallelBeziers||e.parallelEdges().forEach(function(e){e.isBundledBezier()&&e.dirtyBoundingBoxCache()})})},styfn.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)};var styfn$1={applyBypass:function(e,t,n,r){var i=[];if("*"===t||"**"===t){if(void 0!==n)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,s=this.parse(o,n,!0);s&&i.push(s)}}else if(string$1(t)){var u=this.parse(t,n,!0);u&&i.push(u)}else{if(!plainObject(t))return!1;var l=t;r=n;for(var c=Object.keys(l),f=0;f<c.length;f++){var h=c[f],d=l[h];if(void 0===d&&(d=l[dash2camel(h)]),void 0!==d){var p=this.parse(h,d,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var g=!1,v=0;v<e.length;v++){for(var m=e[v],y={},b=void 0,x=0;x<i.length;x++){var w=i[x];if(r){var E=m.pstyle(w.name);b=y[w.name]={prev:E}}g=this.applyParsedProperty(m,w)||g,r&&(b.next=m.pstyle(w.name))}g&&this.updateStyleHints(m),r&&this.updateTransitions(m,y,!0)}return g},overrideBypass:function(e,t,n){t=camel2dash(t);for(var r=0;r<e.length;r++){var i=e[r],a=i._private.style[t],o=this.properties[t].type,s=o.color,u=o.mutiple,l=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=s?"rgb("+n.join(",")+")":u?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,t,n),this.checkTriggers(i,t,l,n)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,n){for(var r=0;r<e.length;r++){for(var i=e[r],a={},o=0;o<t.length;o++){var s=t[o],u=this.properties[s],l=i.pstyle(u.name);if(l&&l.bypass){var c=this.parse(s,"",!0),f=a[u.name]={prev:l};this.applyParsedProperty(i,c),f.next=i.pstyle(u.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,a,!0)}}},styfn$2={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy.container();if(window$1&&t&&window$1.getComputedStyle)return window$1.getComputedStyle(t).getPropertyValue(e)}},styfn$3={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){if(e=e[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],a=this.getStylePropertyValue(e,i.name,t);null!=a&&(n[i.name]=a,n[dash2camel(i.name)]=a)}return n}},getIndexedStyle:function(e,t,n,r){var i=e.pstyle(t)[n][r];return null!=i?i:e.cy().style().getDefaultProperty(t)[n][0]},getStylePropertyValue:function(e,t,n){if(e=e[0]){var r=this.properties[t];r.alias&&(r=r.pointsTo);var i=r.type,a=e.pstyle(r.name);if(a){var o=a.value,s=a.units,u=a.strValue;if(n&&i.number&&null!=o&&number(o)){var l=e.cy().zoom(),c=function(e){return e*l},f=function(e,t){return c(e)+t},h=array(o);return(h?s.every(function(e){return null!=e}):null!=s)?h?o.map(function(e,t){return f(e,s[t])}).join(" "):f(o,s):h?o.map(function(e){return string$1(e)?e:""+c(e)}).join(" "):""+c(o)}if(null!=u)return u}return null}},getAnimationStartStyle:function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r].name,a=e.pstyle(i);void 0!==a&&(a=plainObject(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(n[i]=a)}return n},getPropsList:function(e){var t=[],n=e,r=this.properties;if(n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o],u=r[o]||r[camel2dash(o)],l=this.parse(u.name,s);l&&t.push(l)}return t},getNonDefaultPropertiesHash:function(e,t,n){var r,i,a,o,s,u,l=n;for(s=0;s<t.length;s++)if(r=t[s],null!=(i=e.pstyle(r,!1)))if(null!=i.pfValue)l=hashInt(o,l);else for(a=i.strValue,u=0;u<a.length;u++)o=a.charCodeAt(u),l=hashInt(o,l);return l}};styfn$3.getPropertiesHash=styfn$3.getNonDefaultPropertiesHash;var styfn$4={appendFromJson:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.selector,i=n.style||n.css,a=Object.keys(i);this.selector(r);for(var o=0;o<a.length;o++){var s=a[o],u=i[s];this.css(s,u)}}return this},fromJson:function(e){return this.resetToDefault(),this.appendFromJson(e),this},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:a})}return e}},styfn$5={appendFromString:function(e){var t,n,r,i=""+e;function a(){i=i.length>t.length?i.substr(t.length):""}function o(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){if(i.match(/^\s*$/))break;var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}t=s[0];var u=s[1];if("core"!==u)if(new Selector(u).invalid){warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+u),a();continue}var l=s[2],c=!1;n=l;for(var f=[];;){if(n.match(/^\s*$/))break;var h=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!h){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+l),c=!0;break}r=h[0];var d=h[1],p=h[2];if(this.properties[d])this.parse(d,p)?(f.push({name:d,val:p}),o()):(warn("Skipping property: Invalid property definition in: "+r),o());else warn("Skipping property: Invalid property name in: "+r),o()}if(c){a();break}this.selector(u);for(var g=0;g<f.length;g++){var v=f[g];this.css(v.name,v.val)}a()}return this},fromString:function(e){return this.resetToDefault(),this.appendFromString(e),this}},styfn$6={};!function(){var e=number$1,t=rgbaNoBackRefs,n=hslaNoBackRefs,r=hex3,i=hex6,a=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(a){var o=e+"|\\w+|"+t+"|"+n+"|"+r+"|"+i;return"^"+a+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+o+")\\s*\\,\\s*("+o+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];styfn$6.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","square","pentagon","hexagon","concavehexagon","concave-hexagon","heptagon","octagon","tag","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return string$1(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var u={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t}},l=styfn$6.types,c=[{name:"label",type:l.text,triggersBounds:u.any},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],p=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],g=[{name:"events",type:l.bool},{name:"text-events",type:l.bool}],v=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.nonNegativeInt,triggersZOrder:u.any}],m=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero}],y=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],b=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},x=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:b},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:b},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],w=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle}],E=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],T=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],_=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"taxi-turn",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],C=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],D=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],S=[];styfn$6.pieBackgroundN=16,S.push({name:"pie-size",type:l.sizeMaybePercent});for(var A=1;A<=styfn$6.pieBackgroundN;A++)S.push({name:"pie-"+A+"-background-color",type:l.color}),S.push({name:"pie-"+A+"-background-size",type:l.percent}),S.push({name:"pie-"+A+"-background-opacity",type:l.zeroOneNumber});var k=[],R=styfn$6.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(e){R.forEach(function(t){var n=t+"-"+e.name,r=e.type,i=e.triggersBounds;k.push({name:n,type:r,triggersBounds:i})})},{});var O=styfn$6.properties=[].concat(g,y,v,m,C,p,d,c,f,h,x,w,E,S,T,_,k,D),M=styfn$6.propertyGroups={behavior:g,transition:y,visibility:v,overlay:m,ghost:C,commonLabel:p,labelDimensions:d,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:x,nodeBorder:w,backgroundImage:E,pie:S,compound:T,edgeLine:_,edgeArrow:k,core:D},L=styfn$6.propertyGroupNames={};(styfn$6.propertyGroupKeys=Object.keys(M)).forEach(function(e){L[e]=M[e].map(function(e){return e.name}),M[e].forEach(function(t){return t.groupKey=e})});var N=styfn$6.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$6.propertyNames=O.map(function(e){return e.name});for(var P=0;P<O.length;P++){var I=O[P];O[I.name]=I}for(var B=0;B<N.length;B++){var $=N[B],F=O[$.pointsTo],q={name:$.name,alias:!0,pointsTo:F};O.push(q),O[$.name]=q}}(),styfn$6.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},styfn$6.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=styfn$6.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(e,t){return styfn$6.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var a=i.name,o=t[a],s=this.parse(a,o);n[a]=s}}return e.defaultProperties=n,e.defaultProperties},styfn$6.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$7={parse:function(e,t,n,r){if(fn(t))return this.parseImplWarn(e,t,n,r);var i,a=hashStrings(e,""+t,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),o=this.propCache=this.propCache||[];return(i=o[a])||(i=o[a]=this.parseImplWarn(e,t,n,r)),(n||"mapping"===r)&&(i=copy(i))&&(i.value=copy(i.value)),i},parseImplWarn:function(e,t,n,r){var i=this.parseImpl(e,t,n,r);return i||null==t||warn("The style property `".concat(e,": ").concat(t,"` is invalid")),i},parseImpl:function(e,t,n,r){e=camel2dash(e);var i=this.properties[e],a=t,o=this.types;if(!i)return null;if(void 0===t)return null;i.alias&&(i=i.pointsTo,e=i.name);var s=string$1(t);s&&(t=t.trim());var u,l,c=i.type;if(!c)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(fn(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:n};if(!s||r||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(u=new RegExp(o.data.regex).exec(t))){if(n)return!1;var f=o.data;return{name:e,value:u,strValue:""+t,mapped:f,field:u[1],bypass:n}}if(t.length>=10&&"m"===t[0]&&(l=new RegExp(o.mapData.regex).exec(t))){if(n)return!1;if(c.multiple)return!1;var h=o.mapData;if(!c.color&&!c.number)return!1;var d=this.parse(e,l[4]);if(!d||d.mapped)return!1;var p=this.parse(e,l[5]);if(!p||p.mapped)return!1;if(d.pfValue===p.pfValue||d.strValue===p.strValue)return warn("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+d.strValue+"`"),this.parse(e,d.strValue);if(c.color){var g=d.value,v=p.value;if(!(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3]&&(null!=g[3]&&1!==g[3]||null!=v[3]&&1!==v[3])))return!1}return{name:e,value:l,strValue:""+t,mapped:h,field:l[1],fieldMin:parseFloat(l[2]),fieldMax:parseFloat(l[3]),valueMin:d.value,valueMax:p.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var m;if(m=s?t.split(/\s+/):array(t)?t:[t],c.evenMultiple&&m.length%2!=0)return null;for(var y=[],b=[],x=[],w="",E=!1,T=0;T<m.length;T++){var _=this.parse(e,m[T],n,"multiple");E=E||string$1(_.value),y.push(_.value),x.push(null!=_.pfValue?_.pfValue:_.value),b.push(_.units),w+=(T>0?" ":"")+_.strValue}return c.validate&&!c.validate(y,b)?null:c.singleEnum&&E?1===y.length&&string$1(y[0])?{name:e,value:y[0],strValue:y[0],bypass:n}:null:{name:e,value:y,pfValue:x,strValue:w,bypass:n,units:b}}var C=function(){for(var r=0;r<c.enums.length;r++){if(c.enums[r]===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(c.number){var D,S="px";if(c.units&&(D=c.units),c.implicitUnits&&(S=c.implicitUnits),!c.unitless)if(s){var A="px|em"+(c.allowPercent?"|\\%":"");D&&(A=D);var k=t.match("^("+number$1+")("+A+")?$");k&&(t=k[1],D=k[2]||S)}else D&&!c.implicitUnits||(D=S);if(t=parseFloat(t),isNaN(t)&&void 0===c.enums)return null;if(isNaN(t)&&void 0!==c.enums)return t=a,C();if(c.integer&&!integer(t))return null;if(void 0!==c.min&&(t<c.min||c.strictMin&&t===c.min)||void 0!==c.max&&(t>c.max||c.strictMax&&t===c.max))return null;var R={name:e,value:t,strValue:""+t+(D||""),units:D,bypass:n};return c.unitless||"px"!==D&&"em"!==D?R.pfValue=t:R.pfValue="px"!==D&&D?this.getEmSizeInPixels()*t:t,"ms"!==D&&"s"!==D||(R.pfValue="ms"===D?t:1e3*t),"deg"!==D&&"rad"!==D||(R.pfValue="rad"===D?t:deg2rad(t)),"%"===D&&(R.pfValue=t/100),R}if(c.propList){var O=[],M=""+t;if("none"===M);else{for(var L=M.split(/\s*,\s*|\s+/),N=0;N<L.length;N++){var P=L[N].trim();this.properties[P]?O.push(P):warn("`"+P+"` is not a valid property name")}if(0===O.length)return null}return{name:e,value:O,strValue:0===O.length?"none":O.join(" "),bypass:n}}if(c.color){var I=color2tuple(t);return I?{name:e,value:I,pfValue:I,strValue:"rgb("+I[0]+","+I[1]+","+I[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var B=C();if(B)return B}for(var $=c.regexes?c.regexes:[c.regex],F=0;F<$.length;F++){var q=new RegExp($[F]).exec(t);if(q)return{name:e,value:c.singleRegexMatchValue?q[1]:q,strValue:""+t,bypass:n}}return null}return c.string?{name:e,value:""+t,strValue:""+t,bypass:n}:c.enums?C():null}},Style=function e(t){if(!(this instanceof e))return new e(t);core$1(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):error("A style must have a core reference")},styfn$8=Style.prototype;styfn$8.instanceString=function(){return"style"},styfn$8.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},styfn$8.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},styfn$8.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},styfn$8.selector=function(e){var t="core"===e?null:new Selector(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},styfn$8.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=t[r.name];void 0===i&&(i=t[dash2camel(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},styfn$8.style=styfn$8.css,styfn$8.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},styfn$8.append=function(e){return stylesheet(e)?e.appendToStyle(this):array(e)?this.appendFromJson(e):string$1(e)&&this.appendFromString(e),this},Style.fromJson=function(e,t){var n=new Style(e);return n.fromJson(t),n},Style.fromString=function(e,t){return new Style(e).fromString(t)},[styfn,styfn$1,styfn$2,styfn$3,styfn$4,styfn$5,styfn$6,styfn$7].forEach(function(e){extend(styfn$8,e)}),Style.types=styfn$8.types,Style.properties=styfn$8.properties,Style.propertyGroups=styfn$8.propertyGroups,Style.propertyGroupNames=styfn$8.propertyGroupNames,Style.propertyGroupKeys=styfn$8.propertyGroupKeys;var corefn$7={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return stylesheet(e)?t.style=e.generateStyle(this):array(e)?t.style=Style.fromJson(this,e):string$1(e)?t.style=Style.fromString(this,e):t.style=Style(this),t.style}},defaultSelectionType="single",corefn$8={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType=defaultSelectionType),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,n,r,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(string$1(a[0]))return o[e=a[0]];if(plainObject(a[0])){if(!this._private.panningEnabled)return this;r=(n=a[0]).x,i=n.y,number(r)&&(o.x=r),number(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],t=a[1],"x"!==e&&"y"!==e||!number(t)||(o[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var n,r,i,a,o,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:plainObject(e)&&(a=(i=s[0]).x,o=i.y,number(a)&&(u.x+=a),number(o)&&(u.y+=o),this.emit("pan viewport"));break;case 2:r=t,"x"!==(n=e)&&"y"!==n||!number(r)||(u[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(number(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(string$1(e)){var r=e;e=this.$(r)}else if(boundingBox(e)){var i=e;(n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else elementOrCollection(e)||(e=this.mutableElements());if(!elementOrCollection(e)||!e.empty()){n=n||e.boundingBox();var a,o=this.width(),s=this.height();if(t=number(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:a=(a=(a=Math.min((o-2*t)/n.w,(s-2*t)/n.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(o-a*(n.x1+n.x2))/2,y:(s-a*(n.y1+n.y2))/2}}}}},zoomRange:function(e,t){var n=this._private;if(null==t){var r=e;e=r.min,t=r.max}return number(e)&&number(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):number(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:number(t)&&void 0===e&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,n,r=this._private,i=r.pan,a=r.zoom,o=!1;if(r.zoomingEnabled||(o=!0),number(e)?n=e:plainObject(e)&&(n=e.level,null!=e.position?t=modelToRenderedPosition(e.position,a,i):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||r.panningEnabled||(o=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,o||!number(n)||n===a||null!=t&&(!number(t.x)||!number(t.y)))return null;if(null!=t){var s=i,u=a,l=n;return{zoomed:!0,panned:!0,zoom:l,pan:{x:-l/u*(t.x-s.x)+t.x,y:-l/u*(t.y-s.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:i}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,n=!0,r=!0,i=[],a=!1,o=!1;if(!e)return this;if(number(e.zoom)||(n=!1),plainObject(e.pan)||(r=!1),!n&&!r)return this;if(n){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=s,i.push("zoom"))}if(r&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var u=e.pan;number(u.x)&&(t.pan.x=u.x,o=!1),number(u.y)&&(t.pan.y=u.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(string$1(e)){var n=e;e=this.mutableElements().filter(n)}else elementOrCollection(e)||(e=this.mutableElements());if(0!==e.length){var r=e.boundingBox(),i=this.width(),a=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(r.x1+r.x2))/2,y:(a-t*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(e=window$1.getComputedStyle(r),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:r.clientWidth-t("padding-left")-t("padding-right"),height:r.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};corefn$8.centre=corefn$8.center,corefn$8.autolockNodes=corefn$8.autolock,corefn$8.autoungrabifyNodes=corefn$8.autoungrabify;var fn$6={data:define$3.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:define$3.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:define$3.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:define$3.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})};fn$6.attr=fn$6.data,fn$6.removeAttr=fn$6.removeData;var Core=function(e){var t=this,n=(e=extend({},e)).container;n&&!htmlElement(n)&&htmlElement(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var a=void 0!==window$1&&void 0!==n&&!e.headless,o=e;o.layout=extend({name:a?"grid":"null"},o.layout),o.renderer=extend({name:a?"canvas":"null"},o.renderer);var s=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},u=this._private={container:n,ready:!1,options:o,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,o.zoomingEnabled),userZoomingEnabled:s(!0,o.userZoomingEnabled),panningEnabled:s(!0,o.panningEnabled),userPanningEnabled:s(!0,o.userPanningEnabled),boxSelectionEnabled:s(!0,o.boxSelectionEnabled),autolock:s(!1,o.autolock,o.autolockNodes),autoungrabify:s(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:s(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:number(o.zoom)?o.zoom:1,pan:{x:plainObject(o.pan)&&number(o.pan.x)?o.pan.x:0,y:plainObject(o.pan)&&number(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});u.styleEnabled&&t.setStyle([]);var l=extend({},o,o.renderer);t.initRenderer(l);!function(e,t){if(e.some(promise))return Promise$1.all(e).then(t);t(e)}([o.style,o.elements],function(e){var n=e[0],a=e[1];u.styleEnabled&&t.style().append(n),function(e,n,r){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(plainObject(e)||array(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.one("load",n),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",r),t.emit("done")});var a=extend({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()}(a,function(){t.startAnimationLoop(),u.ready=!0,fn(o.ready)&&t.on("ready",o.ready);for(var e=0;e<i.length;e++){var n=i[e];t.on("ready",n)}r&&(r.readies=[]),t.emit("ready")},o.done)})},corefn$9=Core.prototype;extend(corefn$9,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(null!=e){var t=this,n=t._private,r=n.options;return!htmlElement(e)&&htmlElement(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(extend({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),t.startAnimationLoop(),t.style(r.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return copy(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements();if(plainObject(e)){if(t.startBatch(),e.elements){var i={},a=function(e,n){for(var r=[],a=[],o=0;o<e.length;o++){var s=e[o],u=""+s.data.id,l=t.getElementById(u);i[u]=!0,0!==l.length?a.push({ele:l,json:s}):n?(s.group=n,r.push(s)):r.push(s)}t.add(r);for(var c=0;c<a.length;c++){var f=a[c],h=f.ele,d=f.json;h.json(d)}};if(array(e.elements))a(e.elements);else for(var o=["nodes","edges"],s=0;s<o.length;s++){var u=o[s],l=e.elements[u];array(l)&&a(l,u)}var c=t.collection();r.filter(function(e){return!i[e.id()]}).forEach(function(e){e.isParent()?c.merge(e):e.remove()}),c.forEach(function(e){return e.children().move({parent:null})}),c.forEach(function(e){return function(e){return t.getElementById(e.id())}(e).remove()})}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],h=0;h<f.length;h++){var d=f[h];null!=e[d]&&t[d](e[d])}return t.endBatch(),this}var p={};!!e?p.elements=this.elements().map(function(e){return e.json()}):(p.elements={},r.forEach(function(e){var t=e.group();p.elements[t]||(p.elements[t]=[]),p.elements[t].push(e.json())})),this._private.styleEnabled&&(p.style=t.style().json()),p.data=copy(t.data());var g=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=copy(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=copy(g.renderer),p.hideEdgesOnViewport=g.hideEdgesOnViewport,p.textureOnViewport=g.textureOnViewport,p.wheelSensitivity=g.wheelSensitivity,p.motionBlur=g.motionBlur,p}}),corefn$9.$id=corefn$9.getElementById,[corefn,corefn$1,elesfn$u,corefn$2,corefn$3,corefn$4,corefn$5,corefn$6,corefn$7,corefn$8,fn$6].forEach(function(e){extend(corefn$9,e)});var defaults$9={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},getInfo=function(e){return e.scratch("breadthfirst")},setInfo=function(e,t){return e.scratch("breadthfirst",t)};function BreadthFirstLayout(e){this.options=extend({},defaults$9,e)}BreadthFirstLayout.prototype.run=function(){var e,t=this.options,n=t,r=t.cy,i=n.eles,a=i.nodes().filter(function(e){return!e.isParent()}),o=i,s=n.directed,u=n.maximal||n.maximalAdjustments>0,l=makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(elementOrCollection(n.roots))e=n.roots;else if(array(n.roots)){for(var c=[],f=0;f<n.roots.length;f++){var h=n.roots[f],d=r.getElementById(h);c.push(d)}e=r.collection(c)}else if(string$1(n.roots))e=r.$(n.roots);else if(s)e=a.roots();else{var p=i.components();e=r.collection();for(var g=function(t){var n=p[t],r=n.maxDegree(!1),i=n.filter(function(e){return e.degree(!1)===r});e=e.add(i)},v=0;v<p.length;v++)g(v)}var m=[],y={},b=function(e,t){null==m[t]&&(m[t]=[]);var n=m[t].length;m[t].push(e),setInfo(e,{index:n,depth:t})};o.bfs({roots:e,directed:n.directed,visit:function(e,t,n,r,i){var a=e[0],o=a.id();b(a,i),y[o]=!0}});for(var x=[],w=0;w<a.length;w++){var E=a[w];y[E.id()]||x.push(E)}var T=function(e){for(var t=m[e],n=0;n<t.length;n++){var r=t[n];null!=r?setInfo(r,{depth:e,index:n}):(t.splice(n,1),n--)}},_=function(){for(var e=0;e<m.length;e++)T(e)},C=function(e,t){for(var n=getInfo(e),r=e.incomers().filter(function(e){return e.isNode()&&i.has(e)}),a=-1,o=e.id(),s=0;s<r.length;s++){var u=r[s],l=getInfo(u);a=Math.max(a,l.depth)}return n.depth<=a&&(t[o]?null:(function(e,t){var n=getInfo(e),r=n.depth,i=n.index;m[r][i]=null,b(e,t)}(e,a+1),t[o]=!0,!0))};if(s&&u){var D=[],S={},A=function(e){return D.push(e)};for(a.forEach(function(e){return D.push(e)});D.length>0;){var k=D.shift(),R=C(k,S);if(R)k.outgoers().filter(function(e){return e.isNode()&&i.has(e)}).forEach(A);else if(null===R){warn("Detected double maximal shift for node `"+k.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}_();var O=0;if(n.avoidOverlap)for(var M=0;M<a.length;M++){var L=a[M].layoutDimensions(n),N=L.w,P=L.h;O=Math.max(O,N,P)}for(var I={},B=function(e){if(I[e.id()])return I[e.id()];for(var t=getInfo(e).depth,n=e.neighborhood(),r=0,i=0,o=0;o<n.length;o++){var s=n[o];if(!s.isEdge()&&!s.isParent()&&a.has(s)){var u=getInfo(s),l=u.index,c=u.depth;if(null!=l&&null!=c){var f=m[c].length;c<t&&(r+=l/f,i++)}}}return r/=i=Math.max(1,i),0===i&&(r=0),I[e.id()]=r,r},$=function(e,t){var n=B(e)-B(t);return 0===n?ascending(e.id(),t.id()):n},F=0;F<m.length;F++)m[F].sort($),T(F);for(var q=[],j=0;j<x.length;j++)q.push(x[j]);m.unshift(q),_();for(var z=0,Y=0;Y<m.length;Y++)z=Math.max(m[Y].length,z);var G=l.x1+l.w/2,V=l.x1+l.h/2,U=m.reduce(function(e,t){return Math.max(e,t.length)},0);return a.layoutPositions(this,n,function(e){var t=getInfo(e),r=t.depth,i=t.index,a=m[r].length,o=Math.max(l.w/((n.grid?U:a)+1),O),s=Math.max(l.h/(m.length+1),O),u=Math.min(l.w/2/m.length,l.h/2/m.length);if(u=Math.max(u,O),n.circle){var c=u*r+u-(m.length>0&&m[0].length<=3?u/2:0),f=2*Math.PI/m[r].length*i;return 0===r&&1===m[0].length&&(c=1),{x:G+c*Math.cos(f),y:V+c*Math.sin(f)}}return{x:G+(i+1-(a+1)/2)*o,y:(r+1)*s}}),this};var defaults$a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function CircleLayout(e){this.options=extend({},defaults$a,e)}CircleLayout.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=r.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var o,s=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u=s.x1+s.w/2,l=s.y1+s.h/2,c=(void 0===t.sweep?2*Math.PI-2*Math.PI/a.length:t.sweep)/Math.max(1,a.length-1),f=0,h=0;h<a.length;h++){var d=a[h].layoutDimensions(t),p=d.w,g=d.h;f=Math.max(f,p,g)}if(o=number(t.radius)?t.radius:a.length<=1?0:Math.min(s.h,s.w)/2-f,a.length>1&&t.avoidOverlap){f*=1.75;var v=Math.cos(c)-Math.cos(0),m=Math.sin(c)-Math.sin(0),y=Math.sqrt(f*f/(v*v+m*m));o=Math.max(y,o)}return a.layoutPositions(this,t,function(e,n){var r=t.startAngle+n*c*(i?1:-1),a=o*Math.cos(r),s=o*Math.sin(r);return{x:u+a,y:l+s}}),this};var defaults$b={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},DEBUG;function ConcentricLayout(e){this.options=extend({},defaults$b,e)}ConcentricLayout.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,i=t.eles.nodes().not(":parent"),a=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o=a.x1+a.w/2,s=a.y1+a.h/2,u=[],l=0,c=0;c<i.length;c++){var f,h=i[c];f=t.concentric(h),u.push({value:f,node:h}),h._private.scratch.concentric=f}i.updateStyle();for(var d=0;d<i.length;d++){var p=i[d].layoutDimensions(t);l=Math.max(l,p.w,p.h)}u.sort(function(e,t){return t.value-e.value});for(var g=t.levelWidth(i),v=[[]],m=v[0],y=0;y<u.length;y++){var b=u[y];if(m.length>0)Math.abs(m[0].value-b.value)>=g&&(m=[],v.push(m));m.push(b)}var x=l+t.minNodeSpacing;if(!t.avoidOverlap){var w=v.length>0&&v[0].length>1,E=(Math.min(a.w,a.h)/2-x)/(v.length+w?1:0);x=Math.min(x,E)}for(var T=0,_=0;_<v.length;_++){var C=v[_],D=void 0===t.sweep?2*Math.PI-2*Math.PI/C.length:t.sweep,S=C.dTheta=D/Math.max(1,C.length-1);if(C.length>1&&t.avoidOverlap){var A=Math.cos(S)-Math.cos(0),k=Math.sin(S)-Math.sin(0),R=Math.sqrt(x*x/(A*A+k*k));T=Math.max(R,T)}C.r=T,T+=x}if(t.equidistant){for(var O=0,M=0,L=0;L<v.length;L++){var N=v[L].r-M;O=Math.max(O,N)}M=0;for(var P=0;P<v.length;P++){var I=v[P];0===P&&(M=I.r),I.r=M,M+=O}}for(var B={},$=0;$<v.length;$++)for(var F=v[$],q=F.dTheta,j=F.r,z=0;z<F.length;z++){var Y=F[z],G=t.startAngle+(n?1:-1)*q*z,V={x:o+j*Math.cos(G),y:s+j*Math.sin(G)};B[Y.node.id()]=V}return i.layoutPositions(this,t,function(e){var t=e.id();return B[t]}),this};var defaults$c={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(e){this.options=extend({},defaults$c,e),this.options.layout=this}CoseLayout.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,!0!==e.animate&&!1!==e.animate||n.emit({type:"layoutstart",layout:n}),DEBUG=!0===e.debug;var r=createLayoutInfo(t,n,e);DEBUG&&printLayoutInfo(r),e.randomize&&randomizePositions(r);var i=performanceNow(),a=function(){refreshPositions(r,t,e),!0===e.fit&&t.fit(e.padding)},o=function(t){return!(n.stopped||t>=e.numIter)&&(step$1(r,e),r.temperature=r.temperature*e.coolingFactor,!(r.temperature<e.minTemp))},s=function(){if(!0===e.animate||!1===e.animate)a(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var t=e.eles.nodes(),i=getScaleInBoundsFn(r,e,t);t.layoutPositions(n,e,i)}},u=0,l=!0;if(!0===e.animate){!function t(){for(var n=0;l&&n<e.refresh;)l=o(u),u++,n++;l?(performanceNow()-i>=e.animationThreshold&&a(),requestAnimationFrame(t)):(separateComponents(r,e),s())}()}else{for(;l;)l=o(u),u++;separateComponents(r,e),s()}return this},CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var createLayoutInfo=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},o=n.eles.components(),s={},u=0;u<o.length;u++)for(var l=o[u],c=0;c<l.length;c++){s[l[c].id()]=u}for(u=0;u<a.nodeSize;u++){var f=(v=i[u]).layoutDimensions(n);(M={}).isLocked=v.locked(),M.id=v.data("id"),M.parentId=v.data("parent"),M.cmptId=s[v.id()],M.children=[],M.positionX=v.position("x"),M.positionY=v.position("y"),M.offsetX=0,M.offsetY=0,M.height=f.w,M.width=f.h,M.maxX=M.positionX+M.width/2,M.minX=M.positionX-M.width/2,M.maxY=M.positionY+M.height/2,M.minY=M.positionY-M.height/2,M.padLeft=parseFloat(v.style("padding")),M.padRight=parseFloat(v.style("padding")),M.padTop=parseFloat(v.style("padding")),M.padBottom=parseFloat(v.style("padding")),M.nodeRepulsion=fn(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,a.layoutNodes.push(M),a.idToIndex[M.id]=u}var h=[],d=0,p=-1,g=[];for(u=0;u<a.nodeSize;u++){var v,m=(v=a.layoutNodes[u]).parentId;null!=m?a.layoutNodes[a.idToIndex[m]].children.push(v.id):(h[++p]=v.id,g.push(v.id))}for(a.graphSet.push(g);d<=p;){var y=h[d++],b=a.idToIndex[y],x=a.layoutNodes[b].children;if(x.length>0){a.graphSet.push(x);for(u=0;u<x.length;u++)h[++p]=x[u]}}for(u=0;u<a.graphSet.length;u++){var w=a.graphSet[u];for(c=0;c<w.length;c++){var E=a.idToIndex[w[c]];a.indexToGraph[E]=u}}for(u=0;u<a.edgeSize;u++){var T=r[u],_={};_.id=T.data("id"),_.sourceId=T.data("source"),_.targetId=T.data("target");var C=fn(n.idealEdgeLength)?n.idealEdgeLength(T):n.idealEdgeLength,D=fn(n.edgeElasticity)?n.edgeElasticity(T):n.edgeElasticity,S=a.idToIndex[_.sourceId],A=a.idToIndex[_.targetId];if(a.indexToGraph[S]!=a.indexToGraph[A]){for(var k=findLCA(_.sourceId,_.targetId,a),R=a.graphSet[k],O=0,M=a.layoutNodes[S];-1===R.indexOf(M.id);)M=a.layoutNodes[a.idToIndex[M.parentId]],O++;for(M=a.layoutNodes[A];-1===R.indexOf(M.id);)M=a.layoutNodes[a.idToIndex[M.parentId]],O++;C*=O*n.nestingFactor}_.idealLength=C,_.elasticity=D,a.layoutEdges.push(_)}return a},findLCA=function(e,t,n){var r=findLCA_aux(e,t,0,n);return 2>r.count?0:r.graph},findLCA_aux=function e(t,n,r,i){var a=i.graphSet[r];if(-1<a.indexOf(t)&&-1<a.indexOf(n))return{count:2,graph:r};for(var o=0,s=0;s<a.length;s++){var u=a[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(0!==c.length){var f=e(t,n,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==f.count){if(1!==f.count)return f;if(2===++o)break}}}return{count:o,graph:r}},printLayoutInfo,randomizePositions=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var a=e.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},getScaleInBoundsFn=function(e,t,n){var r=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,a){var o=e.layoutNodes[e.idToIndex[n.data("id")]];if(t.boundingBox){var s=(o.positionX-i.x1)/i.w,u=(o.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+u*r.h}}return{x:o.positionX,y:o.positionY}}},refreshPositions=function(e,t,n){var r=n.layout,i=n.eles.nodes(),a=getScaleInBoundsFn(e,n,i);i.positions(a),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},step$1=function(e,t,n){calculateNodeForces(e,t),calculateEdgeForces(e),calculateGravityForces(e,t),propagateForces(e),updatePositions(e)},calculateNodeForces=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,a=0;a<i;a++)for(var o=e.layoutNodes[e.idToIndex[r[a]]],s=a+1;s<i;s++){var u=e.layoutNodes[e.idToIndex[r[s]]];nodeRepulsion(o,u,e,t)}},randomDistance=function(e){return-e+2*e*Math.random()},nodeRepulsion=function(e,t,n,r){if(e.cmptId===t.cmptId||n.isCompound){var i=t.positionX-e.positionX,a=t.positionY-e.positionY;0===i&&0===a&&(i=randomDistance(1),a=randomDistance(1));var o=nodesOverlap(e,t,i,a);if(o>0)var s=(l=r.nodeOverlap*o)*i/(g=Math.sqrt(i*i+a*a)),u=l*a/g;else{var l,c=findClippingPoint(e,i,a),f=findClippingPoint(t,-1*i,-1*a),h=f.x-c.x,d=f.y-c.y,p=h*h+d*d,g=Math.sqrt(p);s=(l=(e.nodeRepulsion+t.nodeRepulsion)/p)*h/g,u=l*d/g}e.isLocked||(e.offsetX-=s,e.offsetY-=u),t.isLocked||(t.offsetX+=s,t.offsetY+=u)}},nodesOverlap=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else i=t.maxX-e.minX;if(r>0)var a=e.maxY-t.minY;else a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},findClippingPoint=function(e,t,n){var r=e.positionX,i=e.positionY,a=e.height||1,o=e.width||1,s=n/t,u=a/o,l={};return 0===t&&0<n?(l.x=r,l.y=i+a/2,l):0===t&&0>n?(l.x=r,l.y=i+a/2,l):0<t&&-1*u<=s&&s<=u?(l.x=r+o/2,l.y=i+o*n/2/t,l):0>t&&-1*u<=s&&s<=u?(l.x=r-o/2,l.y=i-o*n/2/t,l):0<n&&(s<=-1*u||s>=u)?(l.x=r+a*t/2/n,l.y=i+a/2,l):0>n&&(s<=-1*u||s>=u)?(l.x=r-a*t/2/n,l.y=i-a/2,l):l},calculateEdgeForces=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],a=e.layoutNodes[i],o=e.idToIndex[r.targetId],s=e.layoutNodes[o],u=s.positionX-a.positionX,l=s.positionY-a.positionY;if(0!==u||0!==l){var c=findClippingPoint(a,u,l),f=findClippingPoint(s,-1*u,-1*l),h=f.x-c.x,d=f.y-c.y,p=Math.sqrt(h*h+d*d),g=Math.pow(r.idealLength-p,2)/r.elasticity;if(0!==p)var v=g*h/p,m=g*d/p;else v=0,m=0;a.isLocked||(a.offsetX+=v,a.offsetY+=m),s.isLocked||(s.offsetX-=v,s.offsetY-=m)}}},calculateGravityForces=function(e,t){for(var n=0;n<e.graphSet.length;n++){var r=e.graphSet[n],i=r.length;if(0===n)var a=e.clientHeight/2,o=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[r[0]]],u=e.layoutNodes[e.idToIndex[s.parentId]];a=u.positionX,o=u.positionY}for(var l=0;l<i;l++){var c=e.layoutNodes[e.idToIndex[r[l]]];if(!c.isLocked){var f=a-c.positionX,h=o-c.positionY,d=Math.sqrt(f*f+h*h);if(d>1){var p=t.gravity*f/d,g=t.gravity*h/d;c.offsetX+=p,c.offsetY+=g}}}}},propagateForces=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var a=n[r++],o=e.idToIndex[a],s=e.layoutNodes[o],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,c=s.offsetY,f=0;f<u.length;f++){var h=e.layoutNodes[e.idToIndex[u[f]]];h.offsetX+=l,h.offsetY+=c,n[++i]=u[f]}s.offsetX=0,s.offsetY=0}}},updatePositions=function(e,t){for(var n=0;n<e.nodeSize;n++){0<(i=e.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(n=0;n<e.nodeSize;n++){if(!(0<(i=e.layoutNodes[n]).children.length||i.isLocked)){var r=limitForce(i.offsetX,i.offsetY,e.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,updateAncestryBoundaries(i,e)}}for(n=0;n<e.nodeSize;n++){var i;0<(i=e.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},limitForce=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else i={x:e,y:t};return i},updateAncestryBoundaries=function e(t,n){var r=t.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],a=!1;return(null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,a=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,a=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,a=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,a=!0),a?e(i,n):void 0}},separateComponents=function(e,t){for(var n=e.layoutNodes,r=[],i=0;i<n.length;i++){var a=n[i],o=a.cmptId;(r[o]=r[o]||[]).push(a)}var s=0;for(i=0;i<r.length;i++){if(g=r[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var u=0;u<g.length;u++){var l=g[u];g.x1=Math.min(g.x1,l.positionX-l.width/2),g.x2=Math.max(g.x2,l.positionX+l.width/2),g.y1=Math.min(g.y1,l.positionY-l.height/2),g.y2=Math.max(g.y2,l.positionY+l.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}}r.sort(function(e,t){return t.w*t.h-e.w*e.h});var c=0,f=0,h=0,d=0,p=Math.sqrt(s)*e.clientWidth/e.clientHeight;for(i=0;i<r.length;i++){var g;if(g=r[i]){for(u=0;u<g.length;u++){(l=g[u]).isLocked||(l.positionX+=c-g.x1,l.positionY+=f-g.y1)}c+=g.w+t.componentSpacing,h+=g.w+t.componentSpacing,d=Math.max(d,g.h),h>p&&(f+=d+t.componentSpacing,c=0,h=0,d=0)}}},defaults$d={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function GridLayout(e){this.options=extend({},defaults$d,e)}GridLayout.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles.nodes().not(":parent");t.sort&&(r=r.sort(t.sort));var i=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===i.h||0===i.w)r.layoutPositions(this,t,function(e){return{x:i.x1,y:i.y1}});else{var a=r.size(),o=Math.sqrt(a*i.h/i.w),s=Math.round(o),u=Math.round(i.w/i.h*o),l=function(e){if(null==e)return Math.min(s,u);Math.min(s,u)==s?s=e:u=e},c=function(e){if(null==e)return Math.max(s,u);Math.max(s,u)==s?s=e:u=e},f=t.rows,h=null!=t.cols?t.cols:t.columns;if(null!=f&&null!=h)s=f,u=h;else if(null!=f&&null==h)s=f,u=Math.ceil(a/s);else if(null==f&&null!=h)u=h,s=Math.ceil(a/u);else if(u*s>a){var d=l(),p=c();(d-1)*p>=a?l(d-1):(p-1)*d>=a&&c(p-1)}else for(;u*s<a;){var g=l(),v=c();(v+1)*g>=a?c(v+1):l(g+1)}var m=i.w/u,y=i.h/s;if(t.condense&&(m=0,y=0),t.avoidOverlap)for(var b=0;b<r.length;b++){var x=r[b],w=x._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var E=x.layoutDimensions(t),T=t.avoidOverlapPadding,_=E.w+T,C=E.h+T;m=Math.max(m,_),y=Math.max(y,C)}for(var D={},S=function(e,t){return!!D["c-"+e+"-"+t]},A=function(e,t){D["c-"+e+"-"+t]=!0},k=0,R=0,O=function(){++R>=u&&(R=0,k++)},M={},L=0;L<r.length;L++){var N=r[L],P=t.position(N);if(P&&(void 0!==P.row||void 0!==P.col)){var I={row:P.row,col:P.col};if(void 0===I.col)for(I.col=0;S(I.row,I.col);)I.col++;else if(void 0===I.row)for(I.row=0;S(I.row,I.col);)I.row++;M[N.id()]=I,A(I.row,I.col)}}r.layoutPositions(this,t,function(e,t){var n,r;if(e.locked()||e.isParent())return!1;var a=M[e.id()];if(a)n=a.col*m+m/2+i.x1,r=a.row*y+y/2+i.y1;else{for(;S(k,R);)O();n=R*m+m/2+i.x1,r=k*y+y/2+i.y1,A(k,R),O()}return{x:n,y:r}})}return this};var defaults$e={ready:function(){},stop:function(){}};function NullLayout(e){this.options=extend({},defaults$e,e)}NullLayout.prototype.run=function(){var e=this.options,t=e.eles;e.cy;return this.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},NullLayout.prototype.stop=function(){return this};var defaults$f={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function PresetLayout(e){this.options=extend({},defaults$f,e)}PresetLayout.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=fn(e.positions);return t.layoutPositions(this,e,function(t,r){var i=function(t){if(null==e.positions)return copyPosition(t.position());if(n)return e.positions(t);var r=e.positions[t._private.data.id];return null==r?null:r}(t);return!t.locked()&&null!=i&&i}),this};var defaults$g={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function RandomLayout(e){this.options=extend({},defaults$g,e)}RandomLayout.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles.nodes().not(":parent"),r=makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.layoutPositions(this,e,function(e,t){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(e){this.options=e,this.notifications=0}var noop$1$1=function(){};NullRenderer.prototype={recalculateRenderedStyle:noop$1$1,notify:function(){this.notifications++},init:noop$1$1,isHeadless:function(){return!0}};var BRp={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,a,o){var s=i.x-n/2-o,u=i.x+n/2+o,l=i.y-n/2-o,c=i.y+n/2+o;return s<=e&&e<=u&&l<=t&&t<=c},r=function(e,t,n,r,i){var a=e*Math.cos(r)-t*Math.sin(r),o=(e*Math.sin(r)+t*Math.cos(r))*n;return{x:a*n+i.x,y:o+i.y}},i=function(e,t,n,i){for(var a=[],o=0;o<e.length;o+=2){var s=e[o],u=e[o+1];a.push(r(s,u,t,n,i))}return a},a=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},o=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(r,s){string$1(s)&&(s=e[s]),e[r]=extend({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,r,o,s){var u=a(i(this.points,n+2*s,r,o));return pointInsidePolygonPoints(e,t,u)},roughCollide:n,draw:function(e,n,r,a){var o=i(this.points,n,r,a);t.arrowShapeImpl("polygon")(e,o)},spacing:function(e){return 0},gap:o},s)};s("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,a,o,s){var u=i(this.points,n,a,o),l=this.controlPoint,c=r(l[0],l[1],n,a,o);t.arrowShapeImpl(this.name)(e,u,c)},gap:function(e){return.8*o(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,r,o,s,u){var l=a(i(this.points,n+2*u,r,o)),c=a(i(this.pointsTee,n+2*u,r,o));return pointInsidePolygonPoints(e,t,l)||pointInsidePolygonPoints(e,t,c)},draw:function(e,n,r,a,o){var s=i(this.points,n,r,a),u=i(this.pointsTee,n,r,a);t.arrowShapeImpl(this.name)(e,s,u)}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),r=t/e;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(e,t,n,r,o,s,u){var l=a(i(this.points,n+2*u,r,o)),c=a(i(this.crossLinePts(n,s),n+2*u,r,o));return pointInsidePolygonPoints(e,t,l)||pointInsidePolygonPoints(e,t,c)},draw:function(e,n,r,a,o){var s=i(this.points,n,r,a),u=i(this.crossLinePts(n,o),n,r,a);t.arrowShapeImpl(this.name)(e,s,u)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*o(e)}}),s("circle",{radius:.15,collide:function(e,t,n,r,i,a,o){var s=i;return Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((n+2*o)*this.radius,2)},draw:function(e,n,r,i,a){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},BRp$1={projectIntoViewport:function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],a=r[1],o=r[4],s=n.pan(),u=n.zoom();return[((e-i)/o-s.x)/u,((t-a)/o-s.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=window$1.getComputedStyle(e),r=function(e){return parseFloat(n.getPropertyValue(e))},i=r("padding-left"),a=r("padding-right"),o=r("padding-top"),s=r("padding-bottom"),u=r("border-left-width"),l=r("border-right-width"),c=r("border-top-width"),f=(r("border-bottom-width"),e.clientWidth),h=e.clientHeight,d=i+a,p=o+s,g=u+l,v=t.width/(f+g),m=f-d,y=h-p,b=t.left+i+u,x=t.top+o+c;return this.containerBB=[b,x,m,y,v]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},findNearestElements:function(e,t,n,r){var i,a,o=this,s=this,u=s.getCachedZSortedEles(),l=[],c=s.cy.zoom(),f=s.cy.hasCompoundNodes(),h=(r?24:8)/c,d=(r?8:2)/c,p=(r?8:2)/c,g=1/0;function v(e,t){if(e.isNode()){if(a)return;a=e,l.push(e)}if(e.isEdge()&&(null==t||t<g))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var n=0;n<l.length;n++)if(l[n].isEdge()){l[n]=e,i=e,g=null!=t?t:g;break}}else l.push(e),i=e,g=null!=t?t:g}function m(n){var r=n.outerWidth()+2*d,i=n.outerHeight()+2*d,a=r/2,u=i/2,l=n.position();if(l.x-a<=e&&e<=l.x+a&&l.y-u<=t&&t<=l.y+u&&s.nodeShapes[o.getNodeShape(n)].checkPoint(e,t,0,r,i,l.x,l.y))return v(n,0),!0}function y(n){var r,i=n._private,a=i.rscratch,u=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,d=u/2+h,p=d*d,g=2*d,y=i.source,b=i.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var x=a.allpts,w=0;w+3<x.length;w+=2)if(inLineVicinity(e,t,x[w],x[w+1],x[w+2],x[w+3],g)&&p>(r=sqdistToFiniteLine(e,t,x[w],x[w+1],x[w+2],x[w+3])))return v(n,r),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(x=a.allpts,w=0;w+5<a.allpts.length;w+=4)if(inBezierVicinity(e,t,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5],g)&&p>(r=sqdistToQuadraticBezier(e,t,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5])))return v(n,r),!0;y=y||i.source,b=b||i.target;var E=o.getArrowWidth(u,c),T=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(w=0;w<T.length;w++){var _=T[w],C=s.arrowShapes[n.pstyle(_.name+"-arrow-shape").value],D=n.pstyle("width").pfValue;if(C.roughCollide(e,t,E,_.angle,{x:_.x,y:_.y},D,h)&&C.collide(e,t,E,_.angle,{x:_.x,y:_.y},D,h))return v(n),!0}f&&l.length>0&&(m(y),m(b))}function b(e,t,n){return getPrefixedProperty(e,t,n)}function x(n,r){var i,a=n._private,o=p;i=r?r+"-":"";var s=a.labelBounds[r||"main"],u=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&u){var l=a.rstyle,c=b(l,"labelX",r),f=b(l,"labelY",r),h=b(a.rscratch,"labelAngle",r),d=s.x1-o,g=s.x2+o,m=s.y1-o,y=s.y2+o;if(h){var x=Math.cos(h),w=Math.sin(h),E=function(e,t){return{x:(e-=c)*x-(t-=f)*w+c,y:e*w+t*x+f}},T=E(d,m),_=E(d,y),C=E(g,m),D=E(g,y),S=[T.x,T.y,C.x,C.y,D.x,D.y,_.x,_.y];if(pointInsidePolygonPoints(e,t,S))return v(n),!0}else if(inBoundingBox(s,e,t))return v(n),!0}}n&&(u=u.interactive);for(var w=u.length-1;w>=0;w--){var E=u[w];E.isNode()?m(E)||x(E):y(E)||x(E)||x(E,"source")||x(E,"target")}return l},getAllInBox:function(e,t,n,r){for(var i=this.getCachedZSortedEles().interactive,a=[],o=Math.min(e,n),s=Math.max(e,n),u=Math.min(t,r),l=Math.max(t,r),c=makeBoundingBox({x1:e=o,y1:t=u,x2:n=s,y2:r=l}),f=0;f<i.length;f++){var h=i[f];if(h.isNode()){var d=h,p=d.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});boundingBoxesIntersect(c,p)&&!boundingBoxInBoundingBox(p,c)&&a.push(d)}else{var g=h,v=g._private,m=v.rscratch;if(null!=m.startX&&null!=m.startY&&!inBoundingBox(c,m.startX,m.startY))continue;if(null!=m.endX&&null!=m.endY&&!inBoundingBox(c,m.endX,m.endY))continue;if("bezier"===m.edgeType||"multibezier"===m.edgeType||"self"===m.edgeType||"compound"===m.edgeType||"segments"===m.edgeType||"haystack"===m.edgeType){for(var y=v.rstyle.bezierPts||v.rstyle.linePts||v.rstyle.haystackPts,b=!0,x=0;x<y.length;x++)if(!pointInBoundingBox(c,y[x])){b=!1;break}b&&a.push(g)}else"haystack"!==m.edgeType&&"straight"!==m.edgeType||a.push(g)}}return a}},BRp$2={calculateArrowAngles:function(e){var t,n,r,i,a,o,s=e._private.rscratch,u="haystack"===s.edgeType,l="bezier"===s.edgeType,c="multibezier"===s.edgeType,f="segments"===s.edgeType,h="compound"===s.edgeType,d="self"===s.edgeType;if(u?(r=s.haystackPts[0],i=s.haystackPts[1],a=s.haystackPts[2],o=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,a=s.arrowEndX,o=s.arrowEndY),g=s.midX,v=s.midY,f)t=r-s.segpts[0],n=i-s.segpts[1];else if(c||h||d||l){var p=s.allpts;t=r-qbezierAt(p[0],p[2],p[4],.1),n=i-qbezierAt(p[1],p[3],p[5],.1)}else t=r-g,n=i-v;s.srcArrowAngle=getAngleFromDisp(t,n);var g=s.midX,v=s.midY;if(u&&(g=(r+a)/2,v=(i+o)/2),t=a-r,n=o-i,f)if((p=s.allpts).length/2%2==0){var m=(y=p.length/2)-2;t=p[y]-p[m],n=p[y+1]-p[m+1]}else{m=(y=p.length/2-1)-2;var y,b=y+2;t=p[y]-p[m],n=p[y+1]-p[m+1]}else if(c||h||d){var x,w,E,T,p=s.allpts;if(s.ctrlpts.length/2%2==0){var _=(C=(D=p.length/2-1)+2)+2;x=qbezierAt(p[D],p[C],p[_],0),w=qbezierAt(p[D+1],p[C+1],p[_+1],0),E=qbezierAt(p[D],p[C],p[_],1e-4),T=qbezierAt(p[D+1],p[C+1],p[_+1],1e-4)}else{var C,D;_=(C=p.length/2-1)+2;x=qbezierAt(p[D=C-2],p[C],p[_],.4999),w=qbezierAt(p[D+1],p[C+1],p[_+1],.4999),E=qbezierAt(p[D],p[C],p[_],.5),T=qbezierAt(p[D+1],p[C+1],p[_+1],.5)}t=E-x,n=T-w}(s.midtgtArrowAngle=getAngleFromDisp(t,n),s.midDispX=t,s.midDispY=n,t*=-1,n*=-1,f)&&((p=s.allpts).length/2%2==0||(t=-(p[b=(y=p.length/2-1)+2]-p[y]),n=-(p[b+1]-p[y+1])));if(s.midsrcArrowAngle=getAngleFromDisp(t,n),f)t=a-s.segpts[s.segpts.length-2],n=o-s.segpts[s.segpts.length-1];else if(c||h||d||l){var S=(p=s.allpts).length;t=a-qbezierAt(p[S-6],p[S-4],p[S-2],.9),n=o-qbezierAt(p[S-5],p[S-3],p[S-1],.9)}else t=a-g,n=o-v;s.tgtArrowAngle=getAngleFromDisp(t,n)}};BRp$2.getArrowWidth=BRp$2.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r,r)};var BRp$3={};function getPts(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}BRp$3.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,i=r.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=r.source,s=r.target,u=o.position(),l=s.position(),c=o.width(),f=s.width(),h=o.height(),d=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+u.x,i.source.y*h*p+u.y,i.target.x*f*p+l.x,i.target.y*d*p+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},BRp$3.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=t.posPts,i=t.intersectionPts,a=t.vectorNormInverse,o=e.pstyle("edge-distances").value,s=e.pstyle("segment-weights"),u=e.pstyle("segment-distances"),l=Math.min(s.pfValue.length,u.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<l;c++){var f=s.pfValue[c],h=u.pfValue[c],d=1-f,p=f,g="node-position"===o?r:i,v={x:g.x1*d+g.x2*p,y:g.y1*d+g.y2*p};n.segpts.push(v.x+a.x*h,v.y+a.y*h)}},BRp$3.findLoopPoints=function(e,t,n,r){var i=e._private.rscratch,a=t.dirCounts,o=t.srcPos,s=e.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,f=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=n,d=f;r&&(h=0,d=u);var p=l-Math.PI/2,g=p-c/2,v=p+c/2,m=String(l+"_"+c);h=void 0===a[m]?a[m]=0:++a[m],i.ctrlpts=[o.x+1.4*Math.cos(g)*d*(h/3+1),o.y+1.4*Math.sin(g)*d*(h/3+1),o.x+1.4*Math.cos(v)*d*(h/3+1),o.y+1.4*Math.sin(v)*d*(h/3+1)]},BRp$3.findCompoundLoopPoints=function(e,t,n,r){var i=e._private.rscratch;i.edgeType="compound";var a=t.srcPos,o=t.tgtPos,s=t.srcW,u=t.srcH,l=t.tgtW,c=t.tgtH,f=e.pstyle("control-point-step-size").pfValue,h=e.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,p=n,g=f;r&&(p=0,g=d);var v={x:a.x-s/2,y:a.y-u/2},m={x:o.x-l/2,y:o.y-c/2},y={x:Math.min(v.x,m.x),y:Math.min(v.y,m.y)},b=Math.max(.5,Math.log(.01*s)),x=Math.max(.5,Math.log(.01*l));i.ctrlpts=[y.x,y.y-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*b,y.x-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*x,y.y]},BRp$3.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},BRp$3.findBezierPoints=function(e,t,n,r,i){var a=e._private.rscratch,o=t.vectorNormInverse,s=t.posPts,u=t.intersectionPts,l=e.pstyle("edge-distances").value,c=e.pstyle("control-point-step-size").pfValue,f=e.pstyle("control-point-distances"),h=e.pstyle("control-point-weights"),d=f&&h?Math.min(f.value.length,h.value.length):1,p=f?f.pfValue[0]:void 0,g=h.value[0],v=r;a.edgeType=v?"multibezier":"bezier",a.ctrlpts=[];for(var m=0;m<d;m++){var y=(.5-t.eles.length/2+n)*c*(i?-1:1),b=void 0,x=signum(y);v&&(p=f?f.pfValue[m]:c,g=h.value[m]);var w=void 0!==(b=r?p:void 0!==p?x*p:void 0)?b:y,E=1-g,T=g,_="node-position"===l?s:u,C={x:_.x1*E+_.x2*T,y:_.y1*E+_.y2*T};a.ctrlpts.push(C.x+o.x*w,C.y+o.y*w)}},BRp$3.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var r=t.posPts,i=t.srcW,a=t.srcH,o=t.tgtW,s=t.tgtH,u="node-position"!==e.pstyle("edge-distances").value,l=e.pstyle("taxi-direction").value,c=l,f=e.pstyle("taxi-turn"),h=f.pfValue,d=e.pstyle("taxi-turn-min-distance").pfValue,p="%"===f.units,g=u?(i+o)/2:0,v=u?(a+s)/2:0,m=r.x2-r.x1,y=r.y2-r.y1,b=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},x=b(m,g),w=b(y,v),E=!1;"auto"===l?l=Math.abs(x)>Math.abs(w)?"horizontal":"vertical":"upward"===l||"downward"===l?(l="vertical",E=!0):"leftward"!==l&&"rightward"!==l||(l="horizontal",E=!0);var T="vertical"===l,_=T?w:x,C=T?y:m,D=signum(C),S=!1;E&&p||!("downward"===c&&C<0||"upward"===c&&C>0||"leftward"===c&&C>0||"rightward"===c&&C<0)||(_=(D*=-1)*Math.abs(_),S=!0);var A=p?h*_:h*D,k=function(e){return Math.abs(e)<d||Math.abs(e)>=Math.abs(_)},R=k(A),O=k(_-A);if((R||O)&&!S)if(T){var M=Math.abs(C)<=a/2,L=Math.abs(m)<=o/2;if(M){var N=(r.x1+r.x2)/2,P=r.y1,I=r.y2;n.segpts=[N,P,N,I]}else if(L){var B=(r.y1+r.y2)/2,$=r.x1,F=r.x2;n.segpts=[$,B,F,B]}else n.segpts=[r.x1,r.y2]}else{var q=Math.abs(C)<=i/2,j=Math.abs(y)<=s/2;if(q){var z=(r.y1+r.y2)/2,Y=r.x1,G=r.x2;n.segpts=[Y,z,G,z]}else if(j){var V=(r.x1+r.x2)/2,U=r.y1,X=r.y2;n.segpts=[V,U,V,X]}else n.segpts=[r.x2,r.y1]}else if(T){var W=r.y1+A+(u?a/2*D:0),H=r.x1,K=r.x2;n.segpts=[H,W,K,W]}else{var Q=r.x1+A+(u?i/2*D:0),Z=r.y1,J=r.y2;n.segpts=[Q,Z,Q,J]}},BRp$3.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if("bezier"===n.edgeType){var r=t.srcPos,i=t.tgtPos,a=t.srcW,o=t.srcH,s=t.tgtW,u=t.tgtH,l=t.srcShape,c=t.tgtShape,f=!number(n.startX)||!number(n.startY),h=!number(n.arrowStartX)||!number(n.arrowStartY),d=!number(n.endX)||!number(n.endY),p=!number(n.arrowEndX)||!number(n.arrowEndY),g=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),v=dist$1({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),m=v<g,y=dist$1({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=y<g,x=!1;if(f||h||m){x=!0;var w={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},E=Math.sqrt(w.x*w.x+w.y*w.y),T={x:w.x/E,y:w.y/E},_=Math.max(a,o),C={x:n.ctrlpts[0]+2*T.x*_,y:n.ctrlpts[1]+2*T.y*_},D=l.intersectLine(r.x,r.y,a,o,C.x,C.y,0);m?(n.ctrlpts[0]=n.ctrlpts[0]+T.x*(g-v),n.ctrlpts[1]=n.ctrlpts[1]+T.y*(g-v)):(n.ctrlpts[0]=D[0]+T.x*g,n.ctrlpts[1]=D[1]+T.y*g)}if(d||p||b){x=!0;var S={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},A=Math.sqrt(S.x*S.x+S.y*S.y),k={x:S.x/A,y:S.y/A},R=Math.max(a,o),O={x:n.ctrlpts[0]+2*k.x*R,y:n.ctrlpts[1]+2*k.y*R},M=c.intersectLine(i.x,i.y,s,u,O.x,O.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+k.x*(g-y),n.ctrlpts[1]=n.ctrlpts[1]+k.y*(g-y)):(n.ctrlpts[0]=M[0]+k.x*g,n.ctrlpts[1]=M[1]+k.y*g)}x&&this.findEndpoints(e)}},BRp$3.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);var r;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,.5,t.midX=qbezierAt(t.allpts[r],t.allpts[r+2],t.allpts[r+4],.5),t.midY=qbezierAt(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType)if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0){var i=t.segpts.length/2,a=i-2;t.midX=(t.segpts[a]+t.segpts[i])/2,t.midY=(t.segpts[a+1]+t.segpts[i+1])/2}else{var o=t.segpts.length/2-1;t.midX=t.segpts[o],t.midY=t.segpts[o+1]}},BRp$3.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||number(t.startX)&&number(t.startY)&&number(t.endX)&&number(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,warn("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},BRp$3.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new Map$1,get:function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null},set:function(e,t){var n=this.map.get(e[0]);null==n&&(n=new Map$1,this.map.set(e[0],n)),n.set(e[1],t)}},a=[],o=[],s=0;s<e.length;s++){var u=e[s],l=u._private,c=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace())if("haystack"!==c){var f="unbundled-bezier"===c||"segments"===c||"straight"===c||"taxi"===c,h="unbundled-bezier"===c||"bezier"===c,d=l.source,p=l.target,g=[d.poolIndex(),p.poolIndex()].sort(),v=i.get(g);null==v&&(v={eles:[]},i.set(g,v),a.push(g)),v.eles.push(u),f&&(v.hasUnbundled=!0),h&&(v.hasBezier=!0)}else o.push(u)}for(var m=function(e){var o=a[e],s=i.get(o),u=void 0;if(!s.hasUnbundled){var l=s.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});clearArray(s.eles),l.forEach(function(e){return s.eles.push(e)}),s.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var c=s.eles[0],f=c.source(),h=c.target();if(f.poolIndex()>h.poolIndex()){var d=f;f=h,h=d}var p=s.srcPos=f.position(),g=s.tgtPos=h.position(),v=s.srcW=f.outerWidth(),m=s.srcH=f.outerHeight(),y=s.tgtW=h.outerWidth(),b=s.tgtH=h.outerHeight(),x=s.srcShape=n.nodeShapes[t.getNodeShape(f)],w=s.tgtShape=n.nodeShapes[t.getNodeShape(h)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var E=0;E<s.eles.length;E++){var T=s.eles[E],_=T[0]._private.rscratch,C=T.pstyle("curve-style").value,D="unbundled-bezier"===C||"segments"===C||"taxi"===C,S=!f.same(T.source());if(!s.calculatedIntersection&&f!==h&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var A=x.intersectLine(p.x,p.y,v,m,g.x,g.y,0),k=s.srcIntn=A,R=w.intersectLine(g.x,g.y,y,b,p.x,p.y,0),O=s.tgtIntn=R,M=s.intersectionPts={x1:A[0],x2:R[0],y1:A[1],y2:R[1]},L=s.posPts={x1:p.x,x2:g.x,y1:p.y,y2:g.y},N=R[1]-A[1],P=R[0]-A[0],I=Math.sqrt(P*P+N*N),B=s.vector={x:P,y:N},$=s.vectorNorm={x:B.x/I,y:B.y/I},F={x:-$.y,y:$.x};s.nodesOverlap=!number(I)||w.checkPoint(A[0],A[1],0,y,b,g.x,g.y)||x.checkPoint(R[0],R[1],0,v,m,p.x,p.y),s.vectorNormInverse=F,u={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:g,tgtPos:p,srcW:y,srcH:b,tgtW:v,tgtH:m,srcIntn:O,tgtIntn:k,srcShape:w,tgtShape:x,posPts:{x1:L.x2,y1:L.y2,x2:L.x1,y2:L.y1},intersectionPts:{x1:M.x2,y1:M.y2,x2:M.x1,y2:M.y1},vector:{x:-B.x,y:-B.y},vectorNorm:{x:-$.x,y:-$.y},vectorNormInverse:{x:-F.x,y:-F.y}}}var q=S?u:s;_.nodesOverlap=q.nodesOverlap,_.srcIntn=q.srcIntn,_.tgtIntn=q.tgtIntn,r&&(f.isParent()||f.isChild()||h.isParent()||h.isChild())&&(f.parents().anySame(h)||h.parents().anySame(f)||f.same(h)&&f.isParent())?t.findCompoundLoopPoints(T,q,E,D):f===h?t.findLoopPoints(T,q,E,D):"segments"===C?t.findSegmentsPoints(T,q):"taxi"===C?t.findTaxiPoints(T,q):"straight"===C||!D&&s.eles.length%2==1&&E===Math.floor(s.eles.length/2)?t.findStraightEdgePoints(T):t.findBezierPoints(T,q,E,D,S),t.findEndpoints(T),t.tryToCorrectInvalidPoints(T,q),t.checkForInvalidEdgeWarning(T),t.storeAllpts(T),t.storeEdgeProjections(T),t.calculateArrowAngles(T),t.recalculateEdgeLabelProjections(T),t.calculateLabelAngles(T)}},y=0;y<a.length;y++)m(y);this.findHaystackPoints(o)}},BRp$3.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),getPts(t.segpts)},BRp$3.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(e),getPts(t.ctrlpts)},BRp$3.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var BRp$4={manualEndptToPx:function(e,t){var n=e.position(),r=e.outerWidth(),i=e.outerHeight();if(2===t.value.length){var a=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(a[0]=a[0]*r),"%"===t.units[1]&&(a[1]=a[1]*i),a[0]+=n.x,a[1]+=n.y,a}var o=t.pfValue[0];o=-Math.PI/2+o;var s=2*Math.max(r,i),u=[n.x+Math.cos(o)*s,n.y+Math.sin(o)*s];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,r,i,u[0],u[1],0)},findEndpoints:function(e){var t,n,r,i,a,o=this,s=e.source()[0],u=e.target()[0],l=s.position(),c=u.position(),f=e.pstyle("target-arrow-shape").value,h=e.pstyle("source-arrow-shape").value,d=e.pstyle("target-distance-from-node").pfValue,p=e.pstyle("source-distance-from-node").pfValue,g=e.pstyle("curve-style").value,v=e._private.rscratch,m=v.edgeType,y="self"===m||"compound"===m,b="bezier"===m||"multibezier"===m||y,x="bezier"!==m,w="straight"===m||"segments"===m,E="segments"===m,T=b||x||w,_=y||"taxi"===g,C=e.pstyle("source-endpoint"),D=_?"outside-to-node":C.value,S=e.pstyle("target-endpoint"),A=_?"outside-to-node":S.value;if(v.srcManEndpt=C,v.tgtManEndpt=S,b){var k=[v.ctrlpts[0],v.ctrlpts[1]];n=x?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:k,r=k}else if(w){var R=E?v.segpts.slice(0,2):[c.x,c.y];n=E?v.segpts.slice(v.segpts.length-2):[l.x,l.y],r=R}if("inside-to-node"===A)t=[c.x,c.y];else if(S.units)t=this.manualEndptToPx(u,S);else if("outside-to-line"===A)t=v.tgtIntn;else if("outside-to-node"===A||"outside-to-node-or-label"===A?i=n:"outside-to-line"!==A&&"outside-to-line-or-label"!==A||(i=[l.x,l.y]),t=o.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===A||"outside-to-line-or-label"===A){var O=u._private.rscratch,M=O.labelWidth,L=O.labelHeight,N=O.labelX,P=O.labelY,I=u.pstyle("text-valign").value;"top"===I?P-=L/2:"bottom"===I&&(P+=L/2);var B=u.pstyle("text-halign").value;"left"===B?N-=M/2:"right"===B&&(N+=M/2);var $=o.nodeShapes.rectangle.intersectLine(N,P,M,L,i[0],i[1],0),F=l,q=sqdist(F,array2point(t));sqdist(F,array2point($))<q&&(t=$)}var j=shortenIntersection(t,n,o.arrowShapes[f].spacing(e)+d),z=shortenIntersection(t,n,o.arrowShapes[f].gap(e)+d);if(v.endX=z[0],v.endY=z[1],v.arrowEndX=j[0],v.arrowEndY=j[1],"inside-to-node"===D)t=[l.x,l.y];else if(C.units)t=this.manualEndptToPx(s,C);else if("outside-to-line"===D)t=v.srcIntn;else if("outside-to-node"===D||"outside-to-node-or-label"===D?a=r:"outside-to-line"!==D&&"outside-to-line-or-label"!==D||(a=[c.x,c.y]),t=o.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),a[0],a[1],0),"outside-to-node-or-label"===D||"outside-to-line-or-label"===D){var Y=s._private.rscratch,G=Y.labelWidth,V=Y.labelHeight,U=Y.labelX,X=Y.labelY,W=s.pstyle("text-valign").value;"top"===W?X-=V/2:"bottom"===W&&(X+=V/2);var H=s.pstyle("text-halign").value;"left"===H?U-=G/2:"right"===H&&(U+=G/2);var K=o.nodeShapes.rectangle.intersectLine(U,X,G,V,a[0],a[1],0),Q=c,Z=sqdist(Q,array2point(t));sqdist(Q,array2point(K))<Z&&(t=K)}var J=shortenIntersection(t,r,o.arrowShapes[h].spacing(e)+p),ee=shortenIntersection(t,r,o.arrowShapes[h].gap(e)+p);v.startX=ee[0],v.startY=ee[1],v.arrowStartX=J[0],v.arrowStartY=J[1],T&&(number(v.startX)&&number(v.startY)&&number(v.endX)&&number(v.endY)?v.badLine=!1:v.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}}},BRp$5={};function pushBezierPts(e,t,n){for(var r=function(e,t,n,r){return qbezierAt(e,t,n,r)},i=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var o=e.bezierProjPcts[a];i.push({x:r(n[0],n[2],n[4],o),y:r(n[1],n[3],n[5],o)})}}BRp$5.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){t.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)pushBezierPts(this,e,n.allpts.slice(i,i+6))}else if("segments"===r){var a=t.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var o=n.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},BRp$5.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var BRp$6={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!emptyString(t)){var n,r,i=e._private,a=e.width(),o=e.height(),s=e.padding(),u=e.position(),l=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(l){case"left":n=u.x-a/2-s;break;case"right":n=u.x+a/2+s;break;default:n=u.x}switch(c){case"top":r=u.y-o/2-s;break;case"bottom":r=u.y+o/2+s;break;default:r=u.y}f.labelX=n,f.labelY=r,h.labelX=n,h.labelY=r,this.applyLabelDimensions(e)}}},lineAngleFromDelta=function(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},lineAngle=function(e,t){var n=t.x-e.x,r=t.y-e.y;return lineAngleFromDelta(n,r)},bezierAngle=function(e,t,n,r){var i=bound(0,r-.001,1),a=bound(0,r+.001,1),o=qbezierPtAt(e,t,n,i),s=qbezierPtAt(e,t,n,a);return lineAngle(o,s)};BRp$6.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,i=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:r.midX,y:r.midY};var o=function(e,t,r){setPrefixedProperty(n.rscratch,e,t,r),setPrefixedProperty(n.rstyle,e,t,r)};o("labelX",null,t.x),o("labelY",null,t.y);var s=lineAngleFromDelta(r.midDispX,r.midDispY);o("labelAutoAngle",null,s);var u=function(s){var u,l="source"===s;if(a[s]){var c=e.pstyle(s+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var f,h=function e(){if(e.cache)return e.cache;for(var t=[],a=0;a+5<r.allpts.length;a+=4){var o={x:r.allpts[a],y:r.allpts[a+1]},s={x:r.allpts[a+2],y:r.allpts[a+3]},u={x:r.allpts[a+4],y:r.allpts[a+5]};t.push({p0:o,p1:s,p2:u,startDist:0,length:0,segments:[]})}var l=n.rstyle.bezierPts,c=i.bezierProjPcts.length;function f(e,t,n,r,i){var a=dist$1(t,n),o=e.segments[e.segments.length-1],s={p0:t,p1:n,t0:r,t1:i,startDist:o?o.startDist+o.length:0,length:a};e.segments.push(s),e.length+=a}for(var h=0;h<t.length;h++){var d=t[h],p=t[h-1];p&&(d.startDist=p.startDist+p.length),f(d,d.p0,l[h*c],0,i.bezierProjPcts[0]);for(var g=0;g<c-1;g++)f(d,l[h*c+g],l[h*c+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);f(d,l[h*c+c-1],d.p2,i.bezierProjPcts[c-1],1)}return e.cache=t}(),d=0,p=0,g=0;g<h.length;g++){for(var v=h[l?g:h.length-1-g],m=0;m<v.segments.length;m++){var y=v.segments[l?m:v.segments.length-1-m],b=g===h.length-1&&m===v.segments.length-1;if(d=p,(p+=y.length)>=c||b){f={cp:v,segment:y};break}}if(f)break}var x=f.cp,w=f.segment,E=(c-d)/w.length,T=w.t1-w.t0,_=l?w.t0+T*E:w.t1-T*E;_=bound(0,_,1),t=qbezierPtAt(x.p0,x.p1,x.p2,_),u=bezierAngle(x.p0,x.p1,x.p2,_);break;case"straight":case"segments":case"haystack":for(var C,D,S,A,k=0,R=r.allpts.length,O=0;O+3<R&&(l?(S={x:r.allpts[O],y:r.allpts[O+1]},A={x:r.allpts[O+2],y:r.allpts[O+3]}):(S={x:r.allpts[R-2-O],y:r.allpts[R-1-O]},A={x:r.allpts[R-4-O],y:r.allpts[R-3-O]}),D=k,!((k+=C=dist$1(S,A))>=c));O+=2);var M=(c-D)/C;M=bound(0,M,1),t=lineAt(S,A,M),u=lineAngle(S,A)}o("labelX",s,t.x),o("labelY",s,t.y),o("labelAutoAngle",s,u)}};u("source"),u("target"),this.applyLabelDimensions(e)}},BRp$6.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},BRp$6.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,r),a=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,s=getPrefixedProperty(n.rscratch,"labelWrapCachedLines",t)||[],u="wrap"!==o?1:Math.max(s.length,1),l=i.height/u,c=l*a,f=i.width,h=i.height+(u-1)*(a-1)*l;setPrefixedProperty(n.rstyle,"labelWidth",t,f),setPrefixedProperty(n.rscratch,"labelWidth",t,f),setPrefixedProperty(n.rstyle,"labelHeight",t,h),setPrefixedProperty(n.rscratch,"labelHeight",t,h),setPrefixedProperty(n.rscratch,"labelLineHeight",t,c)},BRp$6.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,a=e.pstyle("text-transform").value,o=function(e,r){return r?(setPrefixedProperty(n.rscratch,e,t,r),r):getPrefixedProperty(n.rscratch,e,t)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var u=o("labelKey");if(null!=u&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l=i.split("\n"),c=e.pstyle("text-max-width").pfValue,f="anywhere"===e.pstyle("text-overflow-wrap").value,h=[],d=/[\s\u200b]+/,p=f?"":" ",g=0;g<l.length;g++){var v=l[g],m=this.calculateLabelDimensions(e,v).width;if(f){var y=v.split("").join("​");v=y}if(m>c){for(var b=v.split(d),x="",w=0;w<b.length;w++){var E=b[w],T=0===x.length?E:x+p+E;this.calculateLabelDimensions(e,T).width<=c?x+=E+p:(h.push(x),x=E+p)}x.match(/^[\s\u200b]+$/)||h.push(x)}else h.push(v)}o("labelWrapCachedLines",h),i=o("labelWrapCachedText",h.join("\n")),o("labelWrapKey",u)}else if("ellipsis"===s){for(var _=e.pstyle("text-max-width").pfValue,C="",D=!1,S=0;S<i.length;S++){if(this.calculateLabelDimensions(e,C+i[S]+"…").width>_)break;C+=i[S],S===i.length-1&&(D=!0)}return D||(C+="…"),C}return i},BRp$6.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},BRp$6.calculateLabelDimensions=function(e,t){var n=hashString(t,e._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var a=e.pstyle("font-style").strValue,o=1*e.pstyle("font-size").pfValue+"px",s=e.pstyle("font-family").strValue,u=e.pstyle("font-weight").strValue,l=this.labelCalcDiv;l||(l=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(l));var c=l.style;return c.fontFamily=s,c.fontStyle=a,c.fontSize=o,c.fontWeight=u,c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none",c.padding="0",c.lineHeight="1","wrap"===e.pstyle("text-wrap").value?c.whiteSpace="pre":c.whiteSpace="normal",l.textContent=t,r[n]={width:Math.ceil(l.clientWidth/1),height:Math.ceil(l.clientHeight/1)}},BRp$6.calculateLabelAngle=function(e,t){var n=e._private.rscratch,r=e.isEdge(),i=t?t+"-":"",a=e.pstyle(i+"text-rotation"),o=a.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:a.pfValue},BRp$6.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),r=e._private.rscratch;r.labelAngle=t.calculateLabelAngle(e),n&&(r.sourceLabelAngle=t.calculateLabelAngle(e,"source"),r.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var BRp$7={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$7.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<TOO_SMALL_CUT_RECT||e.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"cutrectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t};var BRp$8={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),n=this,r=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),n)for(var r=0;r<e.length;r++){var i=e[r]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function(e){var t=e.target;r(t)}).on("style.* background.*",function(e){var t=e.target;r(t,!1)});var i=function(i){if(i){for(var a=n.onUpdateEleCalcsFns,o=0;o<t.length;o++){var s=t[o],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(a)for(o=0;o<a.length;o++){(0,a[o])(i,t)}n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var n=[],r=[];if(!this.destroyed){void 0===t&&(t=!0);for(var i=0;i<e.length;i++){var a=(u=(s=e[i])._private).rstyle;t&&a.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===u.group?r.push(s):n.push(s),a.clean=!0)}for(i=0;i<r.length;i++){a=(u=(s=r[i])._private).rstyle;var o=s.position();this.recalculateNodeLabelProjection(s),a.nodeX=o.x,a.nodeY=o.y,a.nodeW=s.pstyle("width").pfValue,a.nodeH=s.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(i=0;i<n.length;i++){a=(u=(s=n[i])._private).rstyle;var s,u,l=u.rscratch;a.srcX=l.arrowStartX,a.srcY=l.arrowStartY,a.tgtX=l.arrowEndX,a.tgtY=l.arrowEndY,a.midX=l.midX,a.midY=l.midY,a.labelAngle=l.labelAngle,a.sourceLabelAngle=l.sourceLabelAngle,a.targetLabelAngle=l.targetLabelAngle}}}},BRp$9={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=(i=e[n])._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):r.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(n=0;n<t.length;n++){var i=t[n];e.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(zIndexSort),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},BRp$a={};[BRp$1,BRp$2,BRp$3,BRp$4,BRp$5,BRp$6,BRp$7,BRp$8,BRp$9].forEach(function(e){extend(BRp$a,e)});var BRp$b={getCachedImage:function(e,t,n){var r=this.imageCache=this.imageCache||{},i=r[e];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var a=(i=r[e]=r[e]||{}).image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});return"data:"===e.substring(0,"data:".length).toLowerCase()||(a.crossOrigin=t),a.src=e,a}},BRp$c={registerBinding:function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(e);return a.on.apply(a,i)},binder:function(e){var t=this,n=e===window||e===document||e===document.body||domElement(e);if(null==t.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(e){}t.supportsPassiveEvents=r}var a=function(r,i,a){var o=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(o[2]={capture:null!=a&&a,passive:!1,once:!1}),t.bindings.push({target:e,args:o}),(e.addEventListener||e.on).apply(e,o),this};return{on:a,addEventListener:a,addListener:a,bind:a}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()}};BRp$c.load=function(){var e=this,t=function(e){return e.selected()},n=function(t,n,r,i){null==t&&(t=e.cy);for(var a=0;a<n.length;a++){var o=n[a];t.emit({originalEvent:r,type:o,position:i})}},r=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},i=function(t,n){var r=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var i=0;n&&i<n.length;i++){if((t=n[i]).isNode()&&t.isParent()){r=!1;break}}else r=!0;return r},a=function(e){e[0]._private.rscratch.inDragLayer=!0},o=function(e){e[0]._private.rscratch.isGrabTarget=!0},s=function(e,t){var n=t.addToList;n.has(e)||(n.merge(e),function(e){e[0]._private.grabbed=!0}(e))},u=function(t,n){n=n||{};var r=t.cy().hasCompoundNodes();n.inDragLayer&&(t.forEach(a),t.neighborhood().stdFilter(function(e){return!r||e.isEdge()}).forEach(a)),n.addToList&&t.forEach(function(e){s(e,n)}),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(a),n.connectedEdges().forEach(a)),t.addToList&&t.addToList.unmerge(n)}}(t,n),f(t,{inDragLayer:n.inDragLayer}),e.updateCachedGrabbedEles()},l=u,c=function(t){t&&(e.getCachedZSortedEles().forEach(function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)}),e.updateCachedGrabbedEles())},f=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var r=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges();t.inDragLayer&&(i.forEach(a),r.forEach(a)),t.addToList&&r.forEach(function(e){s(e,t)})}}},h=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},d="undefined"!=typeof MutationObserver,p="undefined"!=typeof ResizeObserver;d?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n].removedNodes;if(r)for(var i=0;i<r.length;i++){if(r[i]===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()});var g=util(function(){e.cy.resize()},100);d&&(e.styleObserver=new MutationObserver(g),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",g),p&&(e.resizeObserver=new ResizeObserver(g),e.resizeObserver.observe(e.container));var v=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,function(t){e.registerBinding(t,"transitionend",v),e.registerBinding(t,"animationend",v),e.registerBinding(t,"scroll",v)}),e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var m=function(t){for(var n=e.findContainerClientCoords(),r=n[0],i=n[1],a=n[2],o=n[3],s=t.touches?t.touches:[t],u=!1,l=0;l<s.length;l++){var c=s[l];if(r<=c.clientX&&c.clientX<=r+a&&i<=c.clientY&&c.clientY<=i+o){u=!0;break}}if(!u)return!1;for(var f=e.container,h=t.target.parentNode,d=!1;h;){if(h===f){d=!0;break}h=h.parentNode}return!!d};e.registerBinding(e.container,"mousedown",function(t){if(m(t)){t.preventDefault(),h(),e.hoverData.capture=!0,e.hoverData.which=t.which;var r=e.cy,i=[t.clientX,t.clientY],a=e.projectIntoViewport(i[0],i[1]),s=e.selection,c=e.findNearestElements(a[0],a[1],!0,!1),f=c[0],d=e.dragData.possibleDragElements;e.hoverData.mdownPos=a,e.hoverData.mdownGPos=i;if(3==t.which){e.hoverData.cxtStarted=!0;var p={originalEvent:t,type:"cxttapstart",position:{x:a[0],y:a[1]}};f?(f.activate(),f.emit(p),e.hoverData.down=f):r.emit(p),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(f&&f.activate(),null!=f&&e.nodeIsGrabbable(f)){var g=function(e){return{originalEvent:t,type:e,position:{x:a[0],y:a[1]}}};if(o(f),f.selected()){d=e.dragData.possibleDragElements=r.collection();var v=r.$(function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)});u(v,{addToList:d}),f.emit(g("grabon")),v.forEach(function(e){e.emit(g("grab"))})}else d=e.dragData.possibleDragElements=r.collection(),l(f,{addToList:d}),f.emit(g("grabon")).emit(g("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=f,e.hoverData.downs=c,e.hoverData.downTime=(new Date).getTime(),n(f,["mousedown","tapstart","vmousedown"],t,{x:a[0],y:a[1]}),null==f?(s[4]=1,e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()):f.pannable()&&(s[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}}):r.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}})}},e.tapholdDuration)}s[0]=s[2]=a[0],s[1]=s[3]=a[1]}},!1),e.registerBinding(window,"mousemove",function(t){if(e.hoverData.capture||m(t)){var a=!1,o=e.cy,s=o.zoom(),l=[t.clientX,t.clientY],f=e.projectIntoViewport(l[0],l[1]),h=e.hoverData.mdownPos,d=e.hoverData.mdownGPos,p=e.selection,g=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(g=e.findNearestElement(f[0],f[1],!0,!1));var v,y=e.hoverData.last,b=e.hoverData.down,x=[f[0]-p[2],f[1]-p[3]],w=e.dragData.possibleDragElements;if(d){var E=l[0]-d[0],T=E*E,_=l[1]-d[1],C=T+_*_;e.hoverData.isOverThresholdDrag=v=C>=e.desktopTapThreshold2}var D=r(t);v&&(e.hoverData.tapholdCancelled=!0);a=!0,n(g,["mousemove","vmousemove","tapdrag"],t,{x:f[0],y:f[1]});var S=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||o.emit({originalEvent:t,type:"boxstart",position:{x:f[0],y:f[1]}}),p[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(v){var A={originalEvent:t,type:"cxtdrag",position:{x:f[0],y:f[1]}};b?b.emit(A):o.emit(A),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&g===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:f[0],y:f[1]}}),e.hoverData.cxtOver=g,g&&g.emit({originalEvent:t,type:"cxtdragover",position:{x:f[0],y:f[1]}}))}}else if(e.hoverData.dragging){if(a=!0,o.panningEnabled()&&o.userPanningEnabled()){var k;if(e.hoverData.justStartedPan){var R=e.hoverData.mdownPos;k={x:(f[0]-R[0])*s,y:(f[1]-R[1])*s},e.hoverData.justStartedPan=!1}else k={x:x[0]*s,y:x[1]*s};o.panBy(k),e.hoverData.dragged=!0}f=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=p[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==y||(y&&n(y,["mouseout","tapdragout"],t,{x:f[0],y:f[1]}),g&&n(g,["mouseover","tapdragover"],t,{x:f[0],y:f[1]}),e.hoverData.last=g),b)if(v){if(o.boxSelectionEnabled()&&D)b&&b.grabbed()&&(c(w),b.emit("freeon"),w.emit("free"),e.dragData.didDrag&&(b.emit("dragfreeon"),w.emit("dragfree"))),S();else if(b&&b.grabbed()&&e.nodeIsDraggable(b)){var O=!e.dragData.didDrag;O&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;var M=o.collection();e.hoverData.draggingEles||u(w,{inDragLayer:!0});var L={x:0,y:0};if(number(x[0])&&number(x[1])&&(L.x+=x[0],L.y+=x[1],O)){var N=e.hoverData.dragDelta;N&&number(N[0])&&number(N[1])&&(L.x+=N[0],L.y+=N[1])}for(var P=0;P<w.length;P++){var I=w[P];e.nodeIsDraggable(I)&&I.grabbed()&&M.merge(I)}e.hoverData.draggingEles=!0,M.silentShift(L).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else!function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(x[0]),t.push(x[1])):(t[0]+=x[0],t[1]+=x[1])}();a=!0}else if(v){if(e.hoverData.dragging||!o.boxSelectionEnabled()||!D&&o.panningEnabled()&&o.userPanningEnabled()){if(!e.hoverData.selecting&&o.panningEnabled()&&o.userPanningEnabled()){i(b,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,p[4]=0,e.data.bgActivePosistion=array2point(h),e.redrawHint("select",!0),e.redraw())}}else S();b&&b.pannable()&&b.active()&&b.unactivate()}return p[2]=f[0],p[3]=f[1],a?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}},!1),e.registerBinding(window,"mouseup",function(i){if(e.hoverData.capture){e.hoverData.capture=!1;var a=e.cy,o=e.projectIntoViewport(i.clientX,i.clientY),s=e.selection,u=e.findNearestElement(o[0],o[1],!0,!1),l=e.dragData.possibleDragElements,f=e.hoverData.down,h=r(i);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,f&&f.unactivate(),3===e.hoverData.which){var d={originalEvent:i,type:"cxttapend",position:{x:o[0],y:o[1]}};if(f?f.emit(d):a.emit(d),!e.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:o[0],y:o[1]}};f?f.emit(p):a.emit(p)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(n(u,["mouseup","tapend","vmouseup"],i,{x:o[0],y:o[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||n(f,["click","tap","vclick"],i,{x:o[0],y:o[1]}),null!=f||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||r(i)||(a.$(t).unselect(["tapunselect"]),l.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=l=a.collection()),u!=f||e.dragData.didDrag||e.hoverData.selecting||null!=u&&u._private.selectable&&(e.hoverData.dragging||("additive"===a.selectionType()||h?u.selected()?u.unselect(["tapunselect"]):u.select(["tapselect"]):h||(a.$(t).unmerge(u).unselect(["tapunselect"]),u.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var g=a.collection(e.getAllInBox(s[0],s[1],s[2],s[3]));e.redrawHint("select",!0),g.length>0&&e.redrawHint("eles",!0),a.emit({type:"boxend",originalEvent:i,position:{x:o[0],y:o[1]}});var v=function(e){return e.selectable()&&!e.selected()};"additive"===a.selectionType()?g.emit("box").stdFilter(v).select().emit("boxselect"):(h||a.$(t).unmerge(g).unselect(),g.emit("box").stdFilter(v).select().emit("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!s[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var m=f&&f.grabbed();c(l),m&&(f.emit("freeon"),l.emit("free"),e.dragData.didDrag&&(f.emit("dragfreeon"),l.emit("dragfree")))}}s[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var y,b,x,w,E,T,_,C,D,S,A,k,R;e.registerBinding(e.container,"wheel",function(t){if(!e.scrollingPage){var n,r=e.cy,i=e.projectIntoViewport(t.clientX,t.clientY),a=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4]?t.preventDefault():r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()&&(t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),n=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,n*=e.wheelSensitivity,1===t.deltaMode&&(n*=33),r.zoom({level:r.zoom()*Math.pow(10,n),renderedPosition:{x:a[0],y:a[1]}}))}},!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"mouseout",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),e.registerBinding(e.container,"mouseover",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var O,M,L,N,P=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},I=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};if(e.registerBinding(e.container,"touchstart",O=function(t){if(m(t)){h(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,i=e.touchData.now,a=e.touchData.earlier;if(t.touches[0]){var s=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(t.touches[1]){s=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);i[2]=s[0],i[3]=s[1]}if(t.touches[2]){s=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);i[4]=s[0],i[5]=s[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,c(e.dragData.touchDragEles);var f=e.findContainerClientCoords();D=f[0],S=f[1],A=f[2],k=f[3],y=t.touches[0].clientX-D,b=t.touches[0].clientY-S,x=t.touches[1].clientX-D,w=t.touches[1].clientY-S,R=0<=y&&y<=A&&0<=x&&x<=A&&0<=b&&b<=k&&0<=w&&w<=k;var d=r.pan(),p=r.zoom();E=P(y,b,x,w),T=I(y,b,x,w),C=[((_=[(y+x)/2,(b+w)/2])[0]-d.x)/p,(_[1]-d.y)/p];if(T<4e4&&!t.touches[2]){var g=e.findNearestElement(i[0],i[1],!0,!0),v=e.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=g):v&&v.isNode()?(v.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=v):r.emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])r.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var O=e.findNearestElements(i[0],i[1],!0,!0),M=O[0];if(null!=M&&(M.activate(),e.touchData.start=M,e.touchData.starts=O,e.nodeIsGrabbable(M))){var L=e.dragData.touchDragEles=r.collection(),N=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),M.selected()?(N=r.$(function(t){return t.selected()&&e.nodeIsGrabbable(t)}),u(N,{addToList:L})):l(M,{addToList:L}),o(M);var B=function(e){return{originalEvent:t,type:e,position:{x:i[0],y:i[1]}}};M.emit(B("grabon")),N?N.forEach(function(e){e.emit(B("grab"))}):M.emit(B("grab"))}n(M,["touchstart","tapstart","vmousedown"],t,{x:i[0],y:i[1]}),null==M&&(e.data.bgActivePosistion={x:s[0],y:s[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||n(e.touchData.start,["taphold"],t,{x:i[0],y:i[1]})},e.tapholdDuration)}if(t.touches.length>=1){for(var $=e.touchData.startPosition=[],F=0;F<i.length;F++)$[F]=a[F]=i[F];var q=t.touches[0];e.touchData.startGPosition=[q.clientX,q.clientY]}}},!1),e.registerBinding(window,"touchmove",M=function(t){var r=e.touchData.capture;if(r||m(t)){var a=e.selection,o=e.cy,s=e.touchData.now,l=e.touchData.earlier,f=o.zoom();if(t.touches[0]){var h=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=h[0],s[1]=h[1]}if(t.touches[1]){h=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=h[0],s[3]=h[1]}if(t.touches[2]){h=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=h[0],s[5]=h[1]}var d,p=e.touchData.startGPosition;if(r&&t.touches[0]&&p){for(var g=[],v=0;v<s.length;v++)g[v]=s[v]-l[v];var _=t.touches[0].clientX-p[0],A=_*_,k=t.touches[0].clientY-p[1];d=A+k*k>=e.touchTapThreshold2}if(r&&e.touchData.cxt){t.preventDefault();var O=t.touches[0].clientX-D,M=t.touches[0].clientY-S,L=t.touches[1].clientX-D,N=t.touches[1].clientY-S,B=I(O,M,L,N);if(B/T>=2.25||B>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var $={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}};e.touchData.start?(e.touchData.start.unactivate().emit($),e.touchData.start=null):o.emit($)}}if(r&&e.touchData.cxt){$={originalEvent:t,type:"cxtdrag",position:{x:s[0],y:s[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit($):o.emit($),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var F=e.findNearestElement(s[0],s[1],!0,!0);e.touchData.cxtOver&&F===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:s[0],y:s[1]}}),e.touchData.cxtOver=F,F&&F.emit({originalEvent:t,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&t.touches[2]&&o.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||o.emit({originalEvent:t,type:"boxstart",position:{x:s[0],y:s[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,a[4]=1,a&&0!==a.length&&void 0!==a[0]?(a[2]=(s[0]+s[2]+s[4])/3,a[3]=(s[1]+s[3]+s[5])/3):(a[0]=(s[0]+s[2]+s[4])/3,a[1]=(s[1]+s[3]+s[5])/3,a[2]=(s[0]+s[2]+s[4])/3+1,a[3]=(s[1]+s[3]+s[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(r&&t.touches[1]&&!e.touchData.didSelect&&o.zoomingEnabled()&&o.panningEnabled()&&o.userZoomingEnabled()&&o.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),J=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var q=0;q<J.length;q++){var j=J[q]._private;j.grabbed=!1,j.rscratch.inDragLayer=!1}}var z=e.touchData.start,Y=(O=t.touches[0].clientX-D,M=t.touches[0].clientY-S,L=t.touches[1].clientX-D,N=t.touches[1].clientY-S,P(O,M,L,N)),G=Y/E;if(R){var V=(O-y+(L-x))/2,U=(M-b+(N-w))/2,X=o.zoom(),W=X*G,H=o.pan(),K=C[0]*X+H.x,Q=C[1]*X+H.y,Z={x:-W/X*(K-H.x-V)+K,y:-W/X*(Q-H.y-U)+Q};if(z&&z.active()){var J=e.dragData.touchDragEles;c(J),e.redrawHint("drag",!0),e.redrawHint("eles",!0),z.unactivate().emit("freeon"),J.emit("free"),e.dragData.didDrag&&(z.emit("dragfreeon"),J.emit("dragfree"))}o.viewport({zoom:W,pan:Z,cancelOnFailedZoom:!0}),E=Y,y=O,b=M,x=L,w=N,e.pinching=!0}if(t.touches[0]){h=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=h[0],s[1]=h[1]}if(t.touches[1]){h=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=h[0],s[3]=h[1]}if(t.touches[2]){h=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=h[0],s[5]=h[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var ee=e.touchData.start,te=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(F=e.findNearestElement(s[0],s[1],!0,!0)),r&&null!=ee&&t.preventDefault(),r&&null!=ee&&e.nodeIsDraggable(ee))if(d){J=e.dragData.touchDragEles;var ne=!e.dragData.didDrag;ne&&u(J,{inDragLayer:!0}),e.dragData.didDrag=!0;var re={x:0,y:0};if(number(g[0])&&number(g[1]))if(re.x+=g[0],re.y+=g[1],ne)e.redrawHint("eles",!0),(ie=e.touchData.dragDelta)&&number(ie[0])&&number(ie[1])&&(re.x+=ie[0],re.y+=ie[1]);e.hoverData.draggingEles=!0,J.silentShift(re).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ie;0===(ie=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ie.push(g[0]),ie.push(g[1])):(ie[0]+=g[0],ie[1]+=g[1])}if(n(ee||F,["touchmove","tapdrag","vmousemove"],t,{x:s[0],y:s[1]}),ee&&ee.grabbed()||F==te||(te&&te.emit({originalEvent:t,type:"tapdragout",position:{x:s[0],y:s[1]}}),F&&F.emit({originalEvent:t,type:"tapdragover",position:{x:s[0],y:s[1]}})),e.touchData.last=F,r)for(q=0;q<s.length;q++)s[q]&&e.touchData.startPosition[q]&&d&&(e.touchData.singleTouchMoved=!0);if(r&&(null==ee||ee.pannable())&&o.panningEnabled()&&o.userPanningEnabled()){i(ee,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=array2point(e.touchData.startPosition)),e.swipePanning?o.panBy({x:g[0]*f,y:g[1]*f}):d&&(e.swipePanning=!0,o.panBy({x:_*f,y:k*f}),ee&&(ee.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));h=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=h[0],s[1]=h[1]}}for(v=0;v<s.length;v++)l[v]=s[v];r&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(window,"touchcancel",L=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()}),e.registerBinding(window,"touchend",N=function(r){var i=e.touchData.start;if(e.touchData.capture){0===r.touches.length&&(e.touchData.capture=!1),r.preventDefault();var a=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var o,s=e.cy,u=s.zoom(),l=e.touchData.now,f=e.touchData.earlier;if(r.touches[0]){var h=e.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=h[0],l[1]=h[1]}if(r.touches[1]){h=e.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);l[2]=h[0],l[3]=h[1]}if(r.touches[2]){h=e.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);l[4]=h[0],l[5]=h[1]}if(i&&i.unactivate(),e.touchData.cxt){if(o={originalEvent:r,type:"cxttapend",position:{x:l[0],y:l[1]}},i?i.emit(o):s.emit(o),!e.touchData.cxtDragged){var d={originalEvent:r,type:"cxttap",position:{x:l[0],y:l[1]}};i?i.emit(d):s.emit(d)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var p=s.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,e.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:l[0],y:l[1]}});p.emit("box").stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit("boxselect"),p.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=i&&i.unactivate(),r.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var g=e.dragData.touchDragEles;if(null!=i){var v=i._private.grabbed;c(g),e.redrawHint("drag",!0),e.redrawHint("eles",!0),v&&(i.emit("freeon"),g.emit("free"),e.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]}),i.unactivate(),e.touchData.start=null}else{var m=e.findNearestElement(l[0],l[1],!0,!0);n(m,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]})}var y=e.touchData.startPosition[0]-l[0],b=y*y,x=e.touchData.startPosition[1]-l[1],w=(b+x*x)*u*u;e.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:l[0],y:l[1]})),null!=i&&!e.dragData.didDrag&&i._private.selectable&&w<e.touchTapThreshold2&&!e.pinching&&("single"===s.selectionType()?(s.$(t).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var E=0;E<l.length;E++)f[E]=l[E];e.dragData.didDrag=!1,0===r.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null,e.touchData.didSelect=!1),r.touches.length<2&&(1===r.touches.length&&(e.touchData.startGPosition=[r.touches[0].clientX,r.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var B=[],$=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},F=function(e){B.push(function(e){return{event:e,touch:$(e)}}(e))},q=function(e){for(var t=0;t<B.length;t++){if(B[t].event.pointerId===e.pointerId)return void B.splice(t,1)}},j=function(e){e.touches=B.map(function(e){return e.touch})},z=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",function(e){z(e)||(e.preventDefault(),F(e),j(e),O(e))}),e.registerBinding(e.container,"pointerup",function(e){z(e)||(q(e),j(e),N(e))}),e.registerBinding(e.container,"pointercancel",function(e){z(e)||(q(e),j(e),L())}),e.registerBinding(e.container,"pointermove",function(e){z(e)||(e.preventDefault(),function(e){var t=B.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=$(e)}(e),j(e),M(e))})}};var BRp$d={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl("polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,r,i,a,o){return polygonIntersectLine(i,a,this.points,e,t,n/2,r/2,o)},checkPoint:function(e,t,n,r,i,a,o){return pointInsidePolygon(e,t,this.points,a,o,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){return intersectLineEllipse(i,a,e,t,n/2+o,r/2+o)},checkPoint:function(e,t,n,r,i,a,o){return checkInEllipse(e,t,r,i,a,o,n)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){return roundRectangleIntersectLine(i,a,e,t,n,r,o)},checkPoint:function(e,t,n,r,i,a,o){var s=getRoundRectangleRadius(r,i),u=2*s;return!!pointInsidePolygon(e,t,this.points,a,o,r,i-u,[0,-1],n)||(!!pointInsidePolygon(e,t,this.points,a,o,r-u,i,[0,-1],n)||(!!checkInEllipse(e,t,u,u,a-r/2+s,o-i/2+s,n)||(!!checkInEllipse(e,t,u,u,a+r/2-s,o-i/2+s,n)||(!!checkInEllipse(e,t,u,u,a+r/2-s,o+i/2-s,n)||!!checkInEllipse(e,t,u,u,a-r/2+s,o+i/2-s,n)))))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},generateCutTrianglePts:function(e,t,n,r){var i=this.cornerLength,a=t/2,o=e/2,s=n-o,u=n+o,l=r-a,c=r+a;return{topLeft:[s,l+i,s+i,l,s+i,l+i],topRight:[u-i,l,u,l+i,u-i,l+i],bottomRight:[u,c-i,u-i,c,u-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(e,t,n,r,i,a,o){var s=this.generateCutTrianglePts(n+2*o,r+2*o,e,t),u=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return polygonIntersectLine(i,a,u,e,t)},checkPoint:function(e,t,n,r,i,a,o){if(pointInsidePolygon(e,t,this.points,a,o,r,i-2*this.cornerLength,[0,-1],n))return!0;if(pointInsidePolygon(e,t,this.points,a,o,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,a,o);return pointInsidePolygonPoints(e,t,s.topLeft)||pointInsidePolygonPoints(e,t,s.topRight)||pointInsidePolygonPoints(e,t,s.bottomRight)||pointInsidePolygonPoints(e,t,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){var s=this.generateBarrelBezierPts(n+2*o,r+2*o,e,t),u=function(e){var t=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),n=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),r=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,n.x,n.y,r.x,r.y,e[4],e[5]]},l=[].concat(u(s.topLeft),u(s.topRight),u(s.bottomRight),u(s.bottomLeft));return polygonIntersectLine(i,a,l,e,t)},generateBarrelBezierPts:function(e,t,n,r){var i=t/2,a=e/2,o=n-a,s=n+a,u=r-i,l=r+i,c=getBarrelCurveConstants(e,t),f=c.heightOffset,h=c.widthOffset,d=c.ctrlPtOffsetPct*e,p={topLeft:[o,u+f,o+d,u,o+h,u],topRight:[s-h,u,s-d,u,s,u+f],bottomRight:[s,l-f,s-d,l,s-h,l],bottomLeft:[o+h,l,o+d,l,o,l-f]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,r,i,a,o){var s=getBarrelCurveConstants(r,i),u=s.heightOffset,l=s.widthOffset;if(pointInsidePolygon(e,t,this.points,a,o,r,i-2*u,[0,-1],n))return!0;if(pointInsidePolygon(e,t,this.points,a,o,r-2*l,i,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(r,i,a,o),f=function(e,t,n){var r=n[4],i=n[2],a=n[0],o=n[5],s=n[1],u=Math.min(r,a),l=Math.max(r,a),c=Math.min(o,s),f=Math.max(o,s);if(u<=e&&e<=l&&c<=t&&t<=f){var h=bezierPtsToQuadCoeff(r,i,a),d=solveQuadratic(h[0],h[1],h[2],e).filter(function(e){return 0<=e&&e<=1});if(d.length>0)return d[0]}return null},h=Object.keys(c),d=0;d<h.length;d++){var p=c[h[d]],g=f(e,t,p);if(null!=g){var v=p[5],m=p[3],y=p[1],b=qbezierAt(v,m,y,g);if(p.isTop&&b<=t)return!0;if(p.isBottom&&t<=b)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,r,i,a,o){var s=t-(r/2+o),u=finiteLinesIntersect(i,a,e,t,e-(n/2+o),s,e+(n/2+o),s,!1);return u.length>0?u:roundRectangleIntersectLine(i,a,e,t,n,r,o)},checkPoint:function(e,t,n,r,i,a,o){var s=getRoundRectangleRadius(r,i),u=2*s;if(pointInsidePolygon(e,t,this.points,a,o,r,i-u,[0,-1],n))return!0;if(pointInsidePolygon(e,t,this.points,a,o,r-u,i,[0,-1],n))return!0;var l=r/2+2*n,c=i/2+2*n;return!!pointInsidePolygonPoints(e,t,[a-l,o-c,a-l,o,a+l,o,a+l,o-c])||(!!checkInEllipse(e,t,u,u,a+r/2-s,o+i/2-s,n)||!!checkInEllipse(e,t,u,u,a-r/2+s,o+i/2-s,n))}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),r=generateUnitNgonPoints(5,0),i=generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var o=0;o<i.length/2;o++)i[2*o]*=a,i[2*o+1]*=a;for(o=0;o<5;o++)n[4*o]=r[2*o],n[4*o+1]=r[2*o+1],n[4*o+2]=i[2*o],n[4*o+3]=i[2*o+1];n=fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]),this.generatePolygon("tag",[-1,-1,.25,-1,1,0,.25,1,-1,1]),e.makePolygon=function(e){var n,r="polygon-"+e.join("$");return(n=this[r])?n:t.generatePolygon(r,e)}}},BRp$e={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||staticEmptyObject();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&error("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}}},beforeRenderCallbacks=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};BRp$e.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;requestAnimationFrame(function n(r){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){beforeRenderCallbacks(e,!0,r);var i=performanceNow();e.render(e.renderOptions);var a=e.lastDrawTime=performanceNow();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=a-i;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else beforeRenderCallbacks(e,!1,r);e.skipFrame=!1,requestAnimationFrame(n)}})}};var BaseRenderer=function(e){this.init(e)},BR=BaseRenderer,BRp$f=BR.prototype;BRp$f.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],BRp$f.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container();if(window$1){var r=window$1.document,i=r.head,a="__________cytoscape_container",o=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(a)<0&&(n.className=(n.className||"")+" "+a),!o){var s=r.createElement("style");s.id="__________cytoscape_stylesheet",s.innerHTML="."+a+" { position: relative; }",i.insertBefore(s,i.children[0])}"static"===window$1.getComputedStyle(n).getPropertyValue("position")&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.hideLabelsOnViewport=e.hideLabelsOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=number(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},BRp$f.notify=function(e,t){var n=this,r=n.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&r.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&n.invalidateCachedZSortedEles(),"viewport"===e&&n.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},BRp$f.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},BRp$f.isHeadless=function(){return!1},[BRp,BRp$a,BRp$b,BRp$c,BRp$d,BRp$e].forEach(function(e){extend(BRp$f,e)});var fullFpsTime=1e3/60,defs={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=util(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),i=e.priority||noop$1;n.beforeRender(function(i,a){var o=performanceNow(),s=n.averageRedrawTime,u=n.lastRedrawTime,l=[],c=n.cy.extent(),f=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var h=performanceNow(),d=h-o,p=h-a;if(u<fullFpsTime){var g=fullFpsTime-(i?s:0);if(p>=e.deqFastCost*g)break}else if(i){if(d>=e.deqCost*u||d>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*fullFpsTime)break;var v=e.deq(t,f,c);if(!(v.length>0))break;for(var m=0;m<v.length;m++)l.push(v[m])}l.length>0&&(e.onDeqd(t,l),!i&&e.shouldRedraw(t,l,f,c)&&r())},i(t))}}}},ElementTextureCacheLookup=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:falsify;_classCallCheck$1(this,e),this.idsByKey=new Map$1,this.keyForId=new Map$1,this.cachesByLvl=new Map$1,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return _createClass$1(e,[{key:"getIdsFor",value:function(e){null==e&&error("Can not get id list for null key");var t=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new Set$1,t.set(e,n)),n}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t),r=this.getKey(e);this.deleteIdForKey(n,t),this.addIdForKey(r,t),this.keyForId.set(t,r)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteIdForKey(n,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,n=this.lvls,r=t.get(e);return r||(r=new Map$1,t.set(e,r),n.push(e)),r}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var n=this.getKey(e),r=this.getCache(n,t);return null!=r&&this.updateKeyMappingFor(e),r}},{key:"getForCachedKey",value:function(e,t){var n=this.keyForId.get(e.id());return this.getCache(n,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var n=this.getKey(e);return this.hasCache(n,t)}},{key:"setCache",value:function(e,t,n){n.key=e,this.getCachesAt(t).set(e,n)}},{key:"set",value:function(e,t,n){var r=this.getKey(e);this.setCache(r,t,n),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var n=this.getKey(e);this.deleteCache(n,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach(function(n){return t.deleteCache(e,n)})}},{key:"invalidate",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteKeyMappingFor(e);var r=this.doesEleInvalidateKey(e);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),e}(),minTxrH=25,txrStepH=50,minLvl=-4,maxLvl=3,maxZoom=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,deqRedrawThreshold=100,maxDeqSize=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(e,t){this.renderer=e,this.onDequeues=[];var n=initDefaults(t);extend(this,n),this.lookup=new ElementTextureCacheLookup(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons,ETCp.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},ETCp.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},ETCp.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Heap(function(e,t){return t.reqs-e.reqs})},ETCp.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ETCp.getElement=function(e,t,n,r,i){var a=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible())return null;if(!a.allowEdgeTxrCaching&&e.isEdge()||!a.allowParentTxrCaching&&e.isParent())return null;if(null==r&&(r=Math.ceil(log2(s*n))),r<minLvl)r=minLvl;else if(s>=maxZoom||r>maxLvl)return null;var l=Math.pow(2,r),c=t.h*l,f=t.w*l,h=o.eleTextBiggerThanMin(e,l);if(!this.isVisible(e,h))return null;var d,p=u.get(e,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(d=c<=minTxrH?minTxrH:c<=txrStepH?txrStepH:Math.ceil(c/txrStepH)*txrStepH,c>maxTxrH||f>maxTxrW)return null;var g=a.getTextureQueue(d),v=g[g.length-2],m=function(){return a.recycleTexture(d,f)||a.addTexture(d,f)};v||(v=g[g.length-1]),v||(v=m()),v.width-v.usedWidth<f&&(v=m());for(var y,b=function(e){return e&&e.scaledLabelShown===h},x=i&&i===getTxrReasons.dequeue,w=i&&i===getTxrReasons.highQuality,E=i&&i===getTxrReasons.downscale,T=r+1;T<=maxLvl;T++){var _=u.get(e,T);if(_){y=_;break}}var C=y&&y.level===r+1?y:null,D=function(){v.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,v.usedWidth,0,f,c)};if(v.context.setTransform(1,0,0,1,0,0),v.context.clearRect(v.usedWidth,0,f,d),b(C))D();else if(b(y)){if(!w)return a.queueElement(e,y.level-1),y;for(var S=y.level;S>r;S--)C=a.getElement(e,t,n,S,getTxrReasons.downscale);D()}else{var A;if(!x&&!w&&!E)for(var k=r-1;k>=minLvl;k--){var R=u.get(e,k);if(R){A=R;break}}if(b(A))return a.queueElement(e,r),A;v.context.translate(v.usedWidth,0),v.context.scale(l,l),this.drawElement(v.context,e,t,h,!1),v.context.scale(1/l,1/l),v.context.translate(-v.usedWidth,0)}return p={x:v.usedWidth,texture:v,level:r,scale:l,width:f,height:c,scaledLabelShown:h},v.usedWidth+=Math.ceil(f+eleTxrSpacing),v.eleCaches.push(p),u.set(e,r,p),a.checkTextureFullness(v),p},ETCp.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},ETCp.invalidateElement=function(e){var t=this.lookup,n=[];if(t.isInvalid(e)){for(var r=minLvl;r<=maxLvl;r++){var i=t.getForCachedKey(e,r);i&&n.push(i)}if(t.invalidate(e))for(var a=0;a<n.length;a++){var o=n[a],s=o.texture;s.invalidatedWidth+=o.width,o.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(e)}},ETCp.checkTextureUtility=function(e){e.invalidatedWidth>=minUtility*e.width&&this.retireTexture(e)},ETCp.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>maxFullness&&e.fullnessChecks>=maxFullnessChecks?removeFromArray(t,e):e.fullnessChecks++},ETCp.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t),r=this.lookup;removeFromArray(n,e),e.retired=!0;for(var i=e.eleCaches,a=0;a<i.length;a++){var o=i[a];r.deleteCache(o.key,o.level)}clearArray(i),this.getRetiredTextureQueue(t).push(e)},ETCp.addTexture=function(e,t){var n={};return this.getTextureQueue(e).push(n),n.eleCaches=[],n.height=e,n.width=Math.max(defTxrWidth,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},ETCp.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),r=this.getRetiredTextureQueue(e),i=0;i<r.length;i++){var a=r[i];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,clearArray(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),removeFromArray(r,a),n.push(a),a}},ETCp.queueElement=function(e,t){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(e),a=r[i];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,n.updateItem(a);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:i};n.push(o),r[i]=o}},ETCp.dequeue=function(e){for(var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,a=0;a<maxDeqSize&&t.size()>0;a++){var o=t.pop(),s=o.key,u=o.eles[0],l=i.hasCache(u,o.level);if(n[s]=null,!l){r.push(o);var c=this.getBoundingBox(u);this.getElement(u,c,e,o.level,getTxrReasons.dequeue)}}return r},ETCp.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(e),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=MAX_INT,t.updateItem(i),t.pop(),n[r]=null):i.eles.unmerge(e))},ETCp.onDequeue=function(e){this.onDequeues.push(e)},ETCp.offDequeue=function(e){removeFromArray(this.onDequeues,e)},ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold,deqCost:deqCost,deqAvgCost:deqAvgCost,deqNoDrawCost:deqNoDrawCost,deqFastCost:deqFastCost,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){(0,e.onDequeues[n])(t)}},shouldRedraw:function(e,t,n,r){for(var i=0;i<t.length;i++)for(var a=t[i].eles,o=0;o<a.length;o++){var s=a[o].boundingBox();if(boundingBoxesIntersect(s,r))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl$1=-4,maxLvl$1=2,maxZoom$1=3.99,deqRedrawThreshold$1=50,refineEleDebounceTime=50,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,maxDeqSize$1=1,invalidThreshold=250,maxLayerArea=16e6,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=performanceNow()-2*invalidThreshold,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=util(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},refineEleDebounceTime),n.beforeRender(function(e,n){n-t.lastInvalidationTime<=invalidThreshold?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new Heap(function(e,t){return t.reqs-e.reqs}),t.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT$1=Math.pow(2,53)-1;LTCp.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),a=this.renderer.makeOffscreenCanvas(r,i),o={id:layerIdPool=++layerIdPool%MAX_INT$1,bb:e,level:t,width:r,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(n,n),s.translate(u,l),o},LTCp.getLayers=function(e,t,n){var r=this,i=r.renderer.cy.zoom(),a=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(log2(i*t)))<minLvl$1)n=minLvl$1;else if(i>=maxZoom$1||n>maxLvl$1)return null;r.validateLayersElesOrdering(n,e);var o,s,u=r.layersByLevel,l=Math.pow(2,n),c=u[n]=u[n]||[];if(r.levelIsComplete(n,e))return c;!function(){var t=function(t){if(r.validateLayersElesOrdering(t,e),r.levelIsComplete(t,e))return s=u[t],!0},i=function(e){if(!s)for(var r=n+e;minLvl$1<=r&&r<=maxLvl$1&&!t(r);r+=e);};i(1),i(-1);for(var a=c.length-1;a>=0;a--){var o=c[a];o.invalid&&removeFromArray(c,o)}}();var f=function(t){var i=(t=t||{}).after;if(function(){if(!o){o=makeBoundingBox();for(var t=0;t<e.length;t++)updateBoundingBox(o,e[t].boundingBox())}}(),o.w*l*(o.h*l)>maxLayerArea)return null;var a=r.makeLayer(o,n);if(null!=i){var s=c.indexOf(i)+1;c.splice(s,0,a)}else(void 0===t.insert||t.insert)&&c.unshift(a);return a};if(r.skipping&&!a)return null;for(var h=null,d=e.length/defNumLayers,p=!a,g=0;g<e.length;g++){var v=e[g],m=v._private.rscratch,y=m.imgLayerCaches=m.imgLayerCaches||{},b=y[n];if(b)h=b;else{if((!h||h.eles.length>=d||!boundingBoxInBoundingBox(h.bb,v.boundingBox()))&&!(h=f({insert:!0,after:h})))return null;s||p?r.queueLayer(h,v):r.drawEleInLayer(h,v,n,t),h.eles.push(v),y[n]=h}}return s||(p?null:c)},LTCp.getEleLevelForLayerLevel=function(e,t){return e},LTCp.drawEleInLayer=function(e,t,n,r){var i=this.renderer,a=e.context,o=t.boundingBox();0!==o.w&&0!==o.h&&t.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(a,!1),i.drawCachedElement(a,t,null,null,n,useHighQualityEleTxrReqs),i.setImgSmoothing(a,!0))},LTCp.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var a=n[i];if(a.reqs>0)return!1;if(a.invalid)return!1;r+=a.eles.length}return r===t.length},LTCp.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=-1,o=0;o<t.length;o++)if(i.eles[0]===t[o]){a=o;break}if(a<0)this.invalidateLayer(i);else{var s=a;for(o=0;o<i.eles.length;o++)if(i.eles[o]!==t[s+o]){this.invalidateLayer(i);break}}}},LTCp.updateElementsInLayers=function(e,t){for(var n=element$1(e[0]),r=0;r<e.length;r++)for(var i=n?null:e[r],a=n?e[r]:e[r].ele,o=a._private.rscratch,s=o.imgLayerCaches=o.imgLayerCaches||{},u=minLvl$1;u<=maxLvl$1;u++){var l=s[u];l&&(i&&this.getEleLevelForLayerLevel(l.level)!==i.level||t(l,a,i))}},LTCp.haveLayers=function(){for(var e=!1,t=minLvl$1;t<=maxLvl$1;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},LTCp.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=performanceNow(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,n,r){t.invalidateLayer(e)}))},LTCp.invalidateLayer=function(e){if(this.lastInvalidationTime=performanceNow(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];removeFromArray(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<n.length;i++){var a=n[i]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},LTCp.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,n,r){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)t.queueLayer(i,i.eles[a])})},LTCp.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},LTCp.queueLayer=function(e,t){var n=this.layersQueue,r=e.elesQueue,i=r.hasId=r.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;r.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},LTCp.dequeue=function(e){for(var t=this.layersQueue,n=[],r=0;r<maxDeqSize$1&&0!==t.size();){var i=t.peek();if(i.replacement)t.pop();else if(i.replaces&&i!==i.replaces.replacement)t.pop();else if(i.invalid)t.pop();else{var a=i.elesQueue.shift();a&&(this.drawEleInLayer(i,a,i.level,e),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(t.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},LTCp.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,r=t.indexOf(n);if(!(r<0||n.invalid)){t[r]=e;for(var i=0;i<e.eles.length;i++){var a=e.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},LTCp.requestRedraw=util(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function(e,t){return e.dequeue(t)},onDeqd:noop$1,shouldRedraw:trueify,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp={},impl;function polygon(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function triangleBackcurve(e,t,n){for(var r,i=0;i<t.length;i++){var a=t[i];0===i&&(r=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function triangleTee(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var a=r[i];e.lineTo(a.x,a.y)}var o=n,s=n[0];e.moveTo(s.x,s.y);for(i=1;i<o.length;i++){a=o[i];e.lineTo(a.x,a.y)}e.closePath&&e.closePath()}function circle(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}CRp.arrowShapeImpl=function(e){return(impl||(impl={polygon:polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"triangle-cross":triangleTee,circle:circle}))[e]};var CRp$1={drawElement:function(e,t,n,r,i,a){t.isNode()?this.drawNode(e,t,n,r,i,a):this.drawEdge(e,t,n,r,i,a)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawCachedElementPortion:function(e,t,n,r,i,a,o,s){var u=this,l=n.getBoundingBox(t);if(0!==l.w&&0!==l.h){var c=n.getElement(t,l,r,i,a);if(null!=c){var f=s(u,t);if(0===f)return;var h,d,p,g,v,m,y=o(u,t),b=l.x1,x=l.y1,w=l.w,E=l.h;if(0!==y){var T=n.getRotationPoint(t);p=T.x,g=T.y,e.translate(p,g),e.rotate(y),(v=u.getImgSmoothing(e))||u.setImgSmoothing(e,!0);var _=n.getRotationOffset(t);h=_.x,d=_.y}else h=b,d=x;1!==f&&(m=e.globalAlpha,e.globalAlpha=m*f),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,h,d,w,E),1!==f&&(e.globalAlpha=m),0!==y&&(e.rotate(-y),e.translate(-p,-g),v||u.setImgSmoothing(e,!1))}else n.drawElement(e,t)}}},getZeroRotation=function(){return 0},getLabelRotation=function(e,t){return e.getTextAngle(t,null)},getSourceLabelRotation=function(e,t){return e.getTextAngle(t,"source")},getTargetLabelRotation=function(e,t){return e.getTextAngle(t,"target")},getOpacity=function(e,t){return t.effectiveOpacity()},getTextOpacity=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};CRp$1.drawCachedElement=function(e,t,n,r,i,a){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,h=t.boundingBox(),d=!0===a?u.reasons.highQuality:null;0!==h.w&&0!==h.h&&t.visible()&&(r&&!boundingBoxesIntersect(h,r)||(o.drawCachedElementPortion(e,t,u,n,i,d,getZeroRotation,getOpacity),o.drawCachedElementPortion(e,t,l,n,i,d,getLabelRotation,getTextOpacity),t.isEdge()&&(o.drawCachedElementPortion(e,t,c,n,i,d,getSourceLabelRotation,getTextOpacity),o.drawCachedElementPortion(e,t,f,n,i,d,getTargetLabelRotation,getTextOpacity)),o.drawElementOverlay(e,t)))},CRp$1.drawElements=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this.drawElement(e,r)}},CRp$1.drawCachedElements=function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];this.drawCachedElement(e,a,n,r)}},CRp$1.drawCachedNodes=function(e,t,n,r){for(var i=0;i<t.length;i++){var a=t[i];a.isNode()&&this.drawCachedElement(e,a,n,r)}},CRp$1.drawLayeredElements=function(e,t,n,r){var i=this.data.lyrTxrCache.getLayers(t,n);if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o.bb;0!==s.w&&0!==s.h&&e.drawImage(o.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,n,r)};var CRp$2={drawEdge:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,s=t._private.rscratch;if((!a||t.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var u;n&&(u=n,e.translate(-u.x1,-u.y1));var l=a?t.pstyle("opacity").value:1,c=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,h=t.pstyle("line-cap").value,d=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;e.lineWidth=f,e.lineCap=h,o.eleStrokeStyle(e,t,n),o.drawEdgePath(t,e,s.allpts,c),e.lineCap="butt"},p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;o.drawArrowheads(e,t,n)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var g=t.pstyle("ghost-offset-x").pfValue,v=t.pstyle("ghost-offset-y").pfValue,m=t.pstyle("ghost-opacity").value,y=l*m;e.translate(g,v),d(y),p(y),e.translate(-g,-v)}d(),p(),i&&o.drawEdgeOverlay(e,t),o.drawElementText(e,t,null,r),n&&e.translate(u.x1,u.y1)}},drawEdgeOverlay:function(e,t){if(t.visible()){var n=t.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),a=t._private.rscratch,o=2*t.pstyle("overlay-padding").pfValue,s=t.pstyle("overlay-color").value;e.lineWidth=o,"self"!==a.edgeType||i?e.lineCap="round":e.lineCap="butt",r.colorStrokeStyle(e,s[0],s[1],s[2],n),r.drawEdgePath(t,e,a.allpts,"solid")}}},drawEdgePath:function(e,t,n,r){var i,a=e._private.rscratch,o=t,s=!1,u=this.usePaths(),l=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(u){var f=n.join("$");a.pathCacheKey&&a.pathCacheKey===f?(i=t=a.pathCache,s=!0):(i=t=new Path2D,a.pathCacheKey=f,a.pathCache=i)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([])}if(!s&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)t.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"segments":case"haystack":for(var d=2;d+1<n.length;d+=2)t.lineTo(n[d],n[d+1])}t=o,u?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])},drawArrowheads:function(e,t,n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(e,t,n,r,i,a,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a)||null==a)){var s=t.pstyle(n+"-arrow-shape").value;if("none"!==s){var u="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",l=t.pstyle(n+"-arrow-fill").value,c=t.pstyle("width").pfValue,f=t.pstyle("opacity").value;void 0===o&&(o=f);var h=e.globalCompositeOperation;1===o&&"hollow"!==l||(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(t,e,u,c,s,r,i,a),e.globalCompositeOperation=h);var d=t.pstyle(n+"-arrow-color").value;this.colorFillStyle(e,d[0],d[1],d[2],o),this.colorStrokeStyle(e,d[0],d[1],d[2],o),this.drawArrowShape(t,e,l,c,s,r,i,a)}}},drawArrowShape:function(e,t,n,r,i,a,o,s){var u,l=this,c=this.usePaths()&&"triangle-cross"!==i,f=!1,h=t,d={x:a,y:o},p=e.pstyle("arrow-scale").value,g=this.getArrowWidth(r,p),v=l.arrowShapes[i];if(c){var m=l.arrowPathCache=l.arrowPathCache||[],y=hashString(i),b=m[y];null!=b?(u=t=b,f=!0):(u=t=new Path2D,m[y]=u)}t.beginPath&&t.beginPath(),f||(c?v.draw(t,1,0,{x:0,y:0},1):v.draw(t,g,s,d,r)),t.closePath&&t.closePath(),t=h,c&&(t.translate(a,o),t.rotate(s),t.scale(g,g)),"filled"!==n&&"both"!==n||(c?t.fill(u):t.fill()),"hollow"!==n&&"both"!==n||(t.lineWidth=(v.matchEdgeWidth?r:1)/(c?g:1),t.lineJoin="miter",c?t.stroke(u):t.stroke()),c&&(t.scale(1/g,1/g),t.rotate(-s),t.translate(-a,-o))}},CRp$3={safeDrawImage:function(e,t,n,r,i,a,o,s,u,l){i<=0||a<=0||u<=0||l<=0||e.drawImage(t,n,r,i,a,o,s,u,l)},drawInscribedImage:function(e,t,n,r,i){var a=this,o=n.position(),s=o.x,u=o.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),f=c(n,"background-fit","value",r),h=c(n,"background-repeat","value",r),d=n.width(),p=n.height(),g=2*n.padding(),v=d+("inner"===c(n,"background-width-relative-to","value",r)?0:g),m=p+("inner"===c(n,"background-height-relative-to","value",r)?0:g),y=n._private.rscratch,b="node"===c(n,"background-clip","value",r),x=c(n,"background-image-opacity","value",r)*i,w=t.width||t.cachedW,E=t.height||t.cachedH;null!=w&&null!=E||(document.body.appendChild(t),w=t.cachedW=t.width||t.offsetWidth,E=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var T=w,_=E;if("auto"!==c(n,"background-width","value",r)&&(T="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*v:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(_="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*m:c(n,"background-height","pfValue",r)),0!==T&&0!==_){if("contain"===f)T*=C=Math.min(v/T,m/_),_*=C;else if("cover"===f){var C;T*=C=Math.max(v/T,m/_),_*=C}var D=s-v/2,S=c(n,"background-position-x","units",r),A=c(n,"background-position-x","pfValue",r);D+="%"===S?(v-T)*A:A;var k=c(n,"background-offset-x","units",r),R=c(n,"background-offset-x","pfValue",r);D+="%"===k?(v-T)*R:R;var O=u-m/2,M=c(n,"background-position-y","units",r),L=c(n,"background-position-y","pfValue",r);O+="%"===M?(m-_)*L:L;var N=c(n,"background-offset-y","units",r),P=c(n,"background-offset-y","pfValue",r);O+="%"===N?(m-_)*P:P,y.pathCache&&(D-=s,O-=u,s=0,u=0);var I=e.globalAlpha;if(e.globalAlpha=x,"no-repeat"===h)b&&(e.save(),y.pathCache?e.clip(y.pathCache):(a.nodeShapes[a.getNodeShape(n)].draw(e,s,u,v,m),e.clip())),a.safeDrawImage(e,t,0,0,w,E,D,O,T,_),b&&e.restore();else{var B=e.createPattern(t,h);e.fillStyle=B,a.nodeShapes[a.getNodeShape(n)].draw(e,s,u,v,m),e.translate(D,O),e.fill(),e.translate(-D,-O)}e.globalAlpha=I}}},CRp$4={};function roundRect(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),e.fill()}CRp$4.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(log2(n*r));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},CRp$4.drawElementText=function(e,t,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==r){if(a&&!o.eleTextBiggerThanMin(t))return}else if(!1===r)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(t);e.textAlign=u,e.textBaseline="bottom"}else{var l=t.pstyle("label"),c=t.pstyle("source-label"),f=t.pstyle("target-label");if(!(l&&l.value||c&&c.value||f&&f.value))return;e.textAlign="center",e.textBaseline="bottom"}var h,d=!n;n&&(h=n,e.translate(-h.x1,-h.y1)),null==i?(o.drawText(e,t,null,d,a),t.isEdge()&&(o.drawText(e,t,"source",d,a),o.drawText(e,t,"target",d,a))):o.drawText(e,t,i,d,a),n&&e.translate(h.x1,h.y1)},CRp$4.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},CRp$4.setupTextStyle=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,s=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,u=t.pstyle("text-outline-opacity").value*s,l=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+o+" "+i+" "+a,e.lineJoin="round",this.colorFillStyle(e,l[0],l[1],l[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],u)},CRp$4.getTextAngle=function(e,t){var n=e._private.rscratch,r=t?t+"-":"",i=e.pstyle(r+"text-rotation"),a=getPrefixedProperty(n,"labelAngle",t);return"autorotate"===i.strValue?e.isEdge()?a:0:"none"===i.strValue?0:i.pfValue},CRp$4.drawText=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===n&&(n=null);var s,u,l=getPrefixedProperty(a,"labelX",n),c=getPrefixedProperty(a,"labelY",n),f=this.getLabelText(t,n);if(null!=f&&""!==f&&!isNaN(l)&&!isNaN(c)){this.setupTextStyle(e,t,i);var h,d=n?n+"-":"",p=getPrefixedProperty(a,"labelWidth",n),g=getPrefixedProperty(a,"labelHeight",n),v=t.pstyle(d+"text-margin-x").pfValue,m=t.pstyle(d+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle("text-halign").value,x=t.pstyle("text-valign").value;switch(y&&(b="center",x="center"),l+=v,c+=m,0!==(h=r?this.getTextAngle(t,n):0)&&(s=l,u=c,e.translate(s,u),e.rotate(h),l=0,c=0),x){case"top":break;case"center":c+=g/2;break;case"bottom":c+=g}var w=t.pstyle("text-background-opacity").value,E=t.pstyle("text-border-opacity").value,T=t.pstyle("text-border-width").pfValue,_=t.pstyle("text-background-padding").pfValue;if(w>0||T>0&&E>0){var C=l-_;switch(b){case"left":C-=p;break;case"center":C-=p/2}var D=c-g-_,S=p+2*_,A=g+2*_;if(w>0){var k=e.fillStyle,R=t.pstyle("text-background-color").value;e.fillStyle="rgba("+R[0]+","+R[1]+","+R[2]+","+w*o+")","roundrectangle"==t.pstyle("text-background-shape").strValue?roundRect(e,C,D,S,A,2):e.fillRect(C,D,S,A),e.fillStyle=k}if(T>0&&E>0){var O=e.strokeStyle,M=e.lineWidth,L=t.pstyle("text-border-color").value,N=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+E*o+")",e.lineWidth=T,e.setLineDash)switch(N){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=T/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(C,D,S,A),"double"===N){var P=T/2;e.strokeRect(C+P,D+P,S-2*P,A-2*P)}e.setLineDash&&e.setLineDash([]),e.lineWidth=M,e.strokeStyle=O}}var I=2*t.pstyle("text-outline-width").pfValue;if(I>0&&(e.lineWidth=I),"wrap"===t.pstyle("text-wrap").value){var B=getPrefixedProperty(a,"labelWrapCachedLines",n),$=getPrefixedProperty(a,"labelLineHeight",n),F=p/2,q=this.getLabelJustification(t);switch("auto"===q||("left"===b?"left"===q?l+=-p:"center"===q&&(l+=-F):"center"===b?"left"===q?l+=-F:"right"===q&&(l+=F):"right"===b&&("center"===q?l+=F:"right"===q&&(l+=p))),x){case"top":c-=(B.length-1)*$;break;case"center":case"bottom":c-=(B.length-1)*$}for(var j=0;j<B.length;j++)I>0&&e.strokeText(B[j],l,c),e.fillText(B[j],l,c),c+=$}else I>0&&e.strokeText(f,l,c),e.fillText(f,l,c);0!==h&&(e.rotate(-h),e.translate(-s,-u))}}};var CRp$5={drawNode:function(e,t,n){var r,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this,l=t._private,c=l.rscratch,f=t.position();if(number(f.x)&&number(f.y)&&(!s||t.visible())){var h,d,p=s?t.effectiveOpacity():1,g=u.usePaths(),v=!1,m=t.padding();r=t.width()+2*m,i=t.height()+2*m,n&&(d=n,e.translate(-d.x1,-d.y1));for(var y=t.pstyle("background-image").value,b=new Array(y.length),x=new Array(y.length),w=0,E=0;E<y.length;E++){var T=y[E];if(b[E]=null!=T&&"none"!==T){var _=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",E);w++,x[E]=u.getCachedImage(T,_,function(){l.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var C=t.pstyle("background-blacken").value,D=t.pstyle("border-width").pfValue,S=t.pstyle("background-opacity").value*p,A=t.pstyle("border-color").value,k=t.pstyle("border-style").value,R=t.pstyle("border-opacity").value*p;e.lineJoin="miter";var O=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;u.eleFillStyle(e,t,n)},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;u.colorStrokeStyle(e,A[0],A[1],A[2],t)},L=t.pstyle("shape").strValue,N=t.pstyle("shape-polygon-points").pfValue;if(g){e.translate(f.x,f.y);var P=u.nodePathCache=u.nodePathCache||[],I=hashStrings("polygon"===L?L+","+N.join(","):L,""+i,""+r),B=P[I];null!=B?(h=B,v=!0,c.pathCache=h):(h=new Path2D,P[I]=c.pathCache=h)}var $=function(){if(!v){var n=f;g&&(n={x:0,y:0}),u.nodeShapes[u.getNodeShape(t)].draw(h||e,n.x,n.y,r,i)}g?e.fill(h):e.fill()},F=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=l.backgrounding,i=0,a=0;a<x.length;a++)b[a]&&x[a].complete&&!x[a].error&&(i++,u.drawInscribedImage(e,x[a],t,a,n));l.backgrounding=!(i===w),r!==l.backgrounding&&t.updateStyle(!1)},q=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;u.hasPie(t)&&(u.drawPie(e,t,a),n&&(g||u.nodeShapes[u.getNodeShape(t)].draw(e,f.x,f.y,r,i)))},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=(C>0?C:-C)*t,r=C>0?0:255;0!==C&&(u.colorFillStyle(e,r,r,r,n),g?e.fill(h):e.fill())},z=function(){if(D>0){if(e.lineWidth=D,e.lineCap="butt",e.setLineDash)switch(k){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(g?e.stroke(h):e.stroke(),"double"===k){e.lineWidth=D/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(h):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var Y=t.pstyle("ghost-offset-x").pfValue,G=t.pstyle("ghost-offset-y").pfValue,V=t.pstyle("ghost-opacity").value,U=V*p;e.translate(Y,G),O(V*S),$(),F(U),q(0!==C||0!==D),j(U),M(V*R),z(),e.translate(-Y,-G)}O(),$(),F(),q(0!==C||0!==D),j(),M(),z(),g&&e.translate(-f.x,-f.y),u.drawElementText(e,t,null,a),o&&u.drawNodeOverlay(e,t,f,r,i),n&&e.translate(d.x1,d.y1)}},drawNodeOverlay:function(e,t,n,r,i){if(t.visible()){var a=t.pstyle("overlay-padding").pfValue,o=t.pstyle("overlay-opacity").value,s=t.pstyle("overlay-color").value;if(o>0){if(n=n||t.position(),null==r||null==i){var u=t.padding();r=t.width()+2*u,i=t.height()+2*u}this.colorFillStyle(e,s[0],s[1],s[2],o),this.nodeShapes.roundrectangle.draw(e,n.x,n.y,r+2*a,i+2*a),e.fill()}}},hasPie:function(e){return(e=e[0])._private.hasPie},drawPie:function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),a=t.pstyle("pie-size"),o=r.x,s=r.y,u=t.width(),l=t.height(),c=Math.min(u,l)/2,f=0;this.usePaths()&&(o=0,s=0),"%"===a.units?c*=a.pfValue:void 0!==a.pfValue&&(c=a.pfValue/2);for(var h=1;h<=i.pieBackgroundN;h++){var d=t.pstyle("pie-"+h+"-background-size").value,p=t.pstyle("pie-"+h+"-background-color").value,g=t.pstyle("pie-"+h+"-background-opacity").value*n,v=d/100;v+f>1&&(v=1-f);var m=1.5*Math.PI+2*Math.PI*f,y=m+2*Math.PI*v;0===d||f>=1||f+v>1||(e.beginPath(),e.moveTo(o,s),e.arc(o,s,c,m,y),e.closePath(),this.colorFillStyle(e,p[0],p[1],p[2],g),e.fill(),f+=v)}}},CRp$6={},motionBlurDelay=100;CRp$6.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},CRp$6.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((t=n[i]).context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},CRp$6.createGradientStyleFor=function(e,t,n,r,i){var a,o=this.usePaths(),s=n.pstyle(t+"-gradient-stop-colors").value,u=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),f=n.midpoint(),h=dist$1(l,f),d=dist$1(c,f);a=e.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var p=o?{x:0,y:0}:n.position(),g=n.paddedWidth(),v=n.paddedHeight();a=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,v))}else if(n.isEdge()){var m=n.sourceEndpoint(),y=n.targetEndpoint();a=e.createLinearGradient(m.x,m.y,y.x,y.y)}else{var b=o?{x:0,y:0}:n.position(),x=n.paddedWidth()/2,w=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":a=e.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":a=e.createLinearGradient(b.x+x,b.y,b.x-x,b.y);break;case"to-right":a=e.createLinearGradient(b.x-x,b.y,b.x+x,b.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(b.x-x,b.y-w,b.x+x,b.y+w);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(b.x-x,b.y+w,b.x+x,b.y-w);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(b.x+x,b.y-w,b.x-x,b.y+w);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(b.x+x,b.y+w,b.x-x,b.y-w)}}if(!a)return null;for(var E=u.length===s.length,T=s.length,_=0;_<T;_++)a.addColorStop(E?u[_]:_/(T-1),"rgba("+s[_][0]+","+s[_][1]+","+s[_][2]+","+i+")");return a},CRp$6.gradientFillStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"background",t,n,r);if(!i)return null;e.fillStyle=i},CRp$6.colorFillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},CRp$6.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(e,t,r,n);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],n)}},CRp$6.gradientStrokeStyle=function(e,t,n,r){var i=this.createGradientStyleFor(e,"line",t,n,r);if(!i)return null;e.strokeStyle=i},CRp$6.colorStrokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},CRp$6.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(e,t,r,n);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],n)}},CRp$6.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),i=r[2],a=r[3],o=t.getPixelRatio(),s=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(o=s);var u,l=i*o,c=a*o;if(l!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var f=n.canvasContainer;f.style.width=i+"px",f.style.height=a+"px";for(var h=0;h<t.CANVAS_LAYERS;h++)(u=n.canvases[h]).width=l,u.height=c,u.style.width=i+"px",u.style.height=a+"px";for(h=0;h<t.BUFFER_COUNT;h++)(u=n.bufferCanvases[h]).width=l,u.height=c,u.style.width=i+"px",u.style.height=a+"px";t.textureMult=1,o<=1&&(u=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,u.width=l*t.textureMult,u.height=c*t.textureMult),t.canvasWidth=l,t.canvasHeight=c}},CRp$6.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},CRp$6.render=function(e){var t=(e=e||staticEmptyObject()).forcedContext,n=e.drawAllLayers,r=e.drawOnlyNodeLayer,i=e.forcedZoom,a=e.forcedPan,o=this,s=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,u=o.cy,l=o.data,c=l.canvasNeedsRedraw,f=o.textureOnViewport&&!t&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),h=void 0!==e.motionBlur?e.motionBlur:o.motionBlur,d=o.motionBlurPxRatio,p=u.hasCompoundNodes(),g=o.hoverData.draggingEles,v=!(!o.hoverData.selecting&&!o.touchData.selecting),m=h=h&&!t&&o.motionBlurEnabled&&!v;t||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!t&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),h&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(m=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!f&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var y=u.style(),b=u.zoom(),x=void 0!==i?i:b,w=u.pan(),E={x:w.x,y:w.y},T={zoom:b,pan:{x:w.x,y:w.y}},_=o.prevViewport;void 0===_||T.zoom!==_.zoom||T.pan.x!==_.pan.x||T.pan.y!==_.pan.y||g&&!p||(o.motionBlurPxRatio=1),a&&(E=a),x*=s,E.x*=s,E.y*=s;var C=o.getCachedZSortedEles();function D(e,t,n,r,i){var a=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,o.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=a}function S(e,r){var s,u,c,f;o.clearingMotionBlur||e!==l.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&e!==l.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(s=E,u=x,c=o.canvasWidth,f=o.canvasHeight):(s={x:w.x*d,y:w.y*d},u=b*d,c=o.canvasWidth*d,f=o.canvasHeight*d),e.setTransform(1,0,0,1,0,0),"motionBlur"===r?D(e,0,0,c,f):t||void 0!==r&&!r||e.clearRect(0,0,c,f),n||(e.translate(s.x,s.y),e.scale(u,u)),a&&e.translate(a.x,a.y),i&&e.scale(i,i)}if(f||(o.textureDrawLastFrame=!1),f){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=u.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var A=o.data.bufferContexts[o.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult}),(T=o.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-T.pan.x)/T.zoom,y:(0-T.pan.y)/T.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var k=l.contexts[o.NODE],R=o.textureCache.texture;T=o.textureCache.viewport;k.setTransform(1,0,0,1,0,0),h?D(k,0,0,T.width,T.height):k.clearRect(0,0,T.width,T.height);var O=y.core("outside-texture-bg-color").value,M=y.core("outside-texture-bg-opacity").value;o.colorFillStyle(k,O[0],O[1],O[2],M),k.fillRect(0,0,T.width,T.height);b=u.zoom();S(k,!1),k.clearRect(T.mpan.x,T.mpan.y,T.width/T.zoom/s,T.height/T.zoom/s),k.drawImage(R,T.mpan.x,T.mpan.y,T.width/T.zoom/s,T.height/T.zoom/s)}else o.textureOnViewport&&!t&&(o.textureCache=null);var L=u.extent(),N=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),P=o.hideEdgesOnViewport&&N,I=[];if(I[o.NODE]=!c[o.NODE]&&h&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,I[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),I[o.DRAG]=!c[o.DRAG]&&h&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,I[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||n||r||I[o.NODE]){var B=h&&!I[o.NODE]&&1!==d;S(k=t||(B?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:l.contexts[o.NODE]),h&&!B?"motionBlur":void 0),P?o.drawCachedNodes(k,C.nondrag,s,L):o.drawLayeredElements(k,C.nondrag,s,L),o.debug&&o.drawDebugPoints(k,C.nondrag),n||h||(c[o.NODE]=!1)}if(!r&&(c[o.DRAG]||n||I[o.DRAG])){B=h&&!I[o.DRAG]&&1!==d;S(k=t||(B?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:l.contexts[o.DRAG]),h&&!B?"motionBlur":void 0),P?o.drawCachedNodes(k,C.drag,s,L):o.drawCachedElements(k,C.drag,s,L),o.debug&&o.drawDebugPoints(k,C.drag),n||h||(c[o.DRAG]=!1)}if(o.showFps||!r&&c[o.SELECT_BOX]&&!n){if(S(k=t||l.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){b=o.cy.zoom();var $=y.core("selection-box-border-width").value/b;k.lineWidth=$,k.fillStyle="rgba("+y.core("selection-box-color").value[0]+","+y.core("selection-box-color").value[1]+","+y.core("selection-box-color").value[2]+","+y.core("selection-box-opacity").value+")",k.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),$>0&&(k.strokeStyle="rgba("+y.core("selection-box-border-color").value[0]+","+y.core("selection-box-border-color").value[1]+","+y.core("selection-box-border-color").value[2]+","+y.core("selection-box-opacity").value+")",k.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(l.bgActivePosistion&&!o.hoverData.selecting){b=o.cy.zoom();var F=l.bgActivePosistion;k.fillStyle="rgba("+y.core("active-bg-color").value[0]+","+y.core("active-bg-color").value[1]+","+y.core("active-bg-color").value[2]+","+y.core("active-bg-opacity").value+")",k.beginPath(),k.arc(F.x,F.y,y.core("active-bg-size").pfValue/b,0,2*Math.PI),k.fill()}var q=o.lastRedrawTime;if(o.showFps&&q){q=Math.round(q);var j=Math.round(1e3/q);k.setTransform(1,0,0,1,0,0),k.fillStyle="rgba(255, 0, 0, 0.75)",k.strokeStyle="rgba(255, 0, 0, 0.75)",k.lineWidth=1,k.fillText("1 frame = "+q+" ms = "+j+" fps",0,20);k.strokeRect(0,30,250,20),k.fillRect(0,30,250*Math.min(j/60,1),20)}n||(c[o.SELECT_BOX]=!1)}if(h&&1!==d){var z=l.contexts[o.NODE],Y=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],G=l.contexts[o.DRAG],V=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],U=function(e,t,n){e.setTransform(1,0,0,1,0,0),n||!m?e.clearRect(0,0,o.canvasWidth,o.canvasHeight):D(e,0,0,o.canvasWidth,o.canvasHeight);var r=d;e.drawImage(t,0,0,o.canvasWidth*r,o.canvasHeight*r,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||I[o.NODE])&&(U(z,Y,I[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||I[o.DRAG])&&(U(G,V,I[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=T,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),h&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!f,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()},motionBlurDelay)),t||u.emit("render")};for(var CRp$7={drawPolygonPath:function(e,t,n,r,i,a){var o=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],n+s*a[1]);for(var u=1;u<a.length/2;u++)e.lineTo(t+o*a[2*u],n+s*a[2*u+1]);e.closePath()},drawRoundRectanglePath:function(e,t,n,r,i){var a=r/2,o=i/2,s=getRoundRectangleRadius(r,i);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.arcTo(t+a,n-o,t+a,n,s),e.arcTo(t+a,n+o,t,n+o,s),e.arcTo(t-a,n+o,t-a,n,s),e.arcTo(t-a,n-o,t,n-o,s),e.lineTo(t,n-o),e.closePath()},drawBottomRoundRectanglePath:function(e,t,n,r,i){var a=r/2,o=i/2,s=getRoundRectangleRadius(r,i);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.lineTo(t+a,n-o),e.lineTo(t+a,n),e.arcTo(t+a,n+o,t,n+o,s),e.arcTo(t-a,n+o,t-a,n,s),e.lineTo(t-a,n-o),e.lineTo(t,n-o),e.closePath()},drawCutRectanglePath:function(e,t,n,r,i){var a=r/2,o=i/2,s=getCutRectangleCornerLength();e.beginPath&&e.beginPath(),e.moveTo(t-a+s,n-o),e.lineTo(t+a-s,n-o),e.lineTo(t+a,n-o+s),e.lineTo(t+a,n+o-s),e.lineTo(t+a-s,n+o),e.lineTo(t-a+s,n+o),e.lineTo(t-a,n+o-s),e.lineTo(t-a,n-o+s),e.closePath()},drawBarrelPath:function(e,t,n,r,i){var a=r/2,o=i/2,s=t-a,u=t+a,l=n-o,c=n+o,f=getBarrelCurveConstants(r,i),h=f.widthOffset,d=f.heightOffset,p=f.ctrlPtOffsetPct*h;e.beginPath&&e.beginPath(),e.moveTo(s,l+d),e.lineTo(s,c-d),e.quadraticCurveTo(s+p,c,s+h,c),e.lineTo(u-h,c),e.quadraticCurveTo(u-p,c,u,c-d),e.lineTo(u,l+d),e.quadraticCurveTo(u-p,l,u-h,l),e.lineTo(s+h,l),e.quadraticCurveTo(s+p,l,s,l+d),e.closePath()}},sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40,i=0*Math.PI;i<2*Math.PI;i+=ellipseStepSize)sin[i]=Math.sin(i),cos[i]=Math.cos(i);CRp$7.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var a,o,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=ellipseStepSize)a=t-s*sin[l]*sin0+s*cos[l]*cos0,o=n+u*cos[l]*sin0+u*sin[l]*cos0,0===l?e.moveTo(a,o):e.lineTo(a,o);e.closePath()};var CRp$8={};function b64ToBlob(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new Blob([r],{type:t})}function b64UriToB64(e){var t=e.indexOf(",");return e.substr(t+1)}function output(e,t,n){var r=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new Promise$1(function(r,i){try{t.toBlob(function(e){null!=e?r(e):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(e){i(e)}});case"blob":return b64ToBlob(b64UriToB64(r()),n);case"base64":return b64UriToB64(r());case"base64uri":default:return r()}}CRp$8.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},CRp$8.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=e.full?Math.ceil(n.w):r[2],a=e.full?Math.ceil(n.h):r[3],o=number(e.maxWidth)||number(e.maxHeight),s=this.getPixelRatio(),u=1;if(void 0!==e.scale)i*=e.scale,a*=e.scale,u=e.scale;else if(o){var l=1/0,c=1/0;number(e.maxWidth)&&(l=u*e.maxWidth/i),number(e.maxHeight)&&(c=u*e.maxHeight/a),i*=u=Math.min(l,c),a*=u}o||(i*=s,a*=s,u*=s);var f=document.createElement("canvas");f.width=i,f.height=a,f.style.width=i+"px",f.style.height=a+"px";var h=f.getContext("2d");if(i>0&&a>0){h.clearRect(0,0,i,a),h.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(e.full)h.translate(-n.x1*u,-n.y1*u),h.scale(u,u),this.drawElements(h,d),h.scale(1/u,1/u),h.translate(n.x1*u,n.y1*u);else{var p=t.pan(),g={x:p.x*u,y:p.y*u};u*=t.zoom(),h.translate(g.x,g.y),h.scale(u,u),this.drawElements(h,d),h.scale(1/u,1/u),h.translate(-g.x,-g.y)}e.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=e.bg,h.rect(0,0,i,a),h.fill())}return f},CRp$8.png=function(e){return output(e,this.bufferCanvasImage(e),"image/png")},CRp$8.jpg=function(e){return output(e,this.bufferCanvasImage(e),"image/jpeg")};var CRp$9={nodeShapeImpl:function(e,t,n,r,i,a,o){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,a);case"polygon":return this.drawPolygonPath(t,n,r,i,a,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,a);case"barrel":return this.drawBarrelPath(t,n,r,i,a)}}},CR=CanvasRenderer,CRp$a=CanvasRenderer.prototype;function CanvasRenderer(e){var t=this;t.data={canvases:new Array(CRp$a.CANVAS_LAYERS),contexts:new Array(CRp$a.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp$a.CANVAS_LAYERS),bufferCanvases:new Array(CRp$a.BUFFER_COUNT),bufferContexts:new Array(CRp$a.CANVAS_LAYERS)};t.data.canvasContainer=document.createElement("div");var n=t.data.canvasContainer.style;t.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var r=e.cy.container();r.appendChild(t.data.canvasContainer),r.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var a=0;a<CRp$a.CANVAS_LAYERS;a++){var o=t.data.canvases[a]=document.createElement("canvas");t.data.contexts[a]=o.getContext("2d"),Object.keys(i).forEach(function(e){o.style[e]=i[e]}),o.style.position="absolute",o.setAttribute("data-id","layer"+a),o.style.zIndex=String(CRp$a.CANVAS_LAYERS-a),t.data.canvasContainer.appendChild(o),t.data.canvasNeedsRedraw[a]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[CRp$a.NODE].setAttribute("data-id","layer"+CRp$a.NODE+"-node"),t.data.canvases[CRp$a.SELECT_BOX].setAttribute("data-id","layer"+CRp$a.SELECT_BOX+"-selectbox"),t.data.canvases[CRp$a.DRAG].setAttribute("data-id","layer"+CRp$a.DRAG+"-drag");for(a=0;a<CRp$a.BUFFER_COUNT;a++)t.data.bufferCanvases[a]=document.createElement("canvas"),t.data.bufferContexts[a]=t.data.bufferCanvases[a].getContext("2d"),t.data.bufferCanvases[a].style.position="absolute",t.data.bufferCanvases[a].setAttribute("data-id","buffer"+a),t.data.bufferCanvases[a].style.zIndex=String(-a-1),t.data.bufferCanvases[a].style.visibility="hidden";t.pathsEnabled=!0;var s=makeBoundingBox(),u=function(e){return{x:-e.w/2,y:-e.h/2}},l=function(e){return e.boundingBox(),e[0]._private.bodyBounds},c=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||s},f=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||s},h=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||s},d=function(e,t){return t},p=function(e,t){return{x:e.x+t.pstyle("text-margin-x").pfValue,y:e.y+t.pstyle("text-margin-y").pfValue}},g=function(e,t,n){var r=e[0]._private.rscratch;return{x:r[t],y:r[n]}},v=t.data.eleTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.nodeKey},doesEleInvalidateKey:function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:function(e,n,r,i,a){return t.drawElement(e,n,r,!1,!1,a)},getBoundingBox:l,getRotationPoint:function(e){return{x:((t=l(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2};var t},getRotationOffset:function(e){return u(l(e))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),m=t.data.lblTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.labelStyleKey},drawElement:function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"main",a)},getBoundingBox:c,getRotationPoint:function(e){return p(g(e,"labelX","labelY"),e)},getRotationOffset:function(e){var t=c(e),n=u(c(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":n.x=-t.w;break;case"right":n.x=0}switch(e.pstyle("text-valign").value){case"top":n.y=-t.h;break;case"bottom":n.y=0}}return n},isVisible:d}),y=t.data.slbTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.sourceLabelStyleKey},drawElement:function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"source",a)},getBoundingBox:f,getRotationPoint:function(e){return p(g(e,"sourceLabelX","sourceLabelY"),e)},getRotationOffset:function(e){return u(f(e))},isVisible:d}),b=t.data.tlbTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.targetLabelStyleKey},drawElement:function(e,n,r,i,a){return t.drawElementText(e,n,r,i,"target",a)},getBoundingBox:h,getRotationPoint:function(e){return p(g(e,"targetLabelX","targetLabelY"),e)},getRotationOffset:function(e){return u(h(e))},isVisible:d}),x=t.data.lyrTxrCache=new LayeredTextureCache(t);t.onUpdateEleCalcs(function(e,t){v.invalidateElements(t),m.invalidateElements(t),y.invalidateElements(t),b.invalidateElements(t),x.invalidateElements(t);for(var n=0;n<t.length;n++){var r=t[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}});var w=function(e){for(var t=0;t<e.length;t++)x.enqueueElementRefinement(e[t].ele)};v.onDequeue(w),m.onDequeue(w),y.onDequeue(w),b.onDequeue(w)}CRp$a.CANVAS_LAYERS=3,CRp$a.SELECT_BOX=0,CRp$a.DRAG=1,CRp$a.NODE=2,CRp$a.BUFFER_COUNT=3,CRp$a.TEXTURE_BUFFER=0,CRp$a.MOTIONBLUR_BUFFER_NODE=1,CRp$a.MOTIONBLUR_BUFFER_DRAG=2,CRp$a.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[CRp$a.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[CRp$a.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[CRp$a.SELECT_BOX]=t}};var pathsImpld="undefined"!=typeof Path2D;CRp$a.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},CRp$a.usePaths=function(){return pathsImpld&&this.pathsEnabled},CRp$a.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},CRp$a.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},CRp$a.makeOffscreenCanvas=function(e,t){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":_typeof(OffscreenCanvas))?n=new OffscreenCanvas(e,t):((n=document.createElement("canvas")).width=e,n.height=t),n},[CRp,CRp$1,CRp$2,CRp$3,CRp$4,CRp$5,CRp$6,CRp$7,CRp$8,CRp$9].forEach(function(e){extend(CRp$a,e)});var renderer=[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}],incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:renderer}],extensions={},modules={};function setExtension(e,t,n){var r=n,i=function(n){error("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e){if(Core.prototype[t])return i(t);Core.prototype[t]=n}else if("collection"===e){if(Collection.prototype[t])return i(t);Collection.prototype[t]=n}else if("layout"===e){for(var a=function(e){this.options=e,n.call(this,e),plainObject(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=n.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(e){return e._private.cy},h={addEventFields:function(e,t){t.layout=e,t.cy=f(e),t.target=e},bubble:function(){return!0},parent:function(e){return f(e)}};extend(o,{createEmitter:function(){return this._private.emitter=new Emitter(h,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),define$3.eventAliasesOn(o),r=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var d=getExtension("renderer","base"),p=d.prototype,g=n,v=n.prototype,m=function(){d.apply(this,arguments),g.apply(this,arguments)},y=m.prototype;for(var b in p){var x=p[b];if(null!=v[b])return i(b);y[b]=x}for(var w in v)y[w]=v[w];p.clientFunctions.forEach(function(e){y[e]=y[e]||function(){error("Renderer does not implement `renderer."+e+"()` on its prototype")}}),r=m}return setMap({map:extensions,keys:[e,t],value:r})}function getExtension(e,t){return getMap({map:extensions,keys:[e,t]})}function setModule(e,t,n,r,i){return setMap({map:modules,keys:[e,t,n,r],value:i})}function getModule(e,t,n,r){return getMap({map:modules,keys:[e,t,n,r]})}var extension=function(){return 2===arguments.length?getExtension.apply(null,arguments):3===arguments.length?setExtension.apply(null,arguments):4===arguments.length?getModule.apply(null,arguments):5===arguments.length?setModule.apply(null,arguments):void error("Invalid extension access syntax")};Core.prototype.extension=extension,incExts.forEach(function(e){e.extensions.forEach(function(t){setExtension(e.type,t.name,t.impl)})});var Stylesheet=function e(){if(!(this instanceof e))return new e;this.length=0},sheetfn=Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"},sheetfn.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},sheetfn.css=function(e,t){var n=this.length-1;if(string$1(e))this[n].properties.push({name:e,value:t});else if(plainObject(e))for(var r=e,i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],s=r[o];if(null!=s){var u=Style.properties[o]||Style.properties[dash2camel(o)];if(null!=u){var l=u.name,c=s;this[n].properties.push({name:l,value:c})}}}return this},sheetfn.style=sheetfn.css,sheetfn.generateStyle=function(e){var t=new Style(e);return this.appendToStyle(t)},sheetfn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var a=0;a<i.length;a++){var o=i[a];e.css(o.name,o.value)}}return e};var version="3.10.0",cytoscape$1=function(e){return void 0===e&&(e={}),plainObject(e)?new Core(e):string$1(e)?extension.apply(extension,arguments):void 0};cytoscape$1.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(cytoscape$1),e.apply(null,t),this},cytoscape$1.warnings=function(e){return warnings(e)},cytoscape$1.version=version,cytoscape$1.stylesheet=cytoscape$1.Stylesheet=Stylesheet;var cytoscape_cjs=cytoscape$1,layoutBase=createCommonjsModule(function(e,t){var n;n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){function r(){}r.QUALITY=1,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=15,r.NODE_DIMENSIONS_INCLUDE_LABELS=!1,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,e.exports=r},function(e,t,n){var r=n(2),i=n(8),a=n(9);function o(e,t,n){r.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=e,this.target=t}for(var s in o.prototype=Object.create(r.prototype),r)o[s]=r[s];o.prototype.getSource=function(){return this.source},o.prototype.getTarget=function(){return this.target},o.prototype.isInterGraph=function(){return this.isInterGraph},o.prototype.getLength=function(){return this.length},o.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},o.prototype.getBendpoints=function(){return this.bendpoints},o.prototype.getLca=function(){return this.lca},o.prototype.getSourceInLca=function(){return this.sourceInLca},o.prototype.getTargetInLca=function(){return this.targetInLca},o.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},o.prototype.getOtherEndInGraph=function(e,t){for(var n=this.getOtherEnd(e),r=t.getGraphManager().getRoot();;){if(n.getOwner()==t)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},o.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},o.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=o},function(e,t,n){e.exports=function(e){this.vGraphObject=e}},function(e,t,n){var r=n(2),i=n(10),a=n(13),o=n(0),s=n(16),u=n(4);function l(e,t,n,o){null==n&&null==o&&(o=t),r.call(this,o),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=o,this.edges=[],this.graphManager=e,this.rect=null!=n&&null!=t?new a(t.x,t.y,n.width,n.height):new a}for(var c in l.prototype=Object.create(r.prototype),r)l[c]=r[c];l.prototype.getEdges=function(){return this.edges},l.prototype.getChild=function(){return this.child},l.prototype.getOwner=function(){return this.owner},l.prototype.getWidth=function(){return this.rect.width},l.prototype.setWidth=function(e){this.rect.width=e},l.prototype.getHeight=function(){return this.rect.height},l.prototype.setHeight=function(e){this.rect.height=e},l.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},l.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},l.prototype.getCenter=function(){return new u(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},l.prototype.getLocation=function(){return new u(this.rect.x,this.rect.y)},l.prototype.getRect=function(){return this.rect},l.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},l.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},l.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},l.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},l.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},l.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},l.prototype.getEdgeListToNode=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(r.target==e){if(r.source!=n)throw"Incorrect edge source!";t.push(r)}}),t},l.prototype.getEdgesBetween=function(e){var t=[],n=this;return n.edges.forEach(function(r){if(r.source!=n&&r.target!=n)throw"Incorrect edge source and/or target";r.target!=e&&r.source!=e||t.push(r)}),t},l.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach(function(n){if(n.source==t)e.add(n.target);else{if(n.target!=t)throw"Incorrect incidency!";e.add(n.source)}}),e},l.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),n=0;n<t.length;n++)t[n].withChildren().forEach(function(t){e.add(t)});return e},l.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),n=0;n<t.length;n++)e+=t[n].getNoOfChildren();return 0==e&&(e=1),e},l.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},l.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},l.prototype.scatter=function(){var e,t,n=-o.INITIAL_WORLD_BOUNDARY,r=o.INITIAL_WORLD_BOUNDARY;e=o.WORLD_CENTER_X+s.nextDouble()*(r-n)+n;var i=-o.INITIAL_WORLD_BOUNDARY,a=o.INITIAL_WORLD_BOUNDARY;t=o.WORLD_CENTER_Y+s.nextDouble()*(a-i)+i,this.rect.x=e,this.rect.y=t},l.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),o.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),n=e.getBottom()-e.getTop();this.labelWidth>t&&(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)),this.labelHeight>n&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-n)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-n),this.setHeight(this.labelHeight))}}},l.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},l.prototype.transform=function(e){var t=this.rect.x;t>o.WORLD_BOUNDARY?t=o.WORLD_BOUNDARY:t<-o.WORLD_BOUNDARY&&(t=-o.WORLD_BOUNDARY);var n=this.rect.y;n>o.WORLD_BOUNDARY?n=o.WORLD_BOUNDARY:n<-o.WORLD_BOUNDARY&&(n=-o.WORLD_BOUNDARY);var r=new u(t,n),i=e.inverseTransformPoint(r);this.setLocation(i.x,i.y)},l.prototype.getLeft=function(){return this.rect.x},l.prototype.getRight=function(){return this.rect.x+this.rect.width},l.prototype.getTop=function(){return this.rect.y},l.prototype.getBottom=function(){return this.rect.y+this.rect.height},l.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=l},function(e,t,n){function r(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(e){this.x=e},r.prototype.setY=function(e){this.y=e},r.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=r},function(e,t,n){var r=n(2),i=n(10),a=n(0),o=n(6),s=n(3),u=n(1),l=n(13),c=n(12),f=n(11);function h(e,t,n){r.call(this,n),this.estimatedSize=i.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof o?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var d in h.prototype=Object.create(r.prototype),r)h[d]=r[d];h.prototype.getNodes=function(){return this.nodes},h.prototype.getEdges=function(){return this.edges},h.prototype.getGraphManager=function(){return this.graphManager},h.prototype.getParent=function(){return this.parent},h.prototype.getLeft=function(){return this.left},h.prototype.getRight=function(){return this.right},h.prototype.getTop=function(){return this.top},h.prototype.getBottom=function(){return this.bottom},h.prototype.isConnected=function(){return this.isConnected},h.prototype.add=function(e,t,n){if(null==t&&null==n){var r=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(t.owner!=n.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=n.owner?null:(i.source=t,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),t.edges.push(i),n!=t&&n.edges.push(i),i)},h.prototype.remove=function(e){var t=e;if(e instanceof s){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n=t.edges.slice(),r=n.length,i=0;i<r;i++)(a=n[i]).isInterGraph?this.graphManager.remove(a):a.source.owner.remove(a);if(-1==(o=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(o,1)}else if(e instanceof u){var a;if(null==(a=e))throw"Edge is null!";if(null==a.source||null==a.target)throw"Source and/or target is null!";if(null==a.source.owner||null==a.target.owner||a.source.owner!=this||a.target.owner!=this)throw"Source and/or target owner is invalid!";var o,l=a.source.edges.indexOf(a),c=a.target.edges.indexOf(a);if(!(l>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(a.source.edges.splice(l,1),a.target!=a.source&&a.target.edges.splice(c,1),-1==(o=a.source.owner.getEdges().indexOf(a)))throw"Not in owner's edge list!";a.source.owner.getEdges().splice(o,1)}},h.prototype.updateLeftTop=function(){for(var e,t,n,r=i.MAX_VALUE,a=i.MAX_VALUE,o=this.getNodes(),s=o.length,u=0;u<s;u++){var l=o[u];r>(e=l.getTop())&&(r=e),a>(t=l.getLeft())&&(a=t)}return r==i.MAX_VALUE?null:(n=null!=o[0].getParent().paddingLeft?o[0].getParent().paddingLeft:this.margin,this.left=a-n,this.top=r-n,new c(this.left,this.top))},h.prototype.updateBounds=function(e){for(var t,n,r,a,o,s=i.MAX_VALUE,u=-i.MAX_VALUE,c=i.MAX_VALUE,f=-i.MAX_VALUE,h=this.nodes,d=h.length,p=0;p<d;p++){var g=h[p];e&&null!=g.child&&g.updateBounds(),s>(t=g.getLeft())&&(s=t),u<(n=g.getRight())&&(u=n),c>(r=g.getTop())&&(c=r),f<(a=g.getBottom())&&(f=a)}var v=new l(s,c,u-s,f-c);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),o=null!=h[0].getParent().paddingLeft?h[0].getParent().paddingLeft:this.margin,this.left=v.x-o,this.right=v.x+v.width+o,this.top=v.y-o,this.bottom=v.y+v.height+o},h.calculateBounds=function(e){for(var t,n,r,a,o=i.MAX_VALUE,s=-i.MAX_VALUE,u=i.MAX_VALUE,c=-i.MAX_VALUE,f=e.length,h=0;h<f;h++){var d=e[h];o>(t=d.getLeft())&&(o=t),s<(n=d.getRight())&&(s=n),u>(r=d.getTop())&&(u=r),c<(a=d.getBottom())&&(c=a)}return new l(o,u,s-o,c-u)},h.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,n=t.length,r=0;r<n;r++){e+=t[r].calcEstimatedSize()}return this.estimatedSize=0==e?a.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},h.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,n,r=new f,i=new Set,a=this.nodes[0];for(a.withChildren().forEach(function(e){r.push(e),i.add(e)});0!==r.length;)for(var o=(t=(a=r.shift()).getEdges()).length,s=0;s<o;s++){if(null!=(n=t[s].getOtherEndInGraph(a,this))&&!i.has(n))n.withChildren().forEach(function(e){r.push(e),i.add(e)})}if(this.isConnected=!1,i.size>=this.nodes.length){var u=0;i.forEach(function(t){t.owner==e&&u++}),u==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=h},function(e,t,n){var r,i=n(1);function a(e){r=n(5),this.layout=e,this.graphs=[],this.edges=[]}a.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),n=this.add(e,t);return this.setRootGraph(n),this.rootGraph},a.prototype.add=function(e,t,n,r,i){if(null==n&&null==r&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=n,n=e;var a=(r=t).getOwner(),o=i.getOwner();if(null==a||a.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==o||o.getGraphManager()!=this)throw"Target not in this graph mgr!";if(a==o)return n.isInterGraph=!1,a.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(-1!=n.source.edges.indexOf(n)||-1!=n.target.edges.indexOf(n))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},a.prototype.remove=function(e){if(e instanceof r){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var n,a=[],o=(a=a.concat(t.getEdges())).length,s=0;s<o;s++)n=a[s],t.remove(n);var u,l=[];o=(l=l.concat(t.getNodes())).length;for(s=0;s<o;s++)u=l[s],t.remove(u);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof i){if(null==(n=e))throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(-1==n.source.edges.indexOf(n)||-1==n.target.edges.indexOf(n))throw"Source and/or target doesn't know this edge!";c=n.source.edges.indexOf(n);if(n.source.edges.splice(c,1),c=n.target.edges.indexOf(n),n.target.edges.splice(c,1),null==n.source.owner||null==n.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==n.source.owner.getGraphManager().edges.indexOf(n))throw"Not in owner graph manager's edge list!";c=n.source.owner.getGraphManager().edges.indexOf(n);n.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),n=t.length,r=0;r<n;r++)e=e.concat(t[r].getNodes());this.allNodes=e}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),n=(t.length,0);n<t.length;n++)e=e.concat(t[n].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var n,r=e.getOwner();;){if(null==(n=r.getParent()))break;if(n==t)return!0;if(null==(r=n.getOwner()))break}for(r=t.getOwner();;){if(null==(n=r.getParent()))break;if(n==e)return!0;if(null==(r=n.getOwner()))break}return!1},a.prototype.calcLowestCommonAncestors=function(){for(var e,t,n,r,i,a=this.getAllEdges(),o=a.length,s=0;s<o;s++)if(t=(e=a[s]).source,n=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=n,t!=n){for(r=t.getOwner();null==e.lca;){for(e.targetInLca=n,i=n.getOwner();null==e.lca;){if(i==r){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(r==this.rootGraph)break;null==e.lca&&(e.sourceInLca=r.getParent(),r=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},a.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var n=e.getOwner();;){if(null==n)break;for(var r=t.getOwner();;){if(null==r)break;if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},a.prototype.calcInclusionTreeDepths=function(e,t){var n;null==e&&null==t&&(e=this.rootGraph,t=1);for(var r=e.getNodes(),i=r.length,a=0;a<i;a++)(n=r[a]).inclusionTreeDepth=t,null!=n.child&&this.calcInclusionTreeDepths(n.child,t+1)},a.prototype.includesInvalidEdge=function(){for(var e,t=this.edges.length,n=0;n<t;n++)if(e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},e.exports=a},function(e,t,n){var r=n(0);function i(){}for(var a in r)i[a]=r[a];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,n){var r=n(12);function i(){}i.calcSeparationAmount=function(e,t,n,r){if(!e.intersects(t))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,i),n[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),n[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var a=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(a=1);var o=a*n[0],s=n[1]/a;n[0]<s?s=n[0]:o=n[1],n[0]=-1*i[0]*(s/2+r),n[1]=-1*i[1]*(o/2+r)},i.decideDirectionsForOverlappingNodes=function(e,t,n){e.getCenterX()<t.getCenterX()?n[0]=-1:n[0]=1,e.getCenterY()<t.getCenterY()?n[1]=-1:n[1]=1},i.getIntersection2=function(e,t,n){var r=e.getCenterX(),i=e.getCenterY(),a=t.getCenterX(),o=t.getCenterY();if(e.intersects(t))return n[0]=r,n[1]=i,n[2]=a,n[3]=o,!0;var s=e.getX(),u=e.getY(),l=e.getRight(),c=e.getX(),f=e.getBottom(),h=e.getRight(),d=e.getWidthHalf(),p=e.getHeightHalf(),g=t.getX(),v=t.getY(),m=t.getRight(),y=t.getX(),b=t.getBottom(),x=t.getRight(),w=t.getWidthHalf(),E=t.getHeightHalf(),T=!1,_=!1;if(r===a){if(i>o)return n[0]=r,n[1]=u,n[2]=a,n[3]=b,!1;if(i<o)return n[0]=r,n[1]=f,n[2]=a,n[3]=v,!1}else if(i===o){if(r>a)return n[0]=s,n[1]=i,n[2]=m,n[3]=o,!1;if(r<a)return n[0]=l,n[1]=i,n[2]=g,n[3]=o,!1}else{var C=e.height/e.width,D=t.height/t.width,S=(o-i)/(a-r),A=void 0,k=void 0,R=void 0,O=void 0,M=void 0,L=void 0;if(-C===S?r>a?(n[0]=c,n[1]=f,T=!0):(n[0]=l,n[1]=u,T=!0):C===S&&(r>a?(n[0]=s,n[1]=u,T=!0):(n[0]=h,n[1]=f,T=!0)),-D===S?a>r?(n[2]=y,n[3]=b,_=!0):(n[2]=m,n[3]=v,_=!0):D===S&&(a>r?(n[2]=g,n[3]=v,_=!0):(n[2]=x,n[3]=b,_=!0)),T&&_)return!1;if(r>a?i>o?(A=this.getCardinalDirection(C,S,4),k=this.getCardinalDirection(D,S,2)):(A=this.getCardinalDirection(-C,S,3),k=this.getCardinalDirection(-D,S,1)):i>o?(A=this.getCardinalDirection(-C,S,1),k=this.getCardinalDirection(-D,S,3)):(A=this.getCardinalDirection(C,S,2),k=this.getCardinalDirection(D,S,4)),!T)switch(A){case 1:O=u,R=r+-p/S,n[0]=R,n[1]=O;break;case 2:R=h,O=i+d*S,n[0]=R,n[1]=O;break;case 3:O=f,R=r+p/S,n[0]=R,n[1]=O;break;case 4:R=c,O=i+-d*S,n[0]=R,n[1]=O}if(!_)switch(k){case 1:L=v,M=a+-E/S,n[2]=M,n[3]=L;break;case 2:M=x,L=o+w*S,n[2]=M,n[3]=L;break;case 3:L=b,M=a+E/S,n[2]=M,n[3]=L;break;case 4:M=y,L=o+-w*S,n[2]=M,n[3]=L}}return!1},i.getCardinalDirection=function(e,t,n){return e>t?n:1+n%4},i.getIntersection=function(e,t,n,i){if(null==i)return this.getIntersection2(e,t,n);var a,o,s,u,l,c,f,h=e.x,d=e.y,p=t.x,g=t.y,v=n.x,m=n.y,y=i.x,b=i.y;return 0===(f=(a=g-d)*(u=v-y)-(o=b-m)*(s=h-p))?null:new r((s*(c=y*m-v*b)-u*(l=p*d-h*g))/f,(o*l-a*c)/f)},i.angleOfVector=function(e,t,n,r){var i=void 0;return e!==n?(i=Math.atan((r-t)/(n-e)),n<e?i+=Math.PI:r<t&&(i+=this.TWO_PI)):i=r<t?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(e,t,n,r){var i=e.x,a=e.y,o=t.x,s=t.y,u=n.x,l=n.y,c=r.x,f=r.y,h=(o-i)*(f-l)-(c-u)*(s-a);if(0===h)return!1;var d=((f-l)*(c-i)+(u-c)*(f-a))/h,p=((a-s)*(c-i)+(o-i)*(f-a))/h;return 0<d&&d<1&&0<p&&p<1},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},function(e,t,n){function r(){}r.sign=function(e){return e>0?1:e<0?-1:0},r.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},r.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=r},function(e,t,n){function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,e.exports=r},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){return{value:e,next:null,prev:null}},a=function(e,t,n,r){return null!==e?e.next=t:r.head=t,null!==n?n.prev=t:r.tail=t,t.prev=e,t.next=n,r.length++,t},o=function(e,t){var n=e.prev,r=e.next;return null!==n?n.next=r:t.head=r,null!==r?r.prev=n:t.tail=n,e.prev=e.next=null,t.length--,e},s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=0,this.head=null,this.tail=null,null!=t&&t.forEach(function(e){return n.push(e)})}return r(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return a(t.prev,i(e),t,this)}},{key:"insertAfter",value:function(e,t){return a(t,i(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return a(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return a(t,e,t.next,this)}},{key:"push",value:function(e){return a(this.tail,i(e),null,this)}},{key:"unshift",value:function(e){return a(null,i(e),this.head,this)}},{key:"remove",value:function(e){return o(e,this)}},{key:"pop",value:function(){return o(this.tail,this).value}},{key:"popNode",value:function(){return o(this.tail,this)}},{key:"shift",value:function(){return o(this.head,this).value}},{key:"shiftNode",value:function(){return o(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,n=this.head;t<e;)n=n.next,t++;return n.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var n=1,r=this.head;n<e;)r=r.next,n++;r.value=t}}}]),e}();e.exports=s},function(e,t,n){function r(e,t,n){this.x=null,this.y=null,null==e&&null==t&&null==n?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==n?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==n&&(n=e,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(e,t,n){"Point"==e.constructor.name&&null==t&&null==n?(n=e,this.setLocation(n.x,n.y)):"number"==typeof e&&"number"==typeof t&&null==n&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},r.prototype.move=function(e,t){this.x=e,this.y=t},r.prototype.translate=function(e,t){this.x+=e,this.y+=t},r.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},r.prototype.toString=function(){return(new r).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=r},function(e,t,n){function r(e,t,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=n&&null!=r&&(this.x=e,this.y=t,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(e){this.x=e},r.prototype.getY=function(){return this.y},r.prototype.setY=function(e){this.y=e},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(e){return!(this.getRight()<e.x)&&(!(this.getBottom()<e.y)&&(!(e.getRight()<this.x)&&!(e.getBottom()<this.y)))},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},e.exports=r},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}i.lastID=0,i.createID=function(e){return i.isPrimitive(e)?e:null!=e.uniqueID?e.uniqueID:(e.uniqueID=i.getString(),i.lastID++,e.uniqueID)},i.getString=function(e){return null==e&&(e=i.lastID),"Object#"+e},i.isPrimitive=function(e){var t=void 0===e?"undefined":r(e);return null==e||"object"!=t&&"function"!=t},e.exports=i},function(e,t,n){function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(0),a=n(6),o=n(3),s=n(1),u=n(5),l=n(4),c=n(17),f=n(27);function h(e){f.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}h.RANDOM_SEED=1,h.prototype=Object.create(f.prototype),h.prototype.getGraphManager=function(){return this.graphManager},h.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},h.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},h.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},h.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},h.prototype.newGraph=function(e){return new u(null,this.graphManager,e)},h.prototype.newNode=function(e){return new o(this.graphManager,e)},h.prototype.newEdge=function(e){return new s(null,null,e)},h.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},h.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},h.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},h.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var n=this.graphManager.getRoot().getNodes();for(t=0;t<n.length;t++)n[t];this.update(this.graphManager.getRoot())}},h.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof o){var t=e;if(null!=t.getChild())for(var n=t.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);if(null!=t.vGraphObject)t.vGraphObject.update(t)}else if(e instanceof s){var i=e;if(null!=i.vGraphObject)i.vGraphObject.update(i)}else if(e instanceof u){var a=e;if(null!=a.vGraphObject)a.vGraphObject.update(a)}},h.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},h.prototype.transform=function(e){if(null==e)this.transform(new l(0,0));else{var t=new c,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(n.x),t.setDeviceOrgY(n.y);for(var r=this.getAllNodes(),i=0;i<r.length;i++)r[i].transform(t)}}},h.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,n,r=e.getNodes(),i=0;i<r.length;i++)null==(n=(t=r[i]).getChild())?t.scatter():0==n.getNodes().length?t.scatter():(this.positionNodesRandomly(n),t.updateBounds())},h.prototype.getFlatForest=function(){for(var e=[],t=!0,n=this.graphManager.getRoot().getNodes(),i=!0,a=0;a<n.length;a++)null!=n[a].getChild()&&(i=!1);if(!i)return e;var o=new Set,s=[],u=new Map,l=[];for(l=l.concat(n);l.length>0&&t;){for(s.push(l[0]);s.length>0&&t;){var c=s[0];s.splice(0,1),o.add(c);var f=c.getEdges();for(a=0;a<f.length;a++){var h=f[a].getOtherEnd(c);if(u.get(c)!=h){if(o.has(h)){t=!1;break}s.push(h),u.set(h,c)}}}if(t){var d=[].concat(r(o));e.push(d);for(a=0;a<d.length;a++){var p=d[a],g=l.indexOf(p);g>-1&&l.splice(g,1)}o=new Set,u=new Map}else e=[]}return e},h.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],n=e.source,r=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var a=this.newNode(null);a.setRect(new Point(0,0),new Dimension(1,1)),r.add(a);var o=this.newEdge(null);this.graphManager.add(o,n,a),t.add(a),n=a}o=this.newEdge(null);return this.graphManager.add(o,n,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):r.remove(e),t},h.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(r(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),a=0;a<i.length;a++){var o=i[a],s=new l(o.getCenterX(),o.getCenterY()),u=n.bendpoints.get(a);u.x=s.x,u.y=s.y,o.getOwner().remove(o)}this.graphManager.add(n,n.source,n.target)}}},h.transform=function(e,t,n,r){if(null!=n&&null!=r){var i=t;if(e<=50)i-=(t-t/n)/50*(50-e);else i+=(t*r-t)/50*(e-50);return i}var a,o;return e<=50?(a=9*t/500,o=t/10):(a=9*t/50,o=-8*t),a*e+o},h.findCenterOfTree=function(e){var t=[];t=t.concat(e);var n=[],r=new Map,i=!1,a=null;1!=t.length&&2!=t.length||(i=!0,a=t[0]);for(var o=0;o<t.length;o++){var s=(c=t[o]).getNeighborsList().size;r.set(c,c.getNeighborsList().size),1==s&&n.push(c)}var u=[];for(u=u.concat(n);!i;){var l=[];l=l.concat(u),u=[];for(o=0;o<t.length;o++){var c=t[o],f=t.indexOf(c);f>=0&&t.splice(f,1),c.getNeighborsList().forEach(function(e){if(n.indexOf(e)<0){var t=r.get(e)-1;1==t&&u.push(e),r.set(e,t)}})}n=n.concat(u),1!=t.length&&2!=t.length||(i=!0,a=t[0])}return a},h.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=h},function(e,t,n){function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},e.exports=r},function(e,t,n){var r=n(4);function i(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(e){this.lworldExtX=e},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(e){this.lworldExtY=e},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},i.prototype.transformX=function(e){var t=0,n=this.lworldExtX;return 0!=n&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/n),t},i.prototype.transformY=function(e){var t=0,n=this.lworldExtY;return 0!=n&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/n),t},i.prototype.inverseTransformX=function(e){var t=0,n=this.ldeviceExtX;return 0!=n&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/n),t},i.prototype.inverseTransformY=function(e){var t=0,n=this.ldeviceExtY;return 0!=n&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/n),t},i.prototype.inverseTransformPoint=function(e){return new r(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=i},function(e,t,n){var r=n(15),i=n(7),a=n(0),o=n(8),s=n(9);function u(){r.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=i.DEFAULT_EDGE_LENGTH,this.springConstant=i.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=i.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}for(var l in u.prototype=Object.create(r.prototype),r)u[l]=r[l];u.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},u.prototype.calcIdealEdgeLengths=function(){for(var e,t,n,r,o,s,u=this.getGraphManager().getAllEdges(),l=0;l<u.length;l++)(e=u[l]).idealLength=this.idealEdgeLength,e.isInterGraph&&(n=e.getSource(),r=e.getTarget(),o=e.getSourceInLca().getEstimatedSize(),s=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=o+s-2*a.SIMPLE_NODE_SIZE),t=e.getLca().getInclusionTreeDepth(),e.idealLength+=i.DEFAULT_EDGE_LENGTH*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*t))},u.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},u.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),n=0;n<t.length;n++)e=t[n],this.calcSpringForce(e,e.idealLength)},u.prototype.calcRepulsionForces=function(){var e,t,n,r,a,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),a=new Set,e=0;e<u.length;e++)n=u[e],this.calculateRepulsionForceOfANode(n,a,o,s),a.add(n);else for(e=0;e<u.length;e++)for(n=u[e],t=e+1;t<u.length;t++)r=u[t],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},u.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),n=0;n<t.length;n++)e=t[n],this.calcGravitationalForce(e)},u.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},u.prototype.calcSpringForce=function(e,t){var n,r,i,a,o=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==o.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;n=e.getLength(),i=(r=this.springConstant*(n-t))*(e.lengthX/n),a=r*(e.lengthY/n),o.springForceX+=i,o.springForceY+=a,s.springForceX-=i,s.springForceY-=a},u.prototype.calcRepulsionForce=function(e,t){var n,r,a,u,l,c,f,h=e.getRect(),d=t.getRect(),p=new Array(2),g=new Array(4);if(h.intersects(d)){o.calcSeparationAmount(h,d,p,i.DEFAULT_EDGE_LENGTH/2),c=2*p[0],f=2*p[1];var v=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=v*c,e.repulsionForceY-=v*f,t.repulsionForceX+=v*c,t.repulsionForceY+=v*f}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(n=d.getCenterX()-h.getCenterX(),r=d.getCenterY()-h.getCenterY()):(o.getIntersection(h,d,g),n=g[2]-g[0],r=g[3]-g[1]),Math.abs(n)<i.MIN_REPULSION_DIST&&(n=s.sign(n)*i.MIN_REPULSION_DIST),Math.abs(r)<i.MIN_REPULSION_DIST&&(r=s.sign(r)*i.MIN_REPULSION_DIST),a=n*n+r*r,u=Math.sqrt(a),c=(l=this.repulsionConstant*e.noOfChildren*t.noOfChildren/a)*n/u,f=l*r/u,e.repulsionForceX-=c,e.repulsionForceY-=f,t.repulsionForceX+=c,t.repulsionForceY+=f},u.prototype.calcGravitationalForce=function(e){var t,n,r,i,a,o,s,u;n=((t=e.getOwner()).getRight()+t.getLeft())/2,r=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-n,a=e.getCenterY()-r,o=Math.abs(i)+e.getWidth()/2,s=Math.abs(a)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(o>(u=t.getEstimatedSize()*this.gravityRangeFactor)||s>u)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*a):(o>(u=t.getEstimatedSize()*this.compoundGravityRangeFactor)||s>u)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*a*this.compoundGravityConstant)},u.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},u.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},u.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),n=0;n<t.length;n++)(e=t[n]).noOfChildren=e.getNoOfChildren()},u.prototype.calcGrid=function(e){var t,n;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),n=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var r=new Array(t),i=0;i<t;i++)r[i]=new Array(n);for(i=0;i<t;i++)for(var a=0;a<n;a++)r[i][a]=new Array;return r},u.prototype.addNodeToGrid=function(e,t,n){var r,i,a,o;r=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().y-n)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().height+e.getRect().y-n)/this.repulsionRange));for(var s=r;s<=i;s++)for(var u=a;u<=o;u++)this.grid[s][u].push(e),e.setGridCoordinates(r,i,a,o)},u.prototype.updateGrid=function(){var e,t,n=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<n.length;e++)t=n[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},u.prototype.calculateRepulsionForceOfANode=function(e,t,n,r){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&n||r){var a,o=new Set;e.surrounding=new Array;for(var s=this.grid,u=e.startX-1;u<e.finishX+2;u++)for(var l=e.startY-1;l<e.finishY+2;l++)if(!(u<0||l<0||u>=s.length||l>=s[0].length))for(var c=0;c<s[u][l].length;c++)if(a=s[u][l][c],e.getOwner()==a.getOwner()&&e!=a&&!t.has(a)&&!o.has(a)){var f=Math.abs(e.getCenterX()-a.getCenterX())-(e.getWidth()/2+a.getWidth()/2),h=Math.abs(e.getCenterY()-a.getCenterY())-(e.getHeight()/2+a.getHeight()/2);f<=this.repulsionRange&&h<=this.repulsionRange&&o.add(a)}e.surrounding=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o))}for(u=0;u<e.surrounding.length;u++)this.calcRepulsionForce(e,e.surrounding[u])},u.prototype.calcRepulsionRange=function(){return 0},e.exports=u},function(e,t,n){var r=n(1),i=n(7);function a(e,t,n){r.call(this,e,t,n),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(var o in a.prototype=Object.create(r.prototype),r)a[o]=r[o];e.exports=a},function(e,t,n){var r=n(3);function i(e,t,n,i){r.call(this,e,t,n,i),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];i.prototype.setGridCoordinates=function(e,t,n,r){this.startX=e,this.finishX=t,this.startY=n,this.finishY=r},e.exports=i},function(e,t,n){function r(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(e){this.width=e},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(e){this.height=e},e.exports=r},function(e,t,n){var r=n(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(e,t){var n=r.createID(e);this.contains(n)||(this.map[n]=t,this.keys.push(e))},i.prototype.contains=function(e){r.createID(e);return null!=this.map[e]},i.prototype.get=function(e){var t=r.createID(e);return this.map[t]},i.prototype.keySet=function(){return this.keys},e.exports=i},function(e,t,n){var r=n(14);function i(){this.set={}}i.prototype.add=function(e){var t=r.createID(e);this.contains(t)||(this.set[t]=e)},i.prototype.remove=function(e){delete this.set[r.createID(e)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(e){return this.set[r.createID(e)]==e},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),n=t.length,r=0;r<n;r++)e.push(this.set[t[r]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(e){for(var t=e.length,n=0;n<t;n++){var r=e[n];this.add(r)}},e.exports=i},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(11),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null===n&&void 0===n||(this.compareFunction=this._defaultCompareFunction);var r=void 0;r=t instanceof i?t.size():t.length,this._quicksort(t,0,r-1)}return r(e,[{key:"_quicksort",value:function(e,t,n){if(t<n){var r=this._partition(e,t,n);this._quicksort(e,t,r),this._quicksort(e,r+1,n)}}},{key:"_partition",value:function(e,t,n){for(var r=this._get(e,t),i=t,a=n;;){for(;this.compareFunction(r,this._get(e,a));)a--;for(;this.compareFunction(this._get(e,i),r);)i++;if(!(i<a))return a;this._swap(e,i,a),i++,a--}}},{key:"_get",value:function(e,t){return e instanceof i?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,n){e instanceof i?e.set_object_at(t,n):e[t]=n}},{key:"_swap",value:function(e,t,n){var r=this._get(e,t);this._set(e,t,this._get(e,n)),this._set(e,n,r)}},{key:"_defaultCompareFunction",value:function(e,t){return t>e}}]),e}();e.exports=a},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sequence1=t,this.sequence2=n,this.match_score=r,this.mismatch_penalty=i,this.gap_penalty=a,this.iMax=t.length+1,this.jMax=n.length+1,this.grid=new Array(this.iMax);for(var o=0;o<this.iMax;o++){this.grid[o]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.grid[o][s]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.tracebackGrid[u][l]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return r(e,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var r=1;r<this.jMax;r++){var i=[this.sequence1[n-1]===this.sequence2[r-1]?this.grid[n-1][r-1]+this.match_score:this.grid[n-1][r-1]+this.mismatch_penalty,this.grid[n-1][r]+this.gap_penalty,this.grid[n][r-1]+this.gap_penalty],a=this.arrayAllMaxIndexes(i);this.grid[n][r]=i[a[0]],this.tracebackGrid[n][r]=[a.includes(0),a.includes(1),a.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],n=this.tracebackGrid[t.pos[0]][t.pos[1]];n[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),n[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),n[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var n=[],r=-1;-1!==(r=e.indexOf(t,r+1));)n.push(r);return n}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),e}();e.exports=i},function(e,t,n){var r=function(){};r.FDLayout=n(18),r.FDLayoutConstants=n(7),r.FDLayoutEdge=n(19),r.FDLayoutNode=n(20),r.DimensionD=n(21),r.HashMap=n(22),r.HashSet=n(23),r.IGeometry=n(8),r.IMath=n(9),r.Integer=n(10),r.Point=n(12),r.PointD=n(4),r.RandomSeed=n(16),r.RectangleD=n(13),r.Transform=n(17),r.UniqueIDGeneretor=n(14),r.Quicksort=n(24),r.LinkedList=n(11),r.LGraphObject=n(2),r.LGraph=n(5),r.LEdge=n(1),r.LGraphManager=n(6),r.LNode=n(3),r.Layout=n(15),r.LayoutConstants=n(0),r.NeedlemanWunsch=n(25),e.exports=r},function(e,t,n){function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===e&&r.callback===t&&this.listeners.splice(n,1)}},i.emit=function(e,t){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];e===r.event&&r.callback(t)}},e.exports=r}])},e.exports=n()});unwrapExports(layoutBase);var coseBase=createCommonjsModule(function(e,t){var n;n=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(t,n){t.exports=e},function(e,t,n){var r=n(0).FDLayoutConstants;function i(){}for(var a in r)i[a]=r[a];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=r.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,e.exports=i},function(e,t,n){var r=n(0).FDLayoutEdge;function i(e,t,n){r.call(this,e,t,n)}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];e.exports=i},function(e,t,n){var r=n(0).LGraph;function i(e,t,n){r.call(this,e,t,n)}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];e.exports=i},function(e,t,n){var r=n(0).LGraphManager;function i(e){r.call(this,e)}for(var a in i.prototype=Object.create(r.prototype),r)i[a]=r[a];e.exports=i},function(e,t,n){var r=n(0).FDLayoutNode,i=n(0).IMath;function a(e,t,n,i){r.call(this,e,t,n,i)}for(var o in a.prototype=Object.create(r.prototype),r)a[o]=r[o];a.prototype.move=function(){var e=this.graphManager.getLayout();this.displacementX=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.propogateDisplacementToChildren=function(e,t){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)null==(n=r[i]).getChild()?(n.moveBy(e,t),n.displacementX+=e,n.displacementY+=t):n.propogateDisplacementToChildren(e,t)},a.prototype.setPred1=function(e){this.pred1=e},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(e){this.next=e},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(e){this.processed=e},a.prototype.isProcessed=function(){return processed},e.exports=a},function(e,t,n){var r=n(0).FDLayout,i=n(4),a=n(3),o=n(5),s=n(2),u=n(1),l=n(0).FDLayoutConstants,c=n(0).LayoutConstants,f=n(0).Point,h=n(0).PointD,d=n(0).Layout,p=n(0).Integer,g=n(0).IGeometry,v=n(0).LGraph,m=n(0).Transform;function y(){r.call(this),this.toBeTiled={}}for(var b in y.prototype=Object.create(r.prototype),r)y[b]=r[b];y.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e,e},y.prototype.newGraph=function(e){return new a(null,this.graphManager,e)},y.prototype.newNode=function(e){return new o(this.graphManager,e)},y.prototype.newEdge=function(e){return new s(null,null,e)},y.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.isSubLayout||(u.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=l.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=l.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/l.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=l.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},y.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},y.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},y.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%l.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,r=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,r),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},y.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},n=0;n<e.length;n++){var r=e[n].rect,i=e[n].id;t[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return t},y.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===l.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},y.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,n=[],r=this.graphManager.getGraphs(),i=r.length;for(t=0;t<i;t++)(e=r[t]).updateConnected(),e.isConnected||(n=n.concat(e.getNodes()));return n},y.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,n=new Set;for(t=0;t<e.length;t++){var r=e[t];if(!n.has(r)){var i=r.getSource(),a=r.getTarget();if(i==a)r.getBendpoints().push(new h),r.getBendpoints().push(new h),this.createDummyNodesForBendpoints(r),n.add(r);else{var o=[];if(o=(o=o.concat(i.getEdgeListToNode(a))).concat(a.getEdgeListToNode(i)),!n.has(o[0])){var s;if(o.length>1)for(s=0;s<o.length;s++){var u=o[s];u.getBendpoints().push(new h),this.createDummyNodesForBendpoints(u)}o.forEach(function(e){n.add(e)})}}}if(n.size==e.length)break}},y.prototype.positionNodesRadially=function(e){for(var t=new f(0,0),n=Math.ceil(Math.sqrt(e.length)),r=0,i=0,a=0,o=new h(0,0),s=0;s<e.length;s++){s%n==0&&(a=0,i=r,0!=s&&(i+=u.DEFAULT_COMPONENT_SEPERATION),r=0);var l=e[s],p=d.findCenterOfTree(l);t.x=a,t.y=i,(o=y.radialLayout(l,p,t)).y>r&&(r=Math.floor(o.y)),a=Math.floor(o.x+u.DEFAULT_COMPONENT_SEPERATION)}this.transform(new h(c.WORLD_CENTER_X-o.x/2,c.WORLD_CENTER_Y-o.y/2))},y.radialLayout=function(e,t,n){var r=Math.max(this.maxDiagonalInTree(e),u.DEFAULT_RADIAL_SEPARATION);y.branchRadialLayout(t,null,0,359,0,r);var i=v.calculateBounds(e),a=new m;a.setDeviceOrgX(i.getMinX()),a.setDeviceOrgY(i.getMinY()),a.setWorldOrgX(n.x),a.setWorldOrgY(n.y);for(var o=0;o<e.length;o++){e[o].transform(a)}var s=new h(i.getMaxX(),i.getMaxY());return a.inverseTransformPoint(s)},y.branchRadialLayout=function(e,t,n,r,i,a){var o=(r-n+1)/2;o<0&&(o+=180);var s=(o+n)%360*g.TWO_PI/360,u=i*Math.cos(s),l=i*Math.sin(s);e.setCenter(u,l);var c=[],f=(c=c.concat(e.getEdges())).length;null!=t&&f--;for(var h,d=0,p=c.length,v=e.getEdgesBetween(t);v.length>1;){var m=v[0];v.splice(0,1);var b=c.indexOf(m);b>=0&&c.splice(b,1),p--,f--}h=null!=t?(c.indexOf(v[0])+1)%p:0;for(var x=Math.abs(r-n)/f,w=h;d!=f;w=++w%p){var E=c[w].getOtherEnd(e);if(E!=t){var T=(n+d*x)%360,_=(T+x)%360;y.branchRadialLayout(E,e,T,_,i+a,a),d++}}},y.maxDiagonalInTree=function(e){for(var t=p.MIN_VALUE,n=0;n<e.length;n++){var r=e[n].getDiagonal();r>t&&(t=r)}return t},y.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},y.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var n=[],r=this.graphManager.getAllNodes(),i=0;i<r.length;i++){var a=(s=r[i]).getParent();0!==this.getNodeDegreeWithChildren(s)||null!=a.id&&this.getToBeTiled(a)||n.push(s)}for(i=0;i<n.length;i++){var s,u=(s=n[i]).getParent().id;void 0===t[u]&&(t[u]=[]),t[u]=t[u].concat(s)}Object.keys(t).forEach(function(n){if(t[n].length>1){var r="DummyCompound_"+n;e.memberGroups[r]=t[n];var i=t[n][0].getParent(),a=new o(e.graphManager);a.id=r,a.paddingLeft=i.paddingLeft||0,a.paddingRight=i.paddingRight||0,a.paddingBottom=i.paddingBottom||0,a.paddingTop=i.paddingTop||0,e.idToDummyNode[r]=a;var s=e.getGraphManager().add(e.newGraph(),a),u=i.getChild();u.add(a);for(var l=0;l<t[n].length;l++){var c=t[n][l];u.remove(c),s.add(c)}}})},y.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)t[this.compoundOrder[n].id]=this.compoundOrder[n],e[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},y.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var r=e.idToDummyNode[n];t[n]=e.tileNodes(e.memberGroups[n],r.paddingLeft+r.paddingRight),r.rect.width=t[n].width,r.rect.height=t[n].height})},y.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],n=t.id,r=t.paddingLeft,i=t.paddingTop;this.adjustLocations(this.tiledMemberPack[n],t.rect.x,t.rect.y,r,i)}},y.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach(function(n){var r=e.idToDummyNode[n],i=r.paddingLeft,a=r.paddingTop;e.adjustLocations(t[n],r.rect.x,r.rect.y,i,a)})},y.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var n=e.getChild();if(null==n)return this.toBeTiled[t]=!1,!1;for(var r=n.getNodes(),i=0;i<r.length;i++){var a=r[i];if(this.getNodeDegree(a)>0)return this.toBeTiled[t]=!1,!1;if(null!=a.getChild()){if(!this.getToBeTiled(a))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[a.id]=!1}return this.toBeTiled[t]=!0,!0},y.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),n=0,r=0;r<t.length;r++){var i=t[r];i.getSource().id!==i.getTarget().id&&(n+=1)}return n},y.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var n=e.getChild().getNodes(),r=0;r<n.length;r++){var i=n[r];t+=this.getNodeDegreeWithChildren(i)}return t},y.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},y.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var n=e[t];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},y.prototype.adjustLocations=function(e,t,n,r,i){n+=i;for(var a=t+=r,o=0;o<e.rows.length;o++){var s=e.rows[o];t=a;for(var u=0,l=0;l<s.length;l++){var c=s[l];c.rect.x=t,c.rect.y=n,t+=c.rect.width+e.horizontalPadding,c.rect.height>u&&(u=c.rect.height)}n+=u+e.verticalPadding}},y.prototype.tileCompoundMembers=function(e,t){var n=this;this.tiledMemberPack=[],Object.keys(e).forEach(function(r){var i=t[r];n.tiledMemberPack[r]=n.tileNodes(e[r],i.paddingLeft+i.paddingRight),i.rect.width=n.tiledMemberPack[r].width+20,i.rect.height=n.tiledMemberPack[r].height+20})},y.prototype.tileNodes=function(e,t){var n={rows:[],rowWidth:[],rowHeight:[],width:20,height:20,verticalPadding:u.TILING_PADDING_VERTICAL,horizontalPadding:u.TILING_PADDING_HORIZONTAL};e.sort(function(e,t){return e.rect.width*e.rect.height>t.rect.width*t.rect.height?-1:e.rect.width*e.rect.height<t.rect.width*t.rect.height?1:0});for(var r=0;r<e.length;r++){var i=e[r];0==n.rows.length?this.insertNodeToRow(n,i,0,t):this.canAddHorizontal(n,i.rect.width,i.rect.height)?this.insertNodeToRow(n,i,this.getShortestRowIndex(n),t):this.insertNodeToRow(n,i,n.rows.length,t),this.shiftToLastRow(n)}return n},y.prototype.insertNodeToRow=function(e,t,n,r){var i=r;if(n==e.rows.length){e.rows.push([]),e.rowWidth.push(i),e.rowHeight.push(0)}var a=e.rowWidth[n]+t.rect.width;e.rows[n].length>0&&(a+=e.horizontalPadding),e.rowWidth[n]=a,e.width<a&&(e.width=a);var o=t.rect.height;n>0&&(o+=e.verticalPadding);var s=0;o>e.rowHeight[n]&&(s=e.rowHeight[n],e.rowHeight[n]=o,s=e.rowHeight[n]-s),e.height+=s,e.rows[n].push(t)},y.prototype.getShortestRowIndex=function(e){for(var t=-1,n=Number.MAX_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]<n&&(t=r,n=e.rowWidth[r]);return t},y.prototype.getLongestRowIndex=function(e){for(var t=-1,n=Number.MIN_VALUE,r=0;r<e.rows.length;r++)e.rowWidth[r]>n&&(t=r,n=e.rowWidth[r]);return t},y.prototype.canAddHorizontal=function(e,t,n){var r=this.getShortestRowIndex(e);if(r<0)return!0;var i=e.rowWidth[r];if(i+e.horizontalPadding+t<=e.width)return!0;var a,o,s=0;return e.rowHeight[r]<n&&r>0&&(s=n+e.verticalPadding-e.rowHeight[r]),a=e.width-i>=t+e.horizontalPadding?(e.height+s)/(i+t+e.horizontalPadding):(e.height+s)/e.width,s=n+e.verticalPadding,(o=e.width<t?(e.height+s)/t:(e.height+s)/e.width)<1&&(o=1/o),a<1&&(a=1/a),a<o},y.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),n=e.rowWidth.length-1,r=e.rows[t],i=r[r.length-1],a=i.width+e.horizontalPadding;if(e.width-e.rowWidth[n]>a&&t!=n){r.splice(-1,1),e.rows[n].push(i),e.rowWidth[t]=e.rowWidth[t]-a,e.rowWidth[n]=e.rowWidth[n]+a,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var o=Number.MIN_VALUE,s=0;s<r.length;s++)r[s].height>o&&(o=r[s].height);t>0&&(o+=e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[n];e.rowHeight[t]=o,e.rowHeight[n]<i.height+e.verticalPadding&&(e.rowHeight[n]=i.height+e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[n];e.height+=l-u,this.shiftToLastRow(e)}},y.prototype.tilingPreLayout=function(){u.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},y.prototype.tilingPostLayout=function(){u.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},y.prototype.reduceTrees=function(){for(var e,t=[],n=!0;n;){var r=this.graphManager.getAllNodes(),i=[];n=!1;for(var a=0;a<r.length;a++)1!=(e=r[a]).getEdges().length||e.getEdges()[0].isInterGraph||null!=e.getChild()||(i.push([e,e.getEdges()[0],e.getOwner()]),n=!0);if(1==n){for(var o=[],s=0;s<i.length;s++)1==i[s][0].getEdges().length&&(o.push(i[s]),i[s][0].getOwner().remove(i[s][0]));t.push(o),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},y.prototype.growTree=function(e){for(var t,n=e[e.length-1],r=0;r<n.length;r++)t=n[r],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},y.prototype.findPlaceforPrunedNode=function(e){var t,n,r=e[0],i=(n=r==e[1].source?e[1].target:e[1].source).startX,a=n.finishX,o=n.startY,s=n.finishY,u=[0,0,0,0];if(o>0)for(var c=i;c<=a;c++)u[0]+=this.grid[c][o-1].length+this.grid[c][o].length-1;if(a<this.grid.length-1)for(c=o;c<=s;c++)u[1]+=this.grid[a+1][c].length+this.grid[a][c].length-1;if(s<this.grid[0].length-1)for(c=i;c<=a;c++)u[2]+=this.grid[c][s+1].length+this.grid[c][s].length-1;if(i>0)for(c=o;c<=s;c++)u[3]+=this.grid[i-1][c].length+this.grid[i][c].length-1;for(var f,h,d=p.MAX_VALUE,g=0;g<u.length;g++)u[g]<d?(d=u[g],f=1,h=g):u[g]==d&&f++;if(3==f&&0==d)0==u[0]&&0==u[1]&&0==u[2]?t=1:0==u[0]&&0==u[1]&&0==u[3]?t=0:0==u[0]&&0==u[2]&&0==u[3]?t=3:0==u[1]&&0==u[2]&&0==u[3]&&(t=2);else if(2==f&&0==d){var v=Math.floor(2*Math.random());t=0==u[0]&&0==u[1]?0==v?0:1:0==u[0]&&0==u[2]?0==v?0:2:0==u[0]&&0==u[3]?0==v?0:3:0==u[1]&&0==u[2]?0==v?1:2:0==u[1]&&0==u[3]?0==v?1:3:0==v?2:3}else if(4==f&&0==d){t=v=Math.floor(4*Math.random())}else t=h;0==t?r.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-l.DEFAULT_EDGE_LENGTH-r.getHeight()/2):1==t?r.setCenter(n.getCenterX()+n.getWidth()/2+l.DEFAULT_EDGE_LENGTH+r.getWidth()/2,n.getCenterY()):2==t?r.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+l.DEFAULT_EDGE_LENGTH+r.getHeight()/2):r.setCenter(n.getCenterX()-n.getWidth()/2-l.DEFAULT_EDGE_LENGTH-r.getWidth()/2,n.getCenterY())},e.exports=y},function(e,t,n){var r={};r.layoutBase=n(0),r.CoSEConstants=n(1),r.CoSEEdge=n(2),r.CoSEGraph=n(3),r.CoSEGraphManager=n(4),r.CoSELayout=n(6),r.CoSENode=n(5),e.exports=r}])},e.exports=n(layoutBase)});unwrapExports(coseBase);var numeric1_2_6=createCommonjsModule(function(module,exports){var numeric=exports;void 0!==commonjsGlobal&&(commonjsGlobal.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i;for(void 0===t&&(t=15),r=.5,n=new Date;;){for(i=r*=2;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;if(new Date-n>t)break}for(i=r;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;return 1e3*(3*r-1)/(new Date-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;t<n;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){var t=[];return function e(n){var r;if(void 0===n)return t.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof n)return t.push('"'+n+'"'),!1;if("boolean"==typeof n)return t.push(n.toString()),!1;if("number"==typeof n){var i=function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var n=Math.floor(Math.log(t)/Math.log(10)),r=t/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,i=(r=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}(n),a=n.toPrecision(numeric.precision),o=parseFloat(n.toString()).toString(),s=[i,a,o,parseFloat(a).toString(),parseFloat(o).toString()];for(r=1;r<s.length;r++)s[r].length<i.length&&(i=s[r]);return t.push(Array(numeric.precision+8-i.length).join(" ")+i),!1}if(null===n)return t.push("null"),!1;if("function"==typeof n){t.push(n.toString());var u=!1;for(r in n)n.hasOwnProperty(r)&&(u?t.push(",\n"):t.push("\n{"),u=!0,t.push(r),t.push(": \n"),e(n[r]));return u&&t.push("}\n"),!0}if(n instanceof Array){if(n.length>numeric.largeArray)return t.push("...Large Array..."),!0;for(u=!1,t.push("["),r=0;r<n.length;r++)r>0&&(t.push(","),u&&t.push("\n ")),u=e(n[r]);return t.push("]"),!0}t.push("{");u=!1;for(r in n)n.hasOwnProperty(r)&&(u&&t.push(",\n"),u=!0,t.push(r),t.push(": \n"),e(n[r]));return t.push("}"),!0}(e),t.join("")},numeric.parseDate=function(e){return function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseFloat=function(e){return function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseCSV=function(e){var t,n,r,i=e.split("\n"),a=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,u=0;for(n=0;n<i.length;n++){var l,c=(i[n]+",").match(o);if(c.length>0){for(a[u]=[],t=0;t<c.length;t++)l=(r=c[t]).substr(0,r.length-1),s.test(l)?a[u][t]=parseFloat(l):a[u][t]=l;u++}}return a},numeric.toCSV=function(e){var t,n,r,i,a,o=numeric.dim(e);for(r=o[0],o[1],a=[],t=0;t<r;t++){for(i=[],n=0;n<r;n++)i[n]=e[t][n].toString();a[t]=i.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1;e.length;for(r=t;r<n;r++)a=a>>>8^i[255&(a^e[r])];return-1^a}var n,r,i,a,o,s,u,l,c,f,h=e[0].length,d=e[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,d>>24&255,d>>16&255,d>>8&255,255&d,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(f=t(p,12,29),p[29]=f>>24&255,p[30]=f>>16&255,p[31]=f>>8&255,p[32]=255&f,n=1,r=0,u=0;u<h;u++){for(u<h-1?p.push(0):p.push(1),o=3*d+1+(0===u)&255,s=3*d+1+(0===u)>>8&255,p.push(o),p.push(s),p.push(255&~o),p.push(255&~s),0===u&&p.push(0),l=0;l<d;l++)for(i=0;i<3;i++)r=(r+(n=(n+(o=(o=e[i][u][l])>255?255:o<0?0:Math.round(o)))%65521))%65521,p.push(o);p.push(0)}return c=(r<<16)+n,p.push(c>>24&255),p.push(c>>16&255),p.push(c>>8&255),p.push(255&c),a=p.length-41,p[33]=a>>24&255,p[34]=a>>16&255,p[35]=a>>8&255,p[36]=255&a,f=t(p,37),p.push(f>>24&255),p.push(f>>16&255),p.push(f>>8&255),p.push(255&f),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+function(e){var t,n,r,i,a,o,s,u=e.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="";for(t=0;t<u;t+=3)a=((3&(n=e[t]))<<4)+((r=e[t+1])>>4),o=((15&r)<<2)+((i=e[t+2])>>6),s=63&i,t+1>=u?o=s=64:t+2>=u&&(s=64),c+=l.charAt(n>>2)+l.charAt(a)+l.charAt(o)+l.charAt(s);return c}(p)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?numeric._dim(e):[e.length,t.length]:[e.length]:[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if((i=t.length)!==n.length)return!1;for(r=0;r<i;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){void 0===n&&(n=0);var r,i=e[n],a=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)a[r+1]=t,a[r]=t;return-1===r&&(a[0]=t),a}for(r=i-1;r>=0;r--)a[r]=numeric.rep(e,t,n+1);return a},numeric.dotMMsmall=function(e,t){var n,r,i,a,o,s,u,l,c,f,h;for(a=e.length,o=t.length,s=t[0].length,u=Array(a),n=a-1;n>=0;n--){for(l=Array(s),c=e[n],i=s-1;i>=0;i--){for(f=c[o-1]*t[o-1][i],r=o-2;r>=1;r-=2)h=r-1,f+=c[r]*t[r][i]+c[h]*t[h][i];0===r&&(f+=c[0]*t[0][i]),l[i]=f}u[n]=l}return u},numeric._getCol=function(e,t,n){var r;for(r=e.length-1;r>0;--r)n[r]=e[r][t],n[--r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,a=numeric._getCol,o=t.length,s=Array(o),u=e.length,l=t[0].length,c=new Array(u),f=numeric.dotVV;for(--o,r=--u;-1!==r;--r)c[r]=Array(l);for(r=--l;-1!==r;--r)for(a(t,r,s),i=u;-1!==i;--i)n=e[i],c[i][r]=f(n,s);return c},numeric.dotMV=function(e,t){var n,r=e.length,i=(t.length,Array(r)),a=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=a(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,a,o,s,u;for(i=e.length,a=t[0].length,o=Array(a),r=a-1;r>=0;r--){for(s=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)u=n-1,s+=e[n]*t[n][r]+e[u]*t[u][r];0===n&&(s+=e[0]*t[0][r]),o[r]=s}return o},numeric.dotVV=function(e,t){var n,r,i=e.length,a=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,a+=e[n]*t[n]+e[r]*t[r];return 0===n&&(a+=e[0]*t[0]),a},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),n=t+2,r=a-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),o[t]=i}return o},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],r[--t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){void 0===n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",u=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(u=!0),a.push(i);return a[e.length]="_s",a[e.length+1]="_k",a[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(u?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric.pointwise2=function(e,t,n){void 0===n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",u=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(u=!0),a.push(i);return a[e.length]="var _n = "+s+".length;\nvar i"+(u?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric._biforeach=function e(t,n,r,i,a){var o;if(i!==r.length-1)for(o=r[i]-1;o>=0;o--)e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,i+1,a);else a(t,n)},numeric._biforeach2=function e(t,n,r,i,a){if(i===r.length-1)return a(t,n);var o,s=r[i],u=Array(s);for(o=s-1;o>=0;--o)u[o]=e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,i+1,a);return u},numeric._foreach=function e(t,n,r,i){var a;if(r!==n.length-1)for(a=n[r]-1;a>=0;a--)e(t[a],n,r+1,i);else i(t)},numeric._foreach2=function e(t,n,r,i){if(r===n.length-1)return i(t);var a,o=n[r],s=Array(o);for(a=o-1;a>=0;a--)s[a]=e(t[a],n,r+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,a,o,s,u=numeric.dim(e),l=Math.abs,c=u[0],f=u[1],h=numeric.clone(e),d=numeric.identity(c);for(o=0;o<f;++o){var p=-1,g=-1;for(a=o;a!==c;++a)(s=l(h[a][o]))>g&&(p=a,g=s);for(n=h[p],h[p]=h[o],h[o]=n,i=d[p],d[p]=d[o],d[o]=i,e=n[o],s=o;s!==f;++s)n[s]/=e;for(s=f-1;-1!==s;--s)i[s]/=e;for(a=c-1;-1!==a;--a)if(a!==o){for(t=h[a],r=d[a],e=t[o],s=o+1;s!==f;++s)t[s]-=n[s]*e;for(s=f-1;s>0;--s)r[s]-=i[s]*e,r[--s]-=i[s]*e;0===s&&(r[0]-=i[0]*e)}}return d},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,a,o,s,u,l,c=t[0],f=1,h=numeric.clone(e);for(r=0;r<c-1;r++){for(i=r,n=r+1;n<c;n++)Math.abs(h[n][r])>Math.abs(h[i][r])&&(i=n);for(i!==r&&(u=h[i],h[i]=h[r],h[r]=u,f*=-1),a=h[r],n=r+1;n<c;n++){for(s=(o=h[n])[r]/a[r],i=r+1;i<c-1;i+=2)l=i+1,o[i]-=a[i]*s,o[l]-=a[l]*s;i!==c&&(o[i]-=a[i]*s)}if(0===a[r])return 0;f*=a[r]}return f*h[r][r]},numeric.transpose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,u=Array(s);for(n=0;n<s;n++)u[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)(a=u[n])[t]=i[n],a[t-1]=r[n],(a=u[--n])[t]=i[n],a[t-1]=r[n];0===n&&((a=u[0])[t]=i[0],a[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)u[n][0]=r[n],u[--n][0]=r[n];0===n&&(u[0][0]=r[0])}return u},numeric.negtranspose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,u=Array(s);for(n=0;n<s;n++)u[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)(a=u[n])[t]=-i[n],a[t-1]=-r[n],(a=u[--n])[t]=-i[n],a[t-1]=-r[n];0===n&&((a=u[0])[t]=-i[0],a[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)u[n][0]=-r[n],u[--n][0]=-r[n];0===n&&(u[0][0]=-r[0])}return u},numeric._random=function e(t,n){var r,i,a=t[n],o=Array(a);if(n===t.length-1){for(i=Math.random,r=a-1;r>=1;r-=2)o[r]=i(),o[r-1]=i();return 0===r&&(o[0]=i()),o}for(r=a-1;r>=0;r--)o[r]=e(t,n+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if(void 0===n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];var r,i=Array(n);for(r=--n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){var r=numeric.dim(e);return function e(i,a){var o,s=t[a],u=n[a]-s,l=Array(u);if(a===r.length-1){for(o=u;o>=0;o--)l[o]=i[o+s];return l}for(o=u;o>=0;o--)l[o]=e(i[o+s],a+1);return l}(e,0)},numeric.setBlock=function(e,t,n,r){var i=numeric.dim(e);return function e(r,a,o){var s,u=t[o],l=n[o]-u;if(o===i.length-1)for(s=l;s>=0;s--)r[s+u]=a[s];for(s=l;s>=0;s--)e(r[s+u],a[s],o+1)}(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,a,o,s=t.length,u=n.length,l=Array(s);for(r=s-1;-1!==r;--r)for(l[r]=Array(u),a=l[r],o=e[t[r]],i=u-1;-1!==i;--i)a[i]=o[n[i]];return l},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,a,o,s=t[0],u=t[1];for(n=0,r=0,i=0;i<s;++i)n+=e[i][0].length;for(a=0;a<u;++a)r+=e[0][a][0].length;var l=Array(n);for(i=0;i<n;++i)l[i]=Array(r);var c,f,h,d,p,g=0;for(i=0;i<s;++i){for(c=r,a=u-1;-1!==a;--a)for(c-=(o=e[i][a])[0].length,h=o.length-1;-1!==h;--h)for(p=o[h],f=l[g+h],d=p.length-1;-1!==d;--d)f[c+d]=p[d];g+=e[i][0].length}return l},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,o,s,u=n[0],l=r[0],c=Array(u);for(a=u-1;a>=0;a--){for(i=Array(l),s=e[a],o=l-1;o>=3;--o)i[o]=s*t[o],i[--o]=s*t[o],i[--o]=s*t[o],i[--o]=s*t[o];for(;o>=0;)i[o]=s*t[o],--o;c[a]=i}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){var a;numeric.indexOf;if("string"!=typeof i)for(a in i="",numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||t.indexOf(a)>=0||n.indexOf(a)>=0||r.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var t=numeric.div;return this.y?new numeric.T(t(this.x,e.x),t(this.y,e.x)):new numeric.T(t(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,a,o,s,u,l,c,f,h,d,p,g,v,m,y,b=e.x.length,x=numeric.identity(b),w=numeric.rep([b,b],0),E=numeric.clone(e.x),T=numeric.clone(e.y);for(l=0;l<b;l++){for(h=(p=E[l][l])*p+(g=T[l][l])*g,f=l,c=l+1;c<b;c++)(d=(p=E[c][l])*p+(g=T[c][l])*g)>h&&(f=c,h=d);for(f!==l&&(y=E[l],E[l]=E[f],E[f]=y,y=T[l],T[l]=T[f],T[f]=y,y=x[l],x[l]=x[f],x[f]=y,y=w[l],w[l]=w[f],w[f]=y),t=E[l],n=T[l],a=x[l],o=w[l],p=t[l],g=n[l],c=l+1;c<b;c++)v=t[c],m=n[c],t[c]=(v*p+m*g)/h,n[c]=(m*p-v*g)/h;for(c=0;c<b;c++)v=a[c],m=o[c],a[c]=(v*p+m*g)/h,o[c]=(m*p-v*g)/h;for(c=l+1;c<b;c++){for(r=E[c],i=T[c],s=x[c],u=w[c],p=r[l],g=i[l],f=l+1;f<b;f++)v=t[f],m=n[f],r[f]-=v*p-m*g,i[f]-=m*p+v*g;for(f=0;f<b;f++)v=a[f],m=o[f],s[f]-=v*p-m*g,u[f]-=m*p+v*g}}for(l=b-1;l>0;l--)for(a=x[l],o=w[l],c=l-1;c>=0;c--)for(s=x[c],u=w[c],p=E[c][l],g=T[c][l],f=b-1;f>=0;f--)v=a[f],m=o[f],s[f]-=p*v-g*m,u[f]-=p*m+g*v;return new numeric.T(x,w)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,a=e.length;if(r){for(;i<a;)n=n[t=e[i]],r=r[t],i++;return new numeric.T(n,r)}for(;i<a;)n=n[t=e[i]],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,a=0,o=e.length,s=t.x,u=t.y;if(0===o)return u?this.y=u:i&&(this.y=void 0),this.x=r,this;if(u){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);a<o-1;)r=r[n=e[a]],i=i[n],a++;return r[n=e[a]]=s,i[n]=u,this}if(i){for(;a<o-1;)r=r[n=e[a]],i=i[n],a++;return r[n=e[a]]=s,s instanceof Array?i[n]=numeric.rep(numeric.dim(s),0):i[n]=0,this}for(;a<o-1;)r=r[n=e[a]],a++;return r[n=e[a]]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,a=Array(i),o=this.x,s=this.y;for(n=e;n<=t;n++)a[n-e]=o[n];if(s){for(r=Array(i),n=e;n<=t;n++)r[n-e]=s[n];return new numeric.T(a,r)}return new numeric.T(a)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,a=this.y,o=n.x,s=n.y;for(r=e;r<=t;r++)i[r]=o[r-e];if(s)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),r=e;r<=t;r++)a[r]=s[r-e];else if(a)for(r=e;r<=t;r++)a[r]=numeric.rep([o[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,a=t.y;return n[e]=i,a?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=a):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,a=numeric.setBlock,o=n.x,s=n.y;if(s)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(r,e,t,o),a(i,e,t,s),this;a(r,e,t,o),i&&a(i,e,t,numeric.rep(numeric.dim(o),0))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,a=numeric.rep;return i?new n(a(e,r),a(e,i)):new n(a(e,r))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,r=numeric.diag;return n?new numeric.T(r(t),r(n)):new numeric.T(r(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=(e[0]>=0?1:-1)*numeric.norm2(e);t[0]+=n;var r=numeric.norm2(t);if(0===r)throw new Error("eig: internal error");return numeric.div(t,r)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,a,o,s,u,l,c,f,h=t[0],d=numeric.clone(e),p=numeric.identity(h);for(r=0;r<h-2;r++){for(a=Array(h-r-1),n=r+1;n<h;n++)a[n-r-1]=d[n][r];if(numeric.norm2(a)>0){for(o=numeric.house(a),s=numeric.getBlock(d,[r+1,r],[h-1,h-1]),u=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<h;n++)for(l=d[n],c=u[n-r-1],i=r;i<h;i++)l[i]-=2*c[i-r];for(s=numeric.getBlock(d,[0,r+1],[h-1,h-1]),u=numeric.tensor(numeric.dot(s,o),o),n=0;n<h;n++)for(l=d[n],c=u[n],i=r+1;i<h;i++)l[i]-=2*c[i-r-1];for(s=Array(h-r-1),n=r+1;n<h;n++)s[n-r-1]=p[n];for(u=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<h;n++)for(f=p[n],c=u[n-r-1],i=0;i<h;i++)f[i]-=2*c[i]}}return{H:d,Q:p}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){void 0===t&&(t=1e4),e=numeric.clone(e);numeric.clone(e);var n,r,i,a,o,s,u,l,c,f,h,d,p,g,v,m,y,b,x=numeric.dim(e)[0],w=numeric.identity(x);if(x<3)return{Q:w,B:[[0,x-1]]};var E=numeric.epsilon;for(b=0;b<t;b++){for(m=0;m<x-1;m++)if(Math.abs(e[m+1][m])<E*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){var T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),_=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[x-1,x-1]),t);for(d=Array(m+1),v=0;v<=m;v++)d[v]=w[v];for(p=numeric.dot(T.Q,d),v=0;v<=m;v++)w[v]=p[v];for(d=Array(x-m-1),v=m+1;v<x;v++)d[v-m-1]=w[v];for(p=numeric.dot(_.Q,d),v=m+1;v<x;v++)w[v]=p[v-m-1];return{Q:w,B:T.B.concat(numeric.add(_.B,m+1))}}var C,D,S;if(i=e[x-2][x-2],a=e[x-2][x-1],o=e[x-1][x-2],l=i+(s=e[x-1][x-1]),u=i*s-a*o,c=numeric.getBlock(e,[0,0],[2,2]),l*l>=4*u)C=.5*(l+Math.sqrt(l*l-4*u)),D=.5*(l-Math.sqrt(l*l-4*u)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,C+D)),numeric.diag(numeric.rep([3],C*D)));else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,l)),numeric.diag(numeric.rep([3],u)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),d=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,d)),v=0;v<3;v++)for(h=e[v],g=p[v],y=0;y<x;y++)h[y]-=2*g[y];for(d=numeric.getBlock(e,[0,0],[x-1,2]),p=numeric.tensor(numeric.dot(d,r),r),v=0;v<x;v++)for(h=e[v],g=p[v],y=0;y<3;y++)h[y]-=2*g[y];for(d=[w[0],w[1],w[2]],p=numeric.tensor(r,numeric.dot(r,d)),v=0;v<3;v++)for(f=w[v],g=p[v],y=0;y<x;y++)f[y]-=2*g[y];for(m=0;m<x-2;m++){for(y=m;y<=m+1;y++)if(Math.abs(e[y+1][y])<E*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){T=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),_=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[x-1,x-1]),t);for(d=Array(y+1),v=0;v<=y;v++)d[v]=w[v];for(p=numeric.dot(T.Q,d),v=0;v<=y;v++)w[v]=p[v];for(d=Array(x-y-1),v=y+1;v<x;v++)d[v-y-1]=w[v];for(p=numeric.dot(_.Q,d),v=y+1;v<x;v++)w[v]=p[v-y-1];return{Q:w,B:T.B.concat(numeric.add(_.B,y+1))}}for(S=Math.min(x-1,m+3),n=Array(S-m),v=m+1;v<=S;v++)n[v-m-1]=e[v][m];for(r=numeric.house(n),d=numeric.getBlock(e,[m+1,m],[S,x-1]),p=numeric.tensor(r,numeric.dot(r,d)),v=m+1;v<=S;v++)for(h=e[v],g=p[v-m-1],y=m;y<x;y++)h[y]-=2*g[y-m];for(d=numeric.getBlock(e,[0,m+1],[x-1,S]),p=numeric.tensor(numeric.dot(d,r),r),v=0;v<x;v++)for(h=e[v],g=p[v],y=m+1;y<=S;y++)h[y]-=2*g[y-m-1];for(d=Array(S-m),v=m+1;v<=S;v++)d[v-m-1]=w[v];for(p=numeric.tensor(r,numeric.dot(r,d)),v=m+1;v<=S;v++)for(f=w[v],g=p[v-m-1],y=0;y<x;y++)f[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,a,o,s,u,l,c,f,h,d,p,g,v,m,y=numeric.toUpperHessenberg(e),b=numeric.QRFrancis(y.H,t),x=numeric.T,w=e.length,E=b.B,T=numeric.dot(b.Q,numeric.dot(y.H,numeric.transpose(b.Q))),_=new x(numeric.dot(b.Q,y.Q)),C=E.length,D=Math.sqrt;for(r=0;r<C;r++)if((n=E[r][0])===E[r][1]);else{if(a=n+1,o=T[n][n],s=T[n][a],u=T[a][n],l=T[a][a],0===s&&0===u)continue;(f=(c=-o-l)*c-4*(o*l-s*u))>=0?((v=(o-(h=c<0?-.5*(c-D(f)):-.5*(c+D(f))))*(o-h)+s*s)>(m=u*u+(l-h)*(l-h))?(p=(o-h)/(v=D(v)),g=s/v):(p=u/(m=D(m)),g=(l-h)/m),i=new x([[g,-p],[p,g]]),_.setRows(n,a,i.dot(_.getRows(n,a)))):(h=-.5*c,d=.5*D(-f),(v=(o-h)*(o-h)+s*s)>(m=u*u+(l-h)*(l-h))?(p=(o-h)/(v=D(v+d*d)),g=s/v,h=0,d/=v):(p=u/(m=D(m+d*d)),g=(l-h)/m,h=d/m,d=0),i=new x([[g,-p],[p,g]],[[h,d],[d,-h]]),_.setRows(n,a,i.dot(_.getRows(n,a))))}var S=_.dot(e).dot(_.transjugate()),A=(w=e.length,numeric.T.identity(w));for(a=0;a<w;a++)if(a>0)for(r=a-1;r>=0;r--){var k=S.get([r,r]),R=S.get([a,a]);numeric.neq(k.x,R.x)||numeric.neq(k.y,R.y)?(h=S.getRow(r).getBlock([r],[a-1]),d=A.getRow(a).getBlock([r],[a-1]),A.set([a,r],S.get([r,a]).neg().sub(h.dot(d)).div(k.sub(R)))):A.setRow(a,A.getRow(r))}for(a=0;a<w;a++)h=A.getRow(a),A.setRow(a,h.div(h.norm2()));return A=A.transpose(),A=_.transjugate().dot(A),{lambda:S.getDiag(),E:A}},numeric.ccsSparse=function(e){var t,n,r,i=e.length,a=[];for(n=i-1;-1!==n;--n)for(r in t=e[n]){for(r=parseInt(r);r>=a.length;)a[a.length]=0;0!==t[r]&&a[r]++}var o=a.length,s=Array(o+1);for(s[0]=0,n=0;n<o;++n)s[n+1]=s[n]+a[n];var u=Array(s[o]),l=Array(s[o]);for(n=i-1;-1!==n;--n)for(r in t=e[n])0!==t[r]&&(a[r]--,u[s[r]+a[r]]=n,l[s[r]+a[r]]=t[r]);return[s,u,l]},numeric.ccsFull=function(e){var t,n,r,i,a=e[0],o=e[1],s=e[2],u=numeric.ccsDim(e),l=u[0],c=u[1],f=numeric.rep([l,c],0);for(t=0;t<c;t++)for(r=a[t],i=a[t+1],n=r;n<i;++n)f[o[n]][t]=s[n];return f},numeric.ccsTSolve=function(e,t,n,r,i){var a,o,s,u,l,c,f,h=e[0],d=e[1],p=e[2],g=h.length-1,v=Math.max,m=0;function y(e){var t;if(0===n[e]){for(n[e]=1,t=h[e];t<h[e+1];++t)y(d[t]);i[m]=e,++m}}for(void 0===r&&(n=numeric.rep([g],0)),void 0===r&&(r=numeric.linspace(0,n.length-1)),void 0===i&&(i=[]),a=r.length-1;-1!==a;--a)y(r[a]);for(i.length=m,a=i.length-1;-1!==a;--a)n[i[a]]=0;for(a=r.length-1;-1!==a;--a)o=r[a],n[o]=t[o];for(a=i.length-1;-1!==a;--a){for(o=i[a],s=h[o],u=v(h[o+1],s),l=s;l!==u;++l)if(d[l]===o){n[o]/=p[l];break}for(f=n[o],l=s;l!==u;++l)(c=d[l])!==o&&(n[c]-=f*p[l])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,a){var o,s,u,l=0,c=i.length,f=this.k,h=this.k1,d=this.j;if(0===r[e])for(r[e]=1,d[0]=e,f[0]=s=t[e],h[0]=u=t[e+1];;)if(s>=u){if(i[c]=d[l],0===l)return;++c,s=f[--l],u=h[l]}else 0===r[o=a[n[s]]]?(r[o]=1,f[l]=s,d[++l]=o,s=t[o],h[l]=u=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,i,a,o){var s,u,l,c,f,h,d,p,g,v=e[0],m=e[1],y=e[2],b=(v.length,t[0]),x=t[1],w=t[2];for(u=b[i],l=b[i+1],r.length=0,s=u;s<l;++s)o.dfs(a[x[s]],v,m,n,r,a);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=u;s!==l;++s)n[c=a[x[s]]]=w[s];for(s=r.length-1;-1!==s;--s){for(f=v[c=r[s]],h=v[c+1],d=f;d<h;++d)if(a[m[d]]===c){n[c]/=y[d];break}for(g=n[c],d=f;d<h;++d)(p=a[m[d]])!==c&&(n[p]-=g*y[d])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,a,o,s,u,l=e[0].length-1,c=[numeric.rep([l+1],0),[],[]],f=[numeric.rep([l+1],0),[],[]],h=c[0],d=c[1],p=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([l],0),b=numeric.rep([l],0),x=numeric.ccsLPSolve,w=Math.abs,E=numeric.linspace(0,l-1),T=numeric.linspace(0,l-1),_=new numeric.ccsDFS(l);for(void 0===t&&(t=1),n=0;n<l;++n){for(x(c,e,y,b,n,T,_),a=-1,o=-1,r=b.length-1;-1!==r;--r)(i=b[r])<=n||(s=w(y[i]))>a&&(o=i,a=s);for(w(y[n])<t*a&&(r=E[n],a=E[o],E[n]=a,T[a]=n,E[o]=r,T[r]=o,a=y[n],y[n]=y[o],y[o]=a),a=h[n],o=g[n],u=y[n],d[a]=E[n],p[a]=1,++a,r=b.length-1;-1!==r;--r)s=y[i=b[r]],b[r]=0,y[i]=0,i<=n?(v[o]=i,m[o]=s,++o):(d[a]=E[i],p[a]=s/u,++a);h[n+1]=a,g[n+1]=o}for(r=d.length-1;-1!==r;--r)d[r]=T[d[r]];return{L:c,U:f,P:E,Pinv:T}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,a,o){var s,u,l,c=0,f=i.length,h=this.k,d=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,h[0]=u=t[a[e]],d[0]=l=t[a[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=l){if(i[f]=a[p[c]],0===c)return;++f,u=h[--c],l=d[c]}else 0===r[s=n[u]]?(r[s]=1,h[c]=u,p[++c]=s,u=t[s=a[s]],d[c]=l=t[s+1]):++u}},numeric.ccsLPSolve0=function(e,t,n,r,i,a,o,s){var u,l,c,f,h,d,p,g,v,m=e[0],y=e[1],b=e[2],x=(m.length,t[0]),w=t[1],E=t[2];for(l=x[i],c=x[i+1],r.length=0,u=l;u<c;++u)s.dfs(w[u],m,y,n,r,a,o);for(u=r.length-1;-1!==u;--u)n[o[f=r[u]]]=0;for(u=l;u!==c;++u)n[f=w[u]]=E[u];for(u=r.length-1;-1!==u;--u){for(g=o[f=r[u]],h=m[f],d=m[f+1],p=h;p<d;++p)if(y[p]===g){n[g]/=b[p];break}for(v=n[g],p=h;p<d;++p)n[y[p]]-=v*b[p];n[g]=v}},numeric.ccsLUP0=function(e,t){var n,r,i,a,o,s,u,l=e[0].length-1,c=[numeric.rep([l+1],0),[],[]],f=[numeric.rep([l+1],0),[],[]],h=c[0],d=c[1],p=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([l],0),b=numeric.rep([l],0),x=numeric.ccsLPSolve0,w=Math.abs,E=numeric.linspace(0,l-1),T=numeric.linspace(0,l-1),_=new numeric.ccsDFS0(l);for(void 0===t&&(t=1),n=0;n<l;++n){for(x(c,e,y,b,n,T,E,_),a=-1,o=-1,r=b.length-1;-1!==r;--r)(i=b[r])<=n||(s=w(y[E[i]]))>a&&(o=i,a=s);for(w(y[E[n]])<t*a&&(r=E[n],a=E[o],E[n]=a,T[a]=n,E[o]=r,T[r]=o),a=h[n],o=g[n],u=y[E[n]],d[a]=E[n],p[a]=1,++a,r=b.length-1;-1!==r;--r)s=y[E[i=b[r]]],b[r]=0,y[E[i]]=0,i<=n?(v[o]=i,m[o]=s,++o):(d[a]=E[i],p[a]=s/u,++a);h[n+1]=a,g[n+1]=o}for(r=d.length-1;-1!==r;--r)d[r]=T[d[r]];return{L:c,U:f,P:E,Pinv:T}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],a=r[1];void 0===t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]);var o,s,u,l,c=t.length,f=n.length,h=numeric.rep([a],0),d=[],p=[],g=[h,d,p],v=e[0],m=e[1],y=e[2],b=numeric.rep([i],0),x=0,w=numeric.rep([i],0);for(s=0;s<f;++s){var E=v[l=n[s]],T=v[l+1];for(o=E;o<T;++o)w[u=m[o]]=1,b[u]=y[o];for(o=0;o<c;++o)w[t[o]]&&(d[x]=o,p[x]=b[t[o]],++x);for(o=E;o<T;++o)w[u=m[o]]=0;h[s+1]=x}return g},numeric.ccsDot=function(e,t){var n,r,i,a,o,s,u,l,c,f,h,d=e[0],p=e[1],g=e[2],v=t[0],m=t[1],y=t[2],b=numeric.ccsDim(e),x=numeric.ccsDim(t),w=b[0],E=(b[1],x[1]),T=numeric.rep([w],0),_=numeric.rep([w],0),C=Array(w),D=numeric.rep([E],0),S=[],A=[],k=[D,S,A];for(i=0;i!==E;++i){for(a=v[i],o=v[i+1],c=0,r=a;r<o;++r)for(f=m[r],h=y[r],s=d[f],u=d[f+1],n=s;n<u;++n)0===_[l=p[n]]&&(C[c]=l,_[l]=1,c+=1),T[l]=T[l]+g[n]*h;for(o=(a=D[i])+c,D[i+1]=o,r=c-1;-1!==r;--r)h=a+r,n=C[r],S[h]=n,A[h]=T[n],_[n]=0,T[n]=0;D[i+1]=D[i]+c}return k},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,i=(e.P,t[0]),a=!1;"object"!=typeof i&&(i=(t=[[0,t.length],numeric.linspace(0,t.length-1),t])[0],a=!0);var o,s,u,l,c,f,h=t[1],d=t[2],p=n[0].length-1,g=i.length-1,v=numeric.rep([p],0),m=Array(p),y=numeric.rep([p],0),b=Array(p),x=numeric.rep([g+1],0),w=[],E=[],T=numeric.ccsTSolve,_=0;for(o=0;o<g;++o){for(c=0,u=i[o],l=i[o+1],s=u;s<l;++s)f=e.Pinv[h[s]],b[c]=f,y[f]=d[s],++c;for(b.length=c,T(n,y,v,b,m),s=b.length-1;-1!==s;--s)y[b[s]]=0;if(T(r,v,y,m,b),a)return y;for(s=m.length-1;-1!==s;--s)v[m[s]]=0;for(s=b.length-1;-1!==s;--s)f=b[s],w[_]=f,E[_]=y[f],y[f]=0,++_;x[o+1]=_}return[x,w,E]},numeric.ccsbinop=function(e,t){return void 0===t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],a=numeric.sup(r)+1,o=n.length,s=numeric.rep([a],0),u=Array(o),l=Array(o),c=numeric.rep([a],0);for(t=0;t<o;++t)c[r[t]]++;for(t=0;t<a;++t)s[t+1]=s[t]+c[t];var f,h,d=s.slice(0);for(t=0;t<o;++t)u[f=d[h=r[t]]]=n[t],l[f]=i[t],d[h]=d[h]+1;return[s,u,l]},numeric.ccsGather=function(e){var t,n,r,i,a,o=e[0],s=e[1],u=e[2],l=o.length-1,c=s.length,f=Array(c),h=Array(c),d=Array(c);for(a=0,t=0;t<l;++t)for(r=o[t],i=o[t+1],n=r;n!==i;++n)h[a]=t,f[a]=s[n],d[a]=u[n],++a;return[f,h,d]},numeric.sdim=function e(t,n,r){if(void 0===n&&(n=[]),"object"!=typeof t)return n;var i;for(i in void 0===r&&(r=0),r in n||(n[r]=0),t.length>n[r]&&(n[r]=t.length),t)t.hasOwnProperty(i)&&e(t[i],n,r+1);return n},numeric.sclone=function e(t,n,r){void 0===n&&(n=0),void 0===r&&(r=numeric.sdim(t).length);var i,a=Array(t.length);if(n===r-1){for(i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);return a}for(i in t)t.hasOwnProperty(i)&&(a[i]=e(t[i],n+1,r));return a},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];e.length;for(t in e)if(e.hasOwnProperty(t))for(n in r=e[t])r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n]);return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,i,a,o,s,u,l=e.length,c=(t.length,numeric.stranspose(t)),f=c.length,h=Array(l);for(i=l-1;i>=0;i--){for(u=[],n=e[i],o=f-1;o>=0;o--){for(a in s=0,r=c[o],n)n.hasOwnProperty(a)&&a in r&&(s+=n[a]*r[a]);s&&(u[o]=s)}h[i]=u}return h},numeric.sdotMV=function(e,t){var n,r,i,a,o=e.length,s=Array(o);for(r=o-1;r>=0;r--){for(i in a=0,n=e[r])n.hasOwnProperty(i)&&t[i]&&(a+=n[i]*t[i]);a&&(s[r]=a)}return s},numeric.sdotVM=function(e,t){var n,r,i,a,o=[];for(n in e)if(e.hasOwnProperty(n))for(r in i=t[n],a=e[n],i)i.hasOwnProperty(r)&&(o[r]||(o[r]=0),o[r]+=a*i[r]);return o},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length;switch(1e3*n+r){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,a=e[0].length,o=e.length,s=[];for(n=a-1;n>=0;--n)if(e[o-1][n]){for(i=s,r=0;r<o-2;r++)i[t=e[r][n]]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function e(t,n,r){var i,a,o;for(a in void 0===n&&(n=[]),void 0===r&&(r=[]),i=r.length,t)if(t.hasOwnProperty(a))if(r[i]=parseInt(a),"number"==typeof(o=t[a])){if(o){if(0===n.length)for(a=i+1;a>=0;--a)n[a]=[];for(a=i;a>=0;--a)n[a].push(r[a]);n[i+1].push(o)}}else e(o,n,r);return r.length>i&&r.pop(),n},numeric.cLU=function(e){var t,n,r,i,a,o,s=e[0],u=e[1],l=e[2],c=s.length,f=0;for(t=0;t<c;t++)s[t]>f&&(f=s[t]);f++;var h,d=Array(f),p=Array(f),g=numeric.rep([f],1/0),v=numeric.rep([f],-1/0);for(r=0;r<c;r++)t=s[r],(n=u[r])<g[t]&&(g[t]=n),n>v[t]&&(v[t]=n);for(t=0;t<f-1;t++)v[t]>v[t+1]&&(v[t+1]=v[t]);for(t=f-1;t>=1;t--)g[t]<g[t-1]&&(g[t-1]=g[t]);for(t=0;t<f;t++)p[t]=numeric.rep([v[t]-g[t]+1],0),d[t]=numeric.rep([t-g[t]],0),t-g[t]+1,v[t]-t+1;for(r=0;r<c;r++)p[t=s[r]][u[r]-g[t]]=l[r];for(t=0;t<f-1;t++)for(i=t-g[t],b=p[t],n=t+1;g[n]<=t&&n<f;n++)if(a=t-g[n],o=v[t]-t,h=(x=p[n])[a]/b[i]){for(r=1;r<=o;r++)x[r+a]-=h*b[r+i];d[n][t-g[n]]=h}var m,y,b=[],x=[],w=[],E=[],T=[],_=[];for(c=0,m=0,t=0;t<f;t++){for(i=g[t],a=v[t],y=p[t],n=t;n<=a;n++)y[n-i]&&(b[c]=t,x[c]=n,w[c]=y[n-i],c++);for(y=d[t],n=i;n<t;n++)y[n-i]&&(E[m]=t,T[m]=n,_[m]=y[n-i],m++);E[m]=t,T[m]=t,_[m]=1,m++}return{U:[b,x,w],L:[E,T,_]}},numeric.cLUsolve=function(e,t){var n,r,i=e.L,a=e.U,o=numeric.clone(t),s=i[0],u=i[1],l=i[2],c=a[0],f=a[1],h=a[2],d=c.length,p=(s.length,o.length);for(r=0,n=0;n<p;n++){for(;u[r]<n;)o[n]-=l[r]*o[u[r]],r++;r++}for(r=d-1,n=p-1;n>=0;n--){for(;f[r]>n;)o[n]-=h[r]*o[f[r]],r--;o[n]/=h[r],r--}return o},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,a=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(a[n][r]=i,i++);return a},numeric.cdelsq=function(e){var t,n,r,i,a,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),u=s[0],l=s[1],c=[],f=[],h=[];for(t=1;t<u-1;t++)for(n=1;n<l-1;n++)if(!(e[t][n]<0)){for(r=0;r<4;r++)i=t+o[r][0],a=n+o[r][1],e[i][a]<0||(c.push(e[t][n]),f.push(e[i][a]),h.push(-1));c.push(e[t][n]),f.push(e[t][n]),h.push(4)}return[c,f,h]},numeric.cdotMV=function(e,t){var n,r,i,a=e[0],o=e[1],s=e[2],u=a.length;for(i=0,r=0;r<u;r++)a[r]>i&&(i=a[r]);for(i++,n=numeric.rep([i],0),r=0;r<u;r++)n[a[r]]+=s[r]*t[o[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var n,r,i,a=this.x,o=this.yl,s=this.yr,u=this.kl,l=this.kr,c=numeric.add,f=numeric.sub,h=numeric.mul;n=f(h(u[t],a[t+1]-a[t]),f(s[t+1],o[t])),r=c(h(l[t+1],a[t]-a[t+1]),f(s[t+1],o[t]));var d=(i=(e-a[t])/(a[t+1]-a[t]))*(1-i);return c(c(c(h(1-i,o[t]),h(i,s[t+1])),h(n,d*(1-i))),h(r,d*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,a=i.length,o=Math.floor;for(t=0,n=a-1;n-t>1;)i[r=o((t+n)/2)]<=e?t=r:n=r;return this._at(e,t)}a=e.length;var s,u=Array(a);for(s=a-1;-1!==s;--s)u[s]=this.at(e[s]);return u},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,a=this.yr,o=this.kl,s=this.kr,u=i.length,l=o,c=s,f=Array(u),h=Array(u),d=numeric.add,p=numeric.mul,g=numeric.div,v=numeric.sub;for(e=u-1;-1!==e;--e)t=r[e+1]-r[e],n=v(a[e+1],i[e]),f[e]=g(d(p(n,6),p(o[e],-4*t),p(s[e+1],-2*t)),t*t),h[e+1]=g(d(p(n,-6),p(o[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(r,l,c,f,h)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,a=this.kl,o=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],a=[a],o=[o]);var s,u,l,c,f,h,d,p,g,v,m,y,b,x,w,E,T,_,C,D,S,A,k,R=r.length,O=n.length-1,M=(t=Array(R),Math.sqrt);for(s=0;s!==R;++s){for(c=r[s],f=i[s],h=a[s],d=o[s],p=[],u=0;u!==O;u++){for(u>0&&f[u]*c[u]<0&&p.push(n[u]),E=n[u+1]-n[u],n[u],m=c[u],y=f[u+1],g=h[u]/E,b=(v=d[u+1]/E)+3*m+2*g-3*y,x=3*(v+g+2*(m-y)),(w=e(g-v+3*(m-y))+12*v*m)<=0?T=(_=b/x)>n[u]&&_<n[u+1]?[n[u],_,n[u+1]]:[n[u],n[u+1]]:(_=(b-M(w))/x,C=(b+M(w))/x,T=[n[u]],_>n[u]&&_<n[u+1]&&T.push(_),C>n[u]&&C<n[u+1]&&T.push(C),T.push(n[u+1])),S=T[0],_=this._at(S,u),l=0;l<T.length-1;l++)if(A=T[l+1],C=this._at(A,u),0!==_)if(0===C||_*C>0)S=A,_=C;else{for(var L=0;!((k=(_*A-C*S)/(_-C))<=S||k>=A);)if((D=this._at(k,u))*C>0)A=k,C=D,-1===L&&(_*=.5),L=-1;else{if(!(D*_>0))break;S=k,_=D,1===L&&(C*=.5),L=1}p.push(k),S=T[l+1],_=this._at(S,u)}else p.push(S),S=A,_=C;0===C&&p.push(A)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,a=e.length,o=[],s=[],u=[],l=numeric.sub,c=numeric.mul,f=numeric.add;for(i=a-2;i>=0;i--)s[i]=e[i+1]-e[i],u[i]=l(t[i+1],t[i]);"string"!=typeof n&&"string"!=typeof r||(n=r="periodic");var h=[[],[],[]];switch(typeof n){case"undefined":o[0]=c(3/(s[0]*s[0]),u[0]),h[0].push(0,0),h[1].push(0,1),h[2].push(2/s[0],1/s[0]);break;case"string":o[0]=f(c(3/(s[a-2]*s[a-2]),u[a-2]),c(3/(s[0]*s[0]),u[0])),h[0].push(0,0,0),h[1].push(a-2,0,1),h[2].push(1/s[a-2],2/s[a-2]+2/s[0],1/s[0]);break;default:o[0]=n,h[0].push(0),h[1].push(0),h[2].push(1)}for(i=1;i<a-1;i++)o[i]=f(c(3/(s[i-1]*s[i-1]),u[i-1]),c(3/(s[i]*s[i]),u[i])),h[0].push(i,i,i),h[1].push(i-1,i,i+1),h[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof r){case"undefined":o[a-1]=c(3/(s[a-2]*s[a-2]),u[a-2]),h[0].push(a-1,a-1),h[1].push(a-2,a-1),h[2].push(1/s[a-2],2/s[a-2]);break;case"string":h[1][h[1].length-1]=0;break;default:o[a-1]=r,h[0].push(a-1),h[1].push(a-1),h[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var d=Array(o.length);if("string"==typeof n)for(i=d.length-1;-1!==i;--i)d[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(h)),o[i]),d[i][a-1]=d[i][0];else for(i=d.length-1;-1!==i;--i)d[i]=numeric.cLUsolve(numeric.cLU(h),o[i]);return d="number"==typeof t[0]?d[0]:numeric.transpose(d),new numeric.Spline(e,t,t,d,d)},numeric.fftpow2=function e(t,n){var r=t.length;if(1!==r){var i,a,o=Math.cos,s=Math.sin,u=Array(r/2),l=Array(r/2),c=Array(r/2),f=Array(r/2);for(a=r/2,i=r-1;-1!==i;--i)c[--a]=t[i],f[a]=n[i],--i,u[a]=t[i],l[a]=n[i];e(u,l),e(c,f),a=r/2;var h,d,p,g=-6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--a&&(a=r/2-1),d=o(h=g*i),p=s(h),t[i]=u[a]+d*c[a]-p*f[a],n[i]=l[a]+d*f[a]+p*c[a]}},numeric._ifftpow2=function e(t,n){var r=t.length;if(1!==r){var i,a,o=Math.cos,s=Math.sin,u=Array(r/2),l=Array(r/2),c=Array(r/2),f=Array(r/2);for(a=r/2,i=r-1;-1!==i;--i)c[--a]=t[i],f[a]=n[i],--i,u[a]=t[i],l[a]=n[i];e(u,l),e(c,f),a=r/2;var h,d,p,g=6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--a&&(a=r/2-1),d=o(h=g*i),p=s(h),t[i]=u[a]+d*c[a]-p*f[a],n[i]=l[a]+d*f[a]+p*c[a]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){var i,a,o,s,u;for(numeric.fftpow2(e,t),numeric.fftpow2(n,r),i=e.length-1;-1!==i;--i)a=e[i],s=t[i],o=n[i],u=r[i],e[i]=a*o-s*u,t[i]=a*u+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),l=numeric.rep([u],0),c=numeric.rep([u],0),f=Math.cos,h=Math.sin,d=-3.141592653589793/i,p=numeric.rep([u],0),g=numeric.rep([u],0);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)g[e]=r[e];for(l[0]=1,e=1;e<=u/2;e++)t=d*e*e,l[e]=f(t),c[e]=h(t),l[u-e]=f(t),c[u-e]=h(t);var v=new numeric.T(p,g),m=new numeric.T(l,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),(v=v.mul(m)).x.length=i,v.y.length=i,v},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),l=numeric.rep([u],0),c=numeric.rep([u],0),f=Math.cos,h=Math.sin,d=3.141592653589793/i,p=numeric.rep([u],0),g=numeric.rep([u],0);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)g[e]=r[e];for(l[0]=1,e=1;e<=u/2;e++)t=d*e*e,l[e]=f(t),c[e]=h(t),l[u-e]=f(t),c[u-e]=h(t);var v=new numeric.T(p,g),m=new numeric.T(l,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),(v=v.mul(m)).x.length=i,v.y.length=i,v.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,a,o,s,u,l,c,f,h,d=Math.max,p=numeric.clone(t),g=Array(n),v=(numeric.div,numeric.sub,d=Math.max,Math.abs),m=Math.min,y=0;for(i=0;i<n;i++)for(var b=d(1e-6*r,1e-8);;){if(++y>20)throw new Error("Numerical gradient fails");if(p[i]=t[i]+b,a=e(p),p[i]=t[i]-b,o=e(p),p[i]=t[i],isNaN(a)||isNaN(o))b/=16;else{if(g[i]=(a-o)/(2*b),s=t[i]-b,u=t[i],l=t[i]+b,c=(a-r)/b,f=(r-o)/b,h=d(v(g[i]),v(r),v(a),v(o),v(s),v(u),v(l),1e-8),!(m(d(v(c-g[i]),v(f-g[i]),v(c-f))/h,b/h)>.001))break;b/=16}}return g},numeric.uncmin=function(e,t,n,r,i,a,o){var s=numeric.gradient;void 0===o&&(o={}),void 0===n&&(n=1e-8),void 0===r&&(r=function(t){return s(e,t)}),void 0===i&&(i=1e3);var u,l,c=(t=numeric.clone(t)).length,f=e(t);if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var h=Math.max,d=numeric.norm2;n=h(n,numeric.epsilon);var p,g,v,m,y,b,x,w,E,T,_=o.Hinv||numeric.identity(c),C=numeric.dot,D=(numeric.inv,numeric.sub),S=numeric.add,A=numeric.tensor,k=numeric.div,R=numeric.mul,O=numeric.all,M=numeric.isFinite,L=numeric.neg,N=0,P="";for(g=r(t);N<i;){if("function"==typeof a&&a(N,t,f,g,_)){P="Callback returned true";break}if(!O(M(g))){P="Gradient has Infinity or NaN";break}if(!O(M(p=L(C(_,g))))){P="Search direction has Infinity or NaN";break}if((T=d(p))<n){P="Newton step smaller than tol";break}for(E=1,l=C(g,p),y=t;N<i&&!(E*T<n)&&(y=S(t,m=R(p,E)),(u=e(y))-f>=.1*E*l||isNaN(u));)E*=.5,++N;if(E*T<n){P="Line search step size smaller than tol";break}if(N===i){P="maxit reached during line search";break}w=C(b=D(v=r(y),g),m),x=C(_,b),_=D(S(_,R((w+C(b,x))/(w*w),A(m,m))),k(S(A(x,m),A(m,x)),w)),t=y,f=u,g=v,++N}return{solution:t,f:f,gradient:g,invHessian:_,iterations:N,message:P}},numeric.Dopri=function(e,t,n,r,i,a,o){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=o,this.message=a},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,a,o,s,u,l,c,f,h=this.x,d=this.y,p=this.f,g=this.ymid,v=(h.length,numeric.add),m=numeric.mul,y=numeric.sub;return r=h[t],i=h[t+1],o=d[t],s=d[t+1],a=r+.5*(i-r),u=g[t],l=y(p[t],m(o,1/(r-a)+2/(r-i))),c=y(p[t+1],m(s,1/(i-a)+2/(i-r))),v(v(v(v(m(o,(f=[n(e-i)*(e-a)/n(r-i)/(r-a),n(e-r)*n(e-i)/n(r-a)/n(i-a),n(e-r)*(e-a)/n(i-r)/(i-a),(e-r)*n(e-i)*(e-a)/n(r-i)/(r-a),(e-i)*n(e-r)*(e-a)/n(r-i)/(i-a)])[0]),m(u,f[1])),m(s,f[2])),m(l,f[3])),m(c,f[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var a=e.length,o=Array(a);for(t=a-1;-1!==t;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,n=s.length-1;n-t>1;)s[r=i(.5*(t+n))]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,a,o){void 0===i&&(i=1e-6),void 0===a&&(a=1e3);var s,u,l,c,f,h,d,p,g,v,m,y,b,x=[e],w=[n],E=[r(e,n)],T=[],_=[.075,.225],C=[44/45,-56/15,32/9],D=[19372/6561,-25360/2187,64448/6561,-212/729],S=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],A=[35/384,0,500/1113,125/192,-2187/6784,11/84],k=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],R=[.2,.3,.8,8/9,1,1],O=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],M=0,L=(t-e)/10,N=0,P=numeric.add,I=numeric.mul,B=Math.min,$=Math.abs,F=numeric.norminf,q=Math.pow,j=numeric.any,z=numeric.lt,Y=numeric.and,G=(numeric.sub,new numeric.Dopri(x,w,E,T,-1,""));for("function"==typeof o&&(m=o(e,n));e<t&&N<a;)if(++N,e+L>t&&(L=t-e),s=r(e+R[0]*L,P(n,I(.2*L,E[M]))),u=r(e+R[1]*L,P(P(n,I(_[0]*L,E[M])),I(_[1]*L,s))),l=r(e+R[2]*L,P(P(P(n,I(C[0]*L,E[M])),I(C[1]*L,s)),I(C[2]*L,u))),c=r(e+R[3]*L,P(P(P(P(n,I(D[0]*L,E[M])),I(D[1]*L,s)),I(D[2]*L,u)),I(D[3]*L,l))),f=r(e+R[4]*L,P(P(P(P(P(n,I(S[0]*L,E[M])),I(S[1]*L,s)),I(S[2]*L,u)),I(S[3]*L,l)),I(S[4]*L,c))),h=r(e+L,g=P(P(P(P(P(n,I(E[M],L*A[0])),I(u,L*A[2])),I(l,L*A[3])),I(c,L*A[4])),I(f,L*A[5]))),(v="number"==typeof(d=P(P(P(P(P(I(E[M],L*O[0]),I(u,L*O[2])),I(l,L*O[3])),I(c,L*O[4])),I(f,L*O[5])),I(h,L*O[6])))?$(d):F(d))>i){if(e+(L=.2*L*q(i/v,.25))===e){G.msg="Step size became too small";break}}else{if(T[M]=P(P(P(P(P(P(n,I(E[M],L*k[0])),I(u,L*k[2])),I(l,L*k[3])),I(c,L*k[4])),I(f,L*k[5])),I(h,L*k[6])),x[++M]=e+L,w[M]=g,E[M]=h,"function"==typeof o){var V,U,X=e,W=e+.5*L;if(y=o(W,T[M-1]),j(b=Y(z(m,0),z(0,y)))||(X=W,m=y,y=o(W=e+L,g),b=Y(z(m,0),z(0,y))),j(b)){for(var H,K,Q=0,Z=1,J=1;;){if("number"==typeof m)U=(J*y*X-Z*m*W)/(J*y-Z*m);else for(U=W,p=m.length-1;-1!==p;--p)m[p]<0&&y[p]>0&&(U=B(U,(J*y[p]*X-Z*m[p]*W)/(J*y[p]-Z*m[p])));if(U<=X||U>=W)break;K=o(U,V=G._at(U,M-1)),j(H=Y(z(m,0),z(0,K)))?(W=U,y=K,b=H,J=1,-1===Q?Z*=.5:Z=1,Q=-1):(X=U,m=K,Z=1,1===Q?J*=.5:J=1,Q=1)}return g=G._at(.5*(e+U),M-1),G.f[M]=r(U,V),G.x[M]=U,G.y[M]=V,G.ymid[M-1]=g,G.events=b,G.iterations=N,G}}e+=L,n=g,m=y,L=B(.8*L*q(i/v,.25),4*L)}return G.iterations=N,G},numeric.LU=function(e,t){t=t||!1;var n,r,i,a,o,s,u,l,c,f=Math.abs,h=e.length,d=h-1,p=new Array(h);for(t||(e=numeric.clone(e)),i=0;i<h;++i){for(u=i,c=f((s=e[i])[i]),r=i+1;r<h;++r)c<(a=f(e[r][i]))&&(c=a,u=r);for(p[i]=u,u!=i&&(e[i]=e[u],e[u]=s,s=e[i]),o=s[i],n=i+1;n<h;++n)e[n][i]/=o;for(n=i+1;n<h;++n){for(l=e[n],r=i+1;r<d;++r)l[r]-=l[i]*s[r],l[++r]-=l[i]*s[r];r===d&&(l[r]-=l[i]*s[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,i,a,o,s=e.LU,u=s.length,l=numeric.clone(t),c=e.P;for(n=u-1;-1!==n;--n)l[n]=t[n];for(n=0;n<u;++n)for(i=c[n],c[n]!==n&&(o=l[n],l[n]=l[i],l[i]=o),a=s[n],r=0;r<n;++r)l[n]-=l[r]*a[r];for(n=u-1;n>=0;--n){for(a=s[n],r=n+1;r<u;++r)l[n]-=l[r]*a[r];l[n]/=a[n]}return l},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,a,o,s,u,l=numeric.dim(e),c=l[0],f=l[1],h=numeric.identity(c),d=Array(c),p=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;t<c;++t){for(r=0,a=e[t],o=h[t],n=1;n<f;++n)p(a[r])<p(a[n])&&(r=n);for(d[t]=r,g(o,a[r]),g(a,a[r]),n=0;n<c;++n)if(n!==t){for(u=(s=e[n])[r],i=f-1;-1!==i;--i)s[i]-=a[i]*u;for(s=h[n],i=c-1;-1!==i;--i)s[i]-=o[i]*u}}return{I:h,A:e,P:d}},numeric.__solveLP=function(e,t,n,r,i,a,o){var s,u,l,c,f=numeric.sum,h=(numeric.log,numeric.mul),d=numeric.sub,p=numeric.dot,g=numeric.div,v=numeric.add,m=e.length,y=n.length,b=!1,x=1,w=(numeric.transpose(t),numeric.svd,numeric.transpose),E=(numeric.leq,Math.sqrt),T=Math.abs,_=(numeric.muleq,numeric.norminf,numeric.any,Math.min),C=numeric.all,D=numeric.gt,S=Array(m),A=Array(y),k=(numeric.rep([y],1),numeric.solve),R=d(n,p(t,a)),O=p(e,e);for(l=0;l<i;++l){var M,L;for(M=y-1;-1!==M;--M)A[M]=g(t[M],R[M]);var N=w(A);for(M=m-1;-1!==M;--M)S[M]=f(N[M]);x=.25*T(O/p(e,S));var P=100*E(O/p(S,S));for((!isFinite(x)||x>P)&&(x=P),c=v(e,h(x,S)),u=p(N,A),M=m-1;-1!==M;--M)u[M][M]+=1;L=k(u,g(c,x),!0);var I=g(R,p(t,L)),B=1;for(M=y-1;-1!==M;--M)I[M]<0&&(B=_(B,-.999*I[M]));if(s=d(a,h(L,B)),!C(D(R=d(n,p(t,s)),0)))return{solution:a,message:"",iterations:l};if(a=s,x<r)return{solution:s,message:"",iterations:l};if(o){var $=p(e,c),F=p(t,c);for(b=!0,M=y-1;-1!==M;--M)if($*F[M]<0){b=!1;break}}else b=!(a[m-1]>=0);if(b)return{solution:s,message:"Unbounded",iterations:l}}return{solution:a,message:"maximum iteration count exceeded",iterations:l}},numeric._solveLP=function(e,t,n,r,i){var a=e.length,o=n.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,l=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),c=numeric.rep([o,1],-1),f=numeric.blockMatrix([[t,c]]),h=n,d=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(l,f,h,r,i,d,!1),g=numeric.clone(p.solution);if(g.length=a,numeric.inf(s(n,u(t,g)))<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var v=numeric.__solveLP(e,t,n,r,i-p.iterations,g,!0);return v.iterations+=p.iterations,v},numeric.solveLP=function(e,t,n,r,i,a,o){if(void 0===o&&(o=1e3),void 0===a&&(a=numeric.epsilon),void 0===r)return numeric._solveLP(e,t,n,a,o);var s,u=r.length,l=r[0].length,c=t.length,f=numeric.echelonize(r),h=numeric.rep([l],0),d=f.P,p=[];for(s=d.length-1;-1!==s;--s)h[d[s]]=1;for(s=l-1;-1!==s;--s)0===h[s]&&p.push(s);var g=numeric.getRange,v=numeric.linspace(0,u-1),m=numeric.linspace(0,c-1),y=g(r,v,p),b=g(t,m,d),x=g(t,m,p),w=numeric.dot,E=numeric.sub,T=w(b,f.I),_=E(x,w(T,y)),C=E(n,w(T,i)),D=Array(d.length),S=Array(p.length);for(s=d.length-1;-1!==s;--s)D[s]=e[d[s]];for(s=p.length-1;-1!==s;--s)S[s]=e[p[s]];var A=E(S,w(D,w(f.I,y))),k=numeric._solveLP(A,_,C,a,o),R=k.solution;if(R!=R)return k;var O=w(f.I,E(i,w(y,R))),M=Array(e.length);for(s=d.length-1;-1!==s;--s)M[d[s]]=O[s];for(s=p.length-1;-1!==s;--s)M[p[s]]=R[s];return{solution:M,message:k.message,iterations:k.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var t,n,r,i,a=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,u=0,l={},c=[],f=0,h={},d=0,p=[],g=[],v=[];function m(n){throw new Error("MPStoLP: "+n+"\nLine "+t+": "+e[t]+"\nCurrent state: "+o[a]+"\n")}for(t=0;t<s;++t){var y=(r=e[t]).match(/\S*/g),b=[];for(n=0;n<y.length;++n)""!==y[n]&&b.push(y[n]);if(0!==b.length){for(n=0;n<o.length&&r.substr(0,o[n].length)!==o[n];++n);if(n<o.length){if(a=n,1===n&&(i=b[1]),6===n)return{name:i,c:p,A:numeric.transpose(g),b:v,rows:l,vars:h}}else switch(a){case 0:case 1:m("Unexpected line");case 2:switch(b[0]){case"N":0===u?u=b[1]:m("Two or more N rows");break;case"L":l[b[1]]=f,c[f]=1,v[f]=0,++f;break;case"G":l[b[1]]=f,c[f]=-1,v[f]=0,++f;break;case"E":l[b[1]]=f,c[f]=0,v[f]=0,++f;break;default:m("Parse error "+numeric.prettyPrint(b))}break;case 3:h.hasOwnProperty(b[0])||(h[b[0]]=d,p[d]=0,g[d]=numeric.rep([f],0),++d);var x=h[b[0]];for(n=1;n<b.length;n+=2)if(b[n]!==u){var w=l[b[n]];g[x][w]=(c[w]<0?-1:1)*parseFloat(b[n+1])}else p[x]=parseFloat(b[n+1]);break;case 4:for(n=1;n<b.length;n+=2)v[l[b[n]]]=(c[l[b[n]]]<0?-1:1)*parseFloat(b[n+1]);break;case 5:break;case 6:m("Internal error")}}}m("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,a,o){function s(e){var t,r,i=this,a=e.length,o=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],a||(e=[a++]);o<n;)i.S[o]=o++;for(o=0;o<n;o++)s=l(s+(t=i.S[o])+e[o%a]),r=i.S[s],i.S[o]=r,i.S[s]=t;i.g=function(e){var t=i.S,r=l(i.i+1),a=t[r],o=l(i.j+a),s=t[o];t[r]=s,t[o]=a;for(var u=t[l(a+s)];--e;)r=l(r+1),s=t[o=l(o+(a=t[r]))],t[r]=s,t[o]=a,u=u*n+t[l(a+s)];return i.i=r,i.j=o,u},i.g(n)}function u(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[l(r)]=l((n^=19*t[l(r)])+e.charCodeAt(r));for(r in e="",t)e+=String.fromCharCode(t[r]);return e}function l(e){return e&n-1}t.seedrandom=function(r,l){var c,f=[];return r=u(function e(t,n,r,i,a){r=[];a=typeof t;if(n&&"object"==a)for(i in t)if(i.indexOf("S")<5)try{r.push(e(t[i],n-1))}catch(e){}return r.length?r:t+("string"!=a?"\0":"")}(l?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),f),u((c=new s(f)).S,e),t.random=function(){for(var e=c.g(6),t=o,r=0;e<i;)e=(e+r)*n,t*=n,r=c.g(1);for(;e>=a;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},o=t.pow(n,6),i=t.pow(2,i),a=2*i,u(t.random(),e)}([],numeric.seedrandom,256,0,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;n<i;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;t<i;t++)r[t-1]=n(e[t]);return r}function r(e,t,n,r,i,a,o,s,u,l,c,f,h,d,p,g){var v,m,y,b,x,w,E,T,_,C,D,S,A,k,R,O,M,L,N,P,I,B,$,F,q,j,z;A=Math.min(r,l),y=2*r+A*(A+5)/2+2*l+1,F=1e-60;do{q=1+.1*(F+=F),j=1+.2*F}while(q<=1||j<=1);for(v=1;v<=r;v+=1)p[v]=t[v];for(v=r+1;v<=y;v+=1)p[v]=0;for(v=1;v<=l;v+=1)f[v]=0;if(x=[],0===g[1]){if(function(e,t,n,r){var i,a,o,s,u,l;for(a=1;a<=n;a+=1){if(r[1]=a,l=0,(o=a-1)<1){if((l=e[a][a]-l)<=0)break;e[a][a]=Math.sqrt(l)}else{for(s=1;s<=o;s+=1){for(u=e[s][a],i=1;i<s;i+=1)u-=e[i][a]*e[i][s];u/=e[s][s],e[s][a]=u,l+=u*u}if((l=e[a][a]-l)<=0)break;e[a][a]=Math.sqrt(l)}r[1]=0}}(e,0,r,x),0!==x[1])return void(g[1]=2);!function(e,t,n,r){var i,a,o,s;for(a=1;a<=n;a+=1){for(s=0,i=1;i<a;i+=1)s+=e[i][a]*r[i];r[a]=(r[a]-s)/e[a][a]}for(o=1;o<=n;o+=1)for(r[a=n+1-o]=r[a]/e[a][a],s=-r[a],i=1;i<a;i+=1)r[i]=r[i]+s*e[i][a]}(e,0,r,t),function(e,t,n){var r,i,a,o,s;for(a=1;a<=n;a+=1){for(e[a][a]=1/e[a][a],s=-e[a][a],r=1;r<a;r+=1)e[r][a]=s*e[r][a];if(n<(o=a+1))break;for(i=o;i<=n;i+=1)for(s=e[a][i],e[a][i]=0,r=1;r<=a;r+=1)e[r][i]=e[r][i]+s*e[r][a]}}(e,0,r)}else{for(m=1;m<=r;m+=1)for(i[m]=0,v=1;v<=m;v+=1)i[m]=i[m]+e[v][m]*t[v];for(m=1;m<=r;m+=1)for(t[m]=0,v=m;v<=r;v+=1)t[m]=t[m]+e[m][v]*i[v]}for(a[1]=0,m=1;m<=r;m+=1)for(i[m]=t[m],a[1]=a[1]+p[m]*i[m],p[m]=0,v=m+1;v<=r;v+=1)e[v][m]=0;for(a[1]=-a[1]/2,g[1]=0,k=(C=(_=(D=(T=(E=r)+r)+A)+A+1)+A*(A+1)/2)+l,v=1;v<=l;v+=1){for(O=0,m=1;m<=r;m+=1)O+=o[m][v]*o[m][v];p[k+v]=Math.sqrt(O)}function Y(){for(d[1]=d[1]+1,y=C,v=1;v<=l;v+=1){for(y+=1,O=-s[v],m=1;m<=r;m+=1)O+=o[m][v]*i[m];if(Math.abs(O)<F&&(O=0),v>c)p[y]=O;else if(p[y]=-Math.abs(O),O>0){for(m=1;m<=r;m+=1)o[m][v]=-o[m][v];s[v]=-s[v]}}for(v=1;v<=h;v+=1)p[C+f[v]]=0;for(S=0,R=0,v=1;v<=l;v+=1)p[C+v]<R*p[k+v]&&(S=v,R=p[C+v]/p[k+v]);return 0===S?999:0}function G(){for(v=1;v<=r;v+=1){for(O=0,m=1;m<=r;m+=1)O+=e[m][v]*o[m][S];p[v]=O}for(b=E,v=1;v<=r;v+=1)p[b+v]=0;for(m=h+1;m<=r;m+=1)for(v=1;v<=r;v+=1)p[b+v]=p[b+v]+e[v][m]*p[m];for(B=!0,v=h;v>=1;v-=1){for(O=p[v],b=(y=_+v*(v+3)/2)-v,m=v+1;m<=h;m+=1)O-=p[y]*p[T+m],y+=m;if(O/=p[b],p[T+v]=O,f[v]<c)break;if(O<0)break;B=!1,w=v}if(!B)for(M=p[D+w]/p[T+w],v=1;v<=h&&!(f[v]<c)&&!(p[T+v]<0);v+=1)(R=p[D+v]/p[T+v])<M&&(M=R,w=v);for(O=0,v=E+1;v<=E+r;v+=1)O+=p[v]*p[v];if(Math.abs(O)<=F){if(B)return g[1]=1,999;for(v=1;v<=h;v+=1)p[D+v]=p[D+v]-M*p[T+v];return p[D+h+1]=p[D+h+1]+M,700}for(O=0,v=1;v<=r;v+=1)O+=p[E+v]*o[v][S];for(L=-p[C+S]/O,$=!0,B||M<L&&(L=M,$=!1),v=1;v<=r;v+=1)i[v]=i[v]+L*p[E+v],Math.abs(i[v])<F&&(i[v]=0);for(a[1]=a[1]+L*O*(L/2+p[D+h+1]),v=1;v<=h;v+=1)p[D+v]=p[D+v]-L*p[T+v];if(p[D+h+1]=p[D+h+1]+L,!$){for(O=-s[S],m=1;m<=r;m+=1)O+=i[m]*o[m][S];if(S>c)p[C+S]=O;else if(p[C+S]=-Math.abs(O),O>0){for(m=1;m<=r;m+=1)o[m][S]=-o[m][S];s[S]=-s[S]}return 700}for(f[h+=1]=S,y=_+(h-1)*h/2+1,v=1;v<=h-1;v+=1)p[y]=p[v],y+=1;if(h===r)p[y]=p[r];else{for(v=r;v>=h+1&&0!==p[v]&&(N=Math.max(Math.abs(p[v-1]),Math.abs(p[v])),P=Math.min(Math.abs(p[v-1]),Math.abs(p[v])),R=p[v-1]>=0?Math.abs(N*Math.sqrt(1+P*P/(N*N))):-Math.abs(N*Math.sqrt(1+P*P/(N*N))),N=p[v-1]/R,P=p[v]/R,1!==N);v-=1)if(0===N)for(p[v-1]=P*R,m=1;m<=r;m+=1)R=e[m][v-1],e[m][v-1]=e[m][v],e[m][v]=R;else for(p[v-1]=R,I=P/(1+N),m=1;m<=r;m+=1)R=N*e[m][v-1]+P*e[m][v],e[m][v]=I*(e[m][v-1]+R)-e[m][v],e[m][v-1]=R;p[y]=p[h]}return 0}function V(){if(0===p[b=(y=_+w*(w+1)/2+1)+w])return 798;if(N=Math.max(Math.abs(p[b-1]),Math.abs(p[b])),P=Math.min(Math.abs(p[b-1]),Math.abs(p[b])),R=p[b-1]>=0?Math.abs(N*Math.sqrt(1+P*P/(N*N))):-Math.abs(N*Math.sqrt(1+P*P/(N*N))),N=p[b-1]/R,P=p[b]/R,1===N)return 798;if(0===N){for(v=w+1;v<=h;v+=1)R=p[b-1],p[b-1]=p[b],p[b]=R,b+=v;for(v=1;v<=r;v+=1)R=e[v][w],e[v][w]=e[v][w+1],e[v][w+1]=R}else{for(I=P/(1+N),v=w+1;v<=h;v+=1)R=N*p[b-1]+P*p[b],p[b]=I*(p[b-1]+R)-p[b],p[b-1]=R,b+=v;for(v=1;v<=r;v+=1)R=N*e[v][w]+P*e[v][w+1],e[v][w+1]=I*(e[v][w]+R)-e[v][w+1],e[v][w]=R}return 0}function U(){for(b=y-w,v=1;v<=w;v+=1)p[b]=p[y],y+=1,b+=1;return p[D+w]=p[D+w+1],f[w]=f[w+1],(w+=1)<h?797:0}function X(){return p[D+h]=p[D+h+1],p[D+h+1]=0,f[h]=0,h-=1,d[2]=d[2]+1,0}for(h=0,d[1]=0,d[2]=0,z=0;;){if(999===(z=Y()))return;for(;0!==(z=G());){if(999===z)return;if(700===z)if(w===h)X();else{for(;V(),797===(z=U()););X()}}}}numeric.solveQP=function(e,i,a,o,s,u){e=t(e),i=t(i),a=t(a);var l,c,f,h,d,p=[],g=[],v=[],m=[],y=[];if(s=s||0,u=u?t(u):[void 0,0],o=o?t(o):[],c=e.length-1,f=a[1].length-1,!o)for(l=1;l<=f;l+=1)o[l]=0;for(l=1;l<=f;l+=1)g[l]=0;for(h=Math.min(c,f),l=1;l<=c;l+=1)v[l]=0;for(p[1]=0,l=1;l<=2*c+h*(h+5)/2+2*f+1;l+=1)m[l]=0;for(l=1;l<=2;l+=1)y[l]=0;return r(e,i,0,c,v,p,a,o,0,f,s,g,0,y,m,u),d="",1===u[1]&&(d="constraints are inconsistent, no solution!"),2===u[1]&&(d="matrix D in quadratic function is not positive definite!"),{solution:n(v),value:n(p),unconstrained_solution:n(i),iterations:n(y),iact:n(g),message:d}}}(),numeric.svd=function(e){var t,n=numeric.epsilon,r=1e-64/n,i=0,a=0,o=0,s=0,u=0,l=numeric.clone(e),c=l.length,f=l[0].length;if(c<f)throw"Need more rows than columns";var h=new Array(f),d=new Array(f);for(a=0;a<f;a++)h[a]=d[a]=0;var p=numeric.rep([f,f],0);function g(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var v=0,m=0,y=0,b=0,x=0,w=0,E=0;for(a=0;a<f;a++){for(h[a]=m,E=0,u=a+1,o=a;o<c;o++)E+=l[o][a]*l[o][a];if(E<=r)m=0;else for(v=l[a][a],m=Math.sqrt(E),v>=0&&(m=-m),y=v*m-E,l[a][a]=v-m,o=u;o<f;o++){for(E=0,s=a;s<c;s++)E+=l[s][a]*l[s][o];for(v=E/y,s=a;s<c;s++)l[s][o]+=v*l[s][a]}for(d[a]=m,E=0,o=u;o<f;o++)E+=l[a][o]*l[a][o];if(E<=r)m=0;else{for(v=l[a][a+1],m=Math.sqrt(E),v>=0&&(m=-m),y=v*m-E,l[a][a+1]=v-m,o=u;o<f;o++)h[o]=l[a][o]/y;for(o=u;o<c;o++){for(E=0,s=u;s<f;s++)E+=l[o][s]*l[a][s];for(s=u;s<f;s++)l[o][s]+=E*h[s]}}(x=Math.abs(d[a])+Math.abs(h[a]))>b&&(b=x)}for(a=f-1;-1!=a;a+=-1){if(0!=m){for(y=m*l[a][a+1],o=u;o<f;o++)p[o][a]=l[a][o]/y;for(o=u;o<f;o++){for(E=0,s=u;s<f;s++)E+=l[a][s]*p[s][o];for(s=u;s<f;s++)p[s][o]+=E*p[s][a]}}for(o=u;o<f;o++)p[a][o]=0,p[o][a]=0;p[a][a]=1,m=h[a],u=a}for(a=f-1;-1!=a;a+=-1){for(u=a+1,m=d[a],o=u;o<f;o++)l[a][o]=0;if(0!=m){for(y=l[a][a]*m,o=u;o<f;o++){for(E=0,s=u;s<c;s++)E+=l[s][a]*l[s][o];for(v=E/y,s=a;s<c;s++)l[s][o]+=v*l[s][a]}for(o=a;o<c;o++)l[o][a]=l[o][a]/m}else for(o=a;o<c;o++)l[o][a]=0;l[a][a]+=1}for(n*=b,s=f-1;-1!=s;s+=-1)for(var T=0;T<50;T++){var _=!1;for(u=s;-1!=u;u+=-1){if(Math.abs(h[u])<=n){_=!0;break}if(Math.abs(d[u-1])<=n)break}if(!_){i=0,E=1;var C=u-1;for(a=u;a<s+1&&(v=E*h[a],h[a]=i*h[a],!(Math.abs(v)<=n));a++)for(y=g(v,m=d[a]),d[a]=y,i=m/y,E=-v/y,o=0;o<c;o++)x=l[o][C],w=l[o][a],l[o][C]=x*i+w*E,l[o][a]=-x*E+w*i}if(w=d[s],u==s){if(w<0)for(d[s]=-w,o=0;o<f;o++)p[o][s]=-p[o][s];break}if(T>=49)throw"Error: no convergence.";for(b=d[u],m=g(v=(((x=d[s-1])-w)*(x+w)+((m=h[s-1])-(y=h[s]))*(m+y))/(2*y*x),1),v=v<0?((b-w)*(b+w)+y*(x/(v-m)-y))/b:((b-w)*(b+w)+y*(x/(v+m)-y))/b,i=1,E=1,a=u+1;a<s+1;a++){for(m=h[a],x=d[a],y=E*m,m*=i,w=g(v,y),h[a-1]=w,v=b*(i=v/w)+m*(E=y/w),m=-b*E+m*i,y=x*E,x*=i,o=0;o<f;o++)b=p[o][a-1],w=p[o][a],p[o][a-1]=b*i+w*E,p[o][a]=-b*E+w*i;for(w=g(v,y),d[a-1]=w,v=(i=v/w)*m+(E=y/w)*x,b=-E*m+i*x,o=0;o<c;o++)x=l[o][a-1],w=l[o][a],l[o][a-1]=x*i+w*E,l[o][a]=-x*E+w*i}h[u]=0,h[s]=v,d[s]=b}for(a=0;a<d.length;a++)d[a]<n&&(d[a]=0);for(a=0;a<f;a++)for(o=a-1;o>=0;o--)if(d[o]<d[a]){for(i=d[o],d[o]=d[a],d[a]=i,s=0;s<l.length;s++)t=l[s][a],l[s][a]=l[s][o],l[s][o]=t;for(s=0;s<p.length;s++)t=p[s][a],p[s][a]=p[s][o],p[s][o]=t;a=o}return{U:l,S:d,V:p}}}),cytoscapeFcose=createCommonjsModule(function(e,t){var n;n=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(t,n){t.exports=e},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(2),a=n(5).spectralLayout,o=n(4).coseLayout,s=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:10,nodeDimensionsIncludeLabels:!1,samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!1,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,ready:function(){},stop:function(){}}),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=i({},s,t)}return r(e,[{key:"run",value:function(){var e=this.options,t=e.eles,n=void 0,r=void 0,i=void 0,s=void 0;e.randomize&&t.nodes().length>2&&(n=a(e),r=n.xCoords,i=n.yCoords),("default"==e.quality||"proof"==e.quality||t.nodes().length<=2)&&(s=o(e,n));"default"==e.quality||"proof"==e.quality||e.randomize?t.nodes().not(":parent").layoutPositions(this,e,function(t,n){if("default"==e.quality||"proof"==e.quality){"number"==typeof t&&(t=n);var a=t.data("id"),o=s[a];return{x:o.getRect().getCenterX(),y:o.getRect().getCenterY()}}return{x:r[n],y:i[n]}}):console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),e}();e.exports=u},function(e,t,n){e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e}},function(e,t,n){var r={multMat:function(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var i=0;i<t[0].length;i++){n[r][i]=0;for(var a=0;a<e[0].length;a++)n[r][i]+=e[r][a]*t[a][i]}}return n},multGamma:function(e){for(var t=[],n=0,r=0;r<e.length;r++)n+=e[r];n*=-1/e.length;for(var i=0;i<e.length;i++)t[i]=n+e[i];return t},multL:function(e,t,n){for(var r=[],i=[],a=[],o=0;o<t[0].length;o++){for(var s=0,u=0;u<t.length;u++)s+=-.5*t[u][o]*e[u];i[o]=s}for(var l=0;l<n.length;l++){for(var c=0,f=0;f<n.length;f++)c+=n[l][f]*i[f];a[l]=c}for(var h=0;h<t.length;h++){for(var d=0,p=0;p<t[0].length;p++)d+=t[h][p]*a[p];r[h]=d}return r},multCons:function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=e[r]*t;return n},minusOp:function(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=e[r]-t[r];return n},dotProduct:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n},mag:function(e){return Math.sqrt(this.dotProduct(e,e))},normalize:function(e){for(var t=[],n=this.mag(e),r=0;r<e.length;r++)t[r]=e[r]/n;return t}};e.exports=r},function(e,t,n){var r=n(0).CoSELayout,i=n(0).CoSENode,a=n(0).layoutBase.PointD,o=n(0).layoutBase.DimensionD,s=n(0).layoutBase.LayoutConstants,u=n(0).layoutBase.FDLayoutConstants,l=n(0).CoSEConstants;e.exports={coseLayout:function(e,t){var n=e.eles,c=n.nodes(),f=n.edges(),h=void 0,d=void 0,p=void 0,g={};e.randomize&&c.length>2&&(h=t.nodeIndexes,d=t.xCoords,p=t.yCoords);null!=e.nodeRepulsion&&(l.DEFAULT_REPULSION_STRENGTH=u.DEFAULT_REPULSION_STRENGTH=e.nodeRepulsion),null!=e.idealEdgeLength&&(l.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=e.idealEdgeLength),null!=e.edgeElasticity&&(l.DEFAULT_SPRING_STRENGTH=u.DEFAULT_SPRING_STRENGTH=e.edgeElasticity),null!=e.nestingFactor&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(l.DEFAULT_GRAVITY_STRENGTH=u.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(l.MAX_ITERATIONS=u.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=u.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=u.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),"proof"==e.quality?s.QUALITY=2:s.QUALITY=0,l.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!e.randomize,l.ANIMATE=u.ANIMATE=s.ANIMATE=e.animate,l.TILE=e.tile,l.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal,l.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!0;var v=new r,m=v.newGraphManager();return function e(t,n,r,s){for(var u=n.length,l=0;l<u;l++){var f=n[l],v=f.children(),m=void 0,y=f.layoutDimensions({nodeDimensionsIncludeLabels:s.nodeDimensionsIncludeLabels});if(null!=f.outerWidth()&&null!=f.outerHeight())if(s.randomize&&c.length>2)if(f.isParent()){var b=T(f);m=t.add(new i(r.graphManager,new a(b.topLeftX,b.topLeftY),new o(b.width,b.height)))}else m=t.add(new i(r.graphManager,new a(d[h.get(f.id())]-y.w/2,p[h.get(f.id())]-y.h/2),new o(parseFloat(y.w),parseFloat(y.h))));else m=t.add(new i(r.graphManager,new a(f.position("x")-y.w/2,f.position("y")-y.h/2),new o(parseFloat(y.w),parseFloat(y.h))));else m=t.add(new i(this.graphManager));if(m.id=f.data("id"),m.paddingLeft=parseInt(f.css("padding")),m.paddingTop=parseInt(f.css("padding")),m.paddingRight=parseInt(f.css("padding")),m.paddingBottom=parseInt(f.css("padding")),s.nodeDimensionsIncludeLabels&&f.isParent()){var x=f.boundingBox({includeLabels:!0,includeNodes:!1}).w,w=f.boundingBox({includeLabels:!0,includeNodes:!1}).h,E=f.css("text-halign");m.labelWidth=x,m.labelHeight=w,m.labelPos=E}g[f.data("id")]=m,isNaN(m.rect.x)&&(m.rect.x=0),isNaN(m.rect.y)&&(m.rect.y=0),null!=v&&v.length>0&&e(r.getGraphManager().add(r.newGraph(),m),v,r,s)}function T(e){for(var t=Number.MAX_VALUE,n=Number.MIN_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,a=void 0,o=void 0,s=void 0,u=void 0,l=e.descendants().not(":parent"),c=l.length,f=0;f<c;f++){var g=l[f];t>(a=d[h.get(g.id())]-g.width()/2)&&(t=a),n<(o=d[h.get(g.id())]+g.width()/2)&&(n=o),r>(s=p[h.get(g.id())]-g.height()/2)&&(r=s),i<(u=p[h.get(g.id())]+g.height()/2)&&(i=u)}var v={};return v.topLeftX=t,v.topLeftY=r,v.width=n-t,v.height=r-i,v}}(m.addRoot(),function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id()]=!0;return e.filter(function(e,n){"number"==typeof e&&(e=n);for(var r=e.parent()[0];null!=r;){if(t[r.id()])return!1;r=r.parent()[0]}return!0})}(c),v,e),function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r],a=g[i.data("source")],o=g[i.data("target")];a!==o&&0==a.getEdgesBetween(o).length&&(t.add(e.newEdge(),a,o).id=i.id())}}(v,m,f),v.runLayout(),g}}},function(e,t,n){var r=n(3),i=n(7),a=n(0).layoutBase.LinkedList;e.exports={spectralLayout:function(e){var t=e.cy,n=e.eles.nodes(),o=new Map,s=new Map,u=new Map,l=[],c=[],f=[],h=[],d=[],p=[],g=[],v=[],m=void 0,y=e.piTol,b=e.samplingType,x=e.nodeSeparation,w=void 0,E=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id()]=!0;return e.filter(function(e,n){"number"==typeof e&&(e=n);for(var r=e.parent()[0];null!=r;){if(t[r.id()])return!1;r=r.parent()[0]}return!0})},T=function(e){var t=new a,n=new Set,r=[],i=void 0,s=void 0,u=void 0,l=!1,c=1,f=[];do{var h=e[0],d=h.union(h.descendants());for(r.push(h),d.forEach(function(e){t.push(e),n.add(e)});0!=t.length;)for(var p=(h=t.shift()).neighborhood().nodes(),g=0;g<p.length;g++){var v=p[g];null==(i=e.intersection(v.union(v.ancestors())))||n.has(i[0])||i.union(i.descendants()).forEach(function(i){t.push(i),n.add(i),e.has(i)&&r.push(i)})}r.length==e.length&&(l=!0),(!l||l&&c>1)&&function(){s=r[0],u=s.connectedEdges().length,r.forEach(function(e){e.connectedEdges().length<u&&(u=e.connectedEdges().length,s=e)}),f.push(s.id());var t=r[0];r.forEach(function(e){t=t.union(e)}),r=[],e=e.difference(t),c++}()}while(!l);f.length>0&&o.set("dummy"+(o.size+1),f)},_=function(e,t,n){for(var r=[],i=0,a=0,o=0,u=void 0,c=[],f=0,h=1,g=0;g<m;g++)c[g]=1e8;for(r[a]=e,c[e]=0;a>=i;){o=r[i++];for(var v=l[o],y=0;y<v.length;y++)1e8==c[u=s.get(v[y])]&&(c[u]=c[o]+1,r[++a]=u);p[o][t]=c[o]*x}if(n){for(var b=0;b<m;b++)p[b][t]<d[b]&&(d[b]=p[b][t]);for(var w=0;w<m;w++)d[w]>f&&(f=d[w],h=w)}return h};T(E(n)),t.nodes(":parent").forEach(function(e){T(E(e.descendants()))});for(var C=0,D=0;D<n.length;D++)n[D].isParent()||s.set(n[D].id(),C++);var S=!0,A=!1,k=void 0;try{for(var R,O=o.keys()[Symbol.iterator]();!(S=(R=O.next()).done);S=!0){var M=R.value;s.set(M,C++)}}catch(e){A=!0,k=e}finally{try{!S&&O.return&&O.return()}finally{if(A)throw k}}for(var L=0;L<s.size;L++)l[L]=[];t.nodes(":parent").forEach(function(e){for(var t=e.children();0==t.nodes(":childless").length;)t=t.nodes()[0].children();var n=0,r=t.nodes(":childless")[0].connectedEdges().length;t.nodes(":childless").forEach(function(e,t){e.connectedEdges().length<r&&(r=e.connectedEdges().length,n=t)}),u.set(e.id(),t.nodes(":childless")[n].id())}),t.nodes().forEach(function(e){var t=void 0;t=e.isParent()?s.get(u.get(e.id())):s.get(e.id()),e.neighborhood().nodes().forEach(function(e){e.isParent()?l[t].push(u.get(e.id())):l[t].push(e.id())})});var N=function(e){var n=s.get(e),r=void 0;o.get(e).forEach(function(i){r=t.getElementById(i).isParent()?u.get(i):i,l[n].push(r),l[s.get(r)].push(e)})},P=!0,I=!1,B=void 0;try{for(var $,F=o.keys()[Symbol.iterator]();!(P=($=F.next()).done);P=!0)N($.value)}catch(e){I=!0,B=e}finally{try{!P&&F.return&&F.return()}finally{if(I)throw B}}m=s.size,w=m<e.sampleSize?m:e.sampleSize;for(var q=0;q<m;q++)p[q]=[];for(var j=0;j<w;j++)v[j]=[];return function(e){var t=void 0;if(e){t=Math.floor(Math.random()*m);for(var n=0;n<m;n++)d[n]=1e8;for(var r=0;r<w;r++)h[r]=t,t=_(t,r,e)}else{!function(){for(var e=0,t=0,n=!1;t<w;){e=Math.floor(Math.random()*m),n=!1;for(var r=0;r<t;r++)if(h[r]==e){n=!0;break}n||(h[t]=e,t++)}}();for(var i=0;i<w;i++)_(h[i],i,e)}for(var a=0;a<m;a++)for(var o=0;o<w;o++)p[a][o]*=p[a][o];for(var s=0;s<w;s++)g[s]=[];for(var u=0;u<w;u++)for(var l=0;l<w;l++)g[u][l]=p[h[l]][u]}(b),function(){for(var e=i.svd(g),t=e.S,n=e.U,a=e.V,o=t[0]*t[0]*t[0],s=[],u=0;u<w;u++){s[u]=[];for(var l=0;l<w;l++)s[u][l]=0,u==l&&(s[u][l]=t[u]/(t[u]*t[u]+o/(t[u]*t[u])))}v=r.multMat(r.multMat(a,s),i.transpose(n))}(),function(){for(var e=void 0,t=void 0,n=[],i=[],a=[],o=[],s=0;s<m;s++)n[s]=Math.random(),i[s]=Math.random();n=r.normalize(n),i=r.normalize(i);for(var u=1e-9,l=1e-9,h=void 0;;){for(var d=0;d<m;d++)a[d]=n[d];if(n=r.multGamma(r.multL(r.multGamma(a),p,v)),e=r.dotProduct(a,n),n=r.normalize(n),u=r.dotProduct(a,n),(h=Math.abs(u/l))<=1+y&&h>=1)break;l=u}for(var g=0;g<m;g++)a[g]=n[g];for(l=1e-9;;){for(var b=0;b<m;b++)o[b]=i[b];if(o=r.minusOp(o,r.multCons(a,r.dotProduct(a,o))),i=r.multGamma(r.multL(r.multGamma(o),p,v)),t=r.dotProduct(o,i),i=r.normalize(i),u=r.dotProduct(o,i),(h=Math.abs(u/l))<=1+y&&h>=1)break;l=u}for(var x=0;x<m;x++)o[x]=i[x];c=r.multCons(a,Math.sqrt(Math.abs(e))),f=r.multCons(o,Math.sqrt(Math.abs(t)))}(),{nodeIndexes:s,xCoords:c,yCoords:f}}}},function(e,t,n){var r=n(1),i=function(e){e&&e("layout","fcose",r)};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},function(e,n){e.exports=t}])},e.exports=n(coseBase,numeric1_2_6)}),fcose=unwrapExports(cytoscapeFcose);function yamlToGraph(e){return new Promise((t,n)=>{const r=browser.parse(e);if(!r.services)return n(dvError("No services to graph."));const i=[];return Object.keys(r.services).forEach(e=>{i.push(constructNode(e,"service")),r.services[e].ports&&(i.push(constructNode("host","host")),r.services[e].ports.forEach(t=>{const n=t.slice(t.indexOf(":")+1),r=n.split(":")[0],a=n.split(":")[1],o=e+"-host:"+n;i.push(constructLink(e,"host",o,"",a,r))})),r.services[e].volumes&&r.services[e].volumes.forEach(t=>{const n=t.split(":")[0];i.push(constructNode(n,"volume")),i.push(constructLink(n,e,n+"-"+e,t))})}),t(i)})}function constructNode(e,t){return{data:{id:e},classes:[t],group:"nodes"}}function constructLink(e,t,n,r,i="",a=""){return{data:{source:e,target:t,id:n,label:r,"source-label":i,"target-label":a},group:"edges"}}function initGraph(e){return cytoscape_cjs.use(fcose),cytoscape_cjs({container:document.getElementById("cytoscape"),layout:{name:"fcose",nodeDimensionsIncludeLabels:!0,nodeSeparation:200,idealEdgeLength:100},elements:e,style:[{selector:"node.service",style:{"background-image":"data:image/svg+xml;utf8,"+encodeURIComponent(DockerServiceImage),"background-color":"white","text-valign":"bottom",height:24,width:24,label:"data(id)"}},{selector:"node.host",style:{"background-image":"data:image/svg+xml;utf8,"+encodeURIComponent(HostImage),"background-color":"white","text-valign":"bottom",height:48,width:48,label:"data(id)"}},{selector:"node.volume",style:{"background-image":"data:image/svg+xml;utf8,"+encodeURIComponent(VolumeImage),"background-color":"white","text-valign":"bottom",height:24,width:24,label:"data(id)"}},{selector:"edge",style:{"line-color":"black",label:"data(label)","source-label":e=>e.data("source-label"),"target-label":e=>e.data("target-label"),"text-rotation":"autorotate","curve-style":"bezier","text-valign":"bottom","text-margin-y":-10,"source-text-rotation":"autorotate","target-text-rotation":"autorotate","source-text-offset":30,"target-text-offset":30}}]})}function create_else_block(e){var t,n;return{c(){(t=element("button")).textContent="Export png",n=listen(t,"click",e.exportPng)},m(e,n){insert(e,t,n)},p:noop,d(e){e&&detach(t),n()}}}function create_if_block(e){var t,n;return{c(){(t=element("div")).innerHTML="<h3>Drop docker-compose.yml here</h3>",attr(t,"class","column column-50 column-offset-25 dropbox svelte-1ouusaj"),toggle_class(t,"dragged-over",e.isDraggedOver),n=[listen(t,"dragenter",prevent_default(e.dragenter_handler)),listen(t,"dragleave",prevent_default(e.dragleave_handler)),listen(t,"dragover",prevent_default(e.dragover_handler)),listen(t,"drop",prevent_default(e.handleDrop))]},m(e,n){insert(e,t,n)},p(e,n){e.isDraggedOver&&toggle_class(t,"dragged-over",n.isDraggedOver)},d(e){e&&detach(t),run_all(n)}}}function create_fragment(e){var t,n,r,i;function a(e,t){return t.hasFile?create_else_block:create_if_block}var o=a(0,e),s=o(e);return{c(){t=element("div"),n=element("div"),s.c(),r=space(),attr(i=element("div"),"id","cytoscape"),attr(i,"class","svelte-1ouusaj"),attr(n,"class","row row-center svelte-1ouusaj"),attr(t,"class","container svelte-1ouusaj")},m(e,a){insert(e,t,a),append(t,n),s.m(n,null),append(n,r),append(n,i)},p(e,t){o===(o=a(0,t))&&s?s.p(e,t):(s.d(1),(s=o(t))&&(s.c(),s.m(n,r)))},i:noop,o:noop,d(e){e&&detach(t),s.d()}}}function instance$1(e,t,n){let r,i,a=!1;return{isDraggedOver:a,hasFile:r,handleDrop:function(e){let t=e.dataTransfer.files[0],a=new FileReader;a.onload=function(e){n("hasFile",r=!0);let t=yamlToGraph(e.target.result);i=initGraph(t)},a.readAsText(t)},exportPng:function(){let e=document.createElement("a");e.style="display: none;",document.body.appendChild(e);let t=i.png({output:"blob",bg:"white",full:!0}),n=new Blob([t],{type:"image/png"});e.href=window.URL.createObjectURL(n),e.download="docker-compose.png",e.click(),document.body.removeChild(e)},dragover_handler:function(t){bubble(e,t)},dragenter_handler:()=>n("isDraggedOver",a=!0),dragleave_handler:()=>n("isDraggedOver",a=!1)}}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment,safe_not_equal,[])}}const app=new App({target:document.body});return app}();
//# sourceMappingURL=bundle.js.map
